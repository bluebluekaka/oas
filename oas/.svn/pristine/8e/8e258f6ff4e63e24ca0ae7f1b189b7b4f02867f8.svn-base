/*
 * Compressed by JSA(www.xidea.org)
 */
(function($){Function.prototype.ligerExtend=function(B,A){if(typeof B!="function")return this;this.base=B.prototype;this.base.constructor=B;var _=function(){};_.prototype=B.prototype;this.prototype=new _();this.prototype.constructor=this;if(A)$.extend(this.prototype,A)};Function.prototype.ligerDefer=function(A,$,_){var B=this;return setTimeout(function(){B.apply(A,_||[])},$)};window.liger=$.ligerui={version:"V1.2.0",managerCount:0,managers:{},managerIdPrev:"ligerui",autoNewId:true,error:{managerIsExist:"\u7ba1\u7406\u5668id\u5df2\u7ecf\u5b58\u5728"},pluginPrev:"liger",getId:function(_){_=_||this.managerIdPrev;var $=_+(1000+this.managerCount);this.managerCount++;return $},add:function($){if(arguments.length==2){var _=arguments[1];_.id=_.id||_.options.id||arguments[0].id;this.addManager(_);return}if(!$.id)$.id=this.getId($.__idPrev());if(this.managers[$.id])$.id=this.getId($.__idPrev());if(this.managers[$.id])throw new Error(this.error.managerIsExist);this.managers[$.id]=$},remove:function(_){if(typeof _=="string"||typeof _=="number")delete liger.managers[_];else if(typeof _=="object")if(_ instanceof liger.core.Component)delete liger.managers[_.id];else{if(!$(_).attr(this.idAttrName))return false;delete liger.managers[$(_).attr(this.idAttrName)]}},get:function(A,B){B=B||"ligeruiid";if(typeof A=="string"||typeof A=="number")return liger.managers[A];else if(typeof A=="object"){var C=A.length?A[0]:A,_=C[B]||$(C).attr(B);if(!_)return null;return liger.managers[_]}return null},find:function(C){var B=[];for(var _ in this.managers){var A=this.managers[_];if(C instanceof Function){if(A instanceof C)B.push(A)}else if(C instanceof Array){if($.inArray(A.__getType(),C)!=-1)B.push(A)}else if(A.__getType()==C)B.push(A)}return B},run:function(E,B,D){if(!E)return;D=$.extend({defaultsNamespace:"ligerDefaults",methodsNamespace:"ligerMethods",controlNamespace:"controls",idAttrName:"ligeruiid",isStatic:false,hasElement:true,propertyToElemnt:null},D||{});E=E.replace(/^ligerGet/,"");E=E.replace(/^liger/,"");if(this==null||this==window||D.isStatic){if(!liger.plugins[E])liger.plugins[E]={fn:$[liger.pluginPrev+E],isStatic:true};return new $.ligerui[D.controlNamespace][E]($.extend({},$[D.defaultsNamespace][E]||{},$[D.defaultsNamespace][E+"String"]||{},B.length>0?B[0]:{}))}if(!liger.plugins[E])liger.plugins[E]={fn:$.fn[liger.pluginPrev+E],isStatic:false};if(/Manager$/.test(E))return liger.get(this,D.idAttrName);this.each(function(){if(this[D.idAttrName]||$(this).attr(D.idAttrName)){var _=liger.get(this[D.idAttrName]||$(this).attr(D.idAttrName));if(_&&B.length>0)_.set(B[0]);return}if(B.length>=1&&typeof B[0]=="string")return;var C=B.length>0?B[0]:null,A=$.extend({},$[D.defaultsNamespace][E],$[D.defaultsNamespace][E+"String"],C);if(D.propertyToElemnt)A[D.propertyToElemnt]=this;if(D.hasElement)new $.ligerui[D.controlNamespace][E](this,A);else new $.ligerui[D.controlNamespace][E](A)});if(this.length==0)return null;if(B.length==0)return liger.get(this,D.idAttrName);if(typeof B[0]=="object")return liger.get(this,D.idAttrName);if(typeof B[0]=="string"){var A=liger.get(this,D.idAttrName);if(A==null)return;if(B[0]=="option"){if(B.length==2)return A.get(B[1]);else if(B.length>=3)return A.set(B[1],B[2])}else{var C=B[0];if(!A[C])return;var _=Array.apply(null,B);_.shift();return A[C].apply(A,_)}}return null},defaults:{},methods:{},core:{},controls:{},plugins:{}};$.ligerDefaults={};$.ligerMethos={};liger.defaults=$.ligerDefaults;liger.methods=$.ligerMethos;$.fn.liger=function($){if($)return liger.run.call(this,$,arguments);else return liger.get(this)};liger.core.Component=function($){this.events=this.events||{};this.options=$||{};this.children={}};$.extend(liger.core.Component.prototype,{__getType:function(){return"liger.core.Component"},__idPrev:function(){return"ligerui"},set:function(_,C){if(!_)return;if(typeof _=="object"){var D;if(this.options!=_){$.extend(this.options,_);D=_}else D=$.extend({},_);if(C==undefined||C==true)for(var B in D)if(B.indexOf("on")==0)this.set(B,D[B]);if(C==undefined||C==false)for(B in D)if(B.indexOf("on")!=0)this.set(B,D[B]);return}var A=_;if(A.indexOf("on")==0){if(typeof C=="function")this.bind(A.substr(2),C);return}if(!this.options)this.options={};if(this.trigger("propertychange",[_,C])==false)return;this.options[A]=C;var E="_set"+A.substr(0,1).toUpperCase()+A.substr(1);if(this[E])this[E].call(this,C);this.trigger("propertychanged",[_,C])},get:function($){var _="_get"+$.substr(0,1).toUpperCase()+$.substr(1);if(this[_])return this[_].call(this,$);return this.options[$]},hasBind:function($){var A=$.toLowerCase(),_=this.events[A];if(_&&_.length)return true;return false},trigger:function($,C){if(!$)return;var B=$.toLowerCase(),A=this.events[B];if(!A)return;C=C||[];if((C instanceof Array)==false)C=[C];for(var D=0;D<A.length;D++){var _=A[D];if(_.handler.apply(_.context,C)==false)return false}},bind:function($,D,C){if(typeof $=="object"){for(var B in $)this.bind(B,$[B]);return}if(typeof D!="function")return false;var A=$.toLowerCase(),_=this.events[A]||[];C=C||this;_.push({handler:D,context:C});this.events[A]=_},unbind:function($,D){if(!$){this.events={};return}var A=$.toLowerCase(),_=this.events[A];if(!_||!_.length)return;if(!D)delete this.events[A];else for(var C=0,B=_.length;C<B;C++)if(_[C].handler==D){_.splice(C,1);break}},destroy:function(){liger.remove(this)}});liger.core.UIComponent=function(_,B){liger.core.UIComponent.base.constructor.call(this,B);var A=this._extendMethods();if(A)$.extend(this,A);this.element=_;this._init();this._preRender();this.trigger("render");this._render();this.trigger("rendered");this._rendered()};liger.core.UIComponent.ligerExtend(liger.core.Component,{__getType:function(){return"liger.core.UIComponent"},_extendMethods:function(){},_init:function(){this.type=this.__getType();if(!this.element)this.id=this.options.id||liger.getId(this.__idPrev());else this.id=this.options.id||this.element.id||liger.getId(this.__idPrev());liger.add(this);if(!this.element)return;var attributes=this.attr();if(attributes&&attributes instanceof Array)for(var i=0;i<attributes.length;i++){var name=attributes[i];this.options[name]=$(this.element).attr(name)}var p=this.options;if($(this.element).attr("ligerui")){try{var attroptions=$(this.element).attr("ligerui");if(attroptions.indexOf("{")!=0)attroptions="{"+attroptions+"}";eval("attroptions = "+attroptions+";");if(attroptions)$.extend(p,attroptions)}catch(e){}}},_preRender:function(){},_render:function(){},_rendered:function(){if(this.element)$(this.element).attr("ligeruiid",this.id)},attr:function(){return[]},destroy:function(){if(this.element)$(this.element).remove();this.options=null;liger.remove(this)}});liger.controls.Input=function($,_){liger.controls.Input.base.constructor.call(this,$,_)};liger.controls.Input.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Input"},attr:function(){return["nullText"]},setValue:function($){return this.set("value",$)},getValue:function(){return this.get("value")},_setReadonly:function(A){var _=this.wrapper||this.text;if(!_||!_.hasClass("l-text"))return;var $=this.inputText;if(A){if($)$.attr("readonly","readonly");_.addClass("l-text-readonly")}else{if($)$.removeAttr("readonly");_.removeClass("l-text-readonly")}},setEnabled:function(){return this.set("disabled",false)},setDisabled:function(){return this.set("disabled",true)},updateStyle:function(){},resize:function(_,$){this.set({width:_,height:$})}});liger.win={top:false,mask:function(A){function _(){if(!liger.win.windowMask)return;var _=$(window).height()+$(window).scrollTop();liger.win.windowMask.height(_)}if(!this.windowMask){this.windowMask=$("<div class='l-window-mask' style='display: block;'></div>").appendTo("body");$(window).bind("resize.ligeruiwin",_);$(window).bind("scroll",_)}this.windowMask.show();_();this.masking=true},unmask:function(C){var _=$("body > .l-dialog:visible,body > .l-window:visible");for(var F=0,B=_.length;F<B;F++){var A=_.eq(F).attr("ligeruiid");if(C&&C.id==A)continue;var D=liger.get(A);if(!D)continue;var E=D.get("modal");if(E)return}if(this.windowMask)this.windowMask.hide();this.masking=false},createTaskbar:function(){if(!this.taskbar){this.taskbar=$("<div class=\"l-taskbar\"><div class=\"l-taskbar-tasks\"></div><div class=\"l-clear\"></div></div>").appendTo("body");if(this.top)this.taskbar.addClass("l-taskbar-top");this.taskbar.tasks=$(".l-taskbar-tasks:first",this.taskbar);this.tasks={}}this.taskbar.show();this.taskbar.animate({bottom:0});return this.taskbar},removeTaskbar:function(){var $=this;$.taskbar.animate({bottom:-32},function(){$.taskbar.remove();$.taskbar=null})},activeTask:function(A){for(var _ in this.tasks){var $=this.tasks[_];if(_==A.id)$.addClass("l-taskbar-task-active");else $.removeClass("l-taskbar-task-active")}},getTask:function(_){var $=this;if(!$.taskbar)return;if($.tasks[_.id])return $.tasks[_.id];return null},addTask:function(C){var B=this;if(!B.taskbar)B.createTaskbar();if(B.tasks[C.id])return B.tasks[C.id];var _=C.get("title"),A=B.tasks[C.id]=$("<div class=\"l-taskbar-task\"><div class=\"l-taskbar-task-icon\"></div><div class=\"l-taskbar-task-content\">"+_+"</div></div>");B.taskbar.tasks.append(A);B.activeTask(C);A.bind("click",function(){B.activeTask(C);if(C.actived)C.min();else C.active()}).hover(function(){$(this).addClass("l-taskbar-task-over")},function(){$(this).removeClass("l-taskbar-task-over")});return A},hasTask:function(){for(var $ in this.tasks)if(this.tasks[$])return true;return false},removeTask:function(_){var $=this;if(!$.taskbar)return;if($.tasks[_.id]){$.tasks[_.id].unbind();$.tasks[_.id].remove();delete $.tasks[_.id]}if(!$.hasTask())$.removeTaskbar()},setFront:function(A){var C=liger.find(liger.core.Win);for(var B in C){var _=C[B];if(_==A){$(_.element).css("z-index","9200");this.activeTask(_)}else $(_.element).css("z-index","9100")}}};liger.core.Win=function($,_){liger.core.Win.base.constructor.call(this,$,_)};liger.core.Win.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Win"},mask:function(){if(this.options.modal)liger.win.mask(this)},unmask:function(){if(this.options.modal)liger.win.unmask(this)},min:function(){},max:function(){},active:function(){}});liger.draggable={dragging:false};liger.resizable={reszing:false};liger.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(E){var _=function($){return $<10?"0"+$:$},D=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,B=function($){D.lastIndex=0;return D.test($)?"\""+$.replace(D,function(_){var $=meta[_];return typeof $==="string"?$:"\\u"+("0000"+_.charCodeAt(0).toString(16)).slice(-4)})+"\"":"\""+$+"\""};if(E===null)return"null";var G=typeof E;if(G==="undefined")return undefined;if(G==="string")return B(E);if(G==="number"||G==="boolean")return""+E;if(G==="object"){if(typeof E.toJSON==="function")return liger.toJSON(E.toJSON());if(E.constructor===Date)return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+_(this.getUTCMonth()+1)+"-"+_(this.getUTCDate())+"T"+_(this.getUTCHours())+":"+_(this.getUTCMinutes())+":"+_(this.getUTCSeconds())+"Z":null;var A=[];if(E.constructor===Array){for(var I=0,F=E.length;I<F;I++)A.push(liger.toJSON(E[I])||"null");return"["+A.join(",")+"]"}var C,$;for(var H in E){G=typeof H;if(G==="number")C="\""+H+"\"";else if(G==="string")C=B(H);else continue;G=typeof E[H];if(G==="function"||G==="undefined")continue;$=liger.toJSON(E[H]);A.push(C+":"+$)}return"{"+A.join(",")+"}"}};liger.getEditor=function(A){var B=A.type,_=A.control,C=A.master;if(!B)return null;if(_)_=_.substr(0,1).toUpperCase()+_.substr(1);return $.extend({create:function(M,D,E){var J=D.field||D.column,P=E||{},O=$.extend({},A.options),N=$("<input type='"+(A.password?"password":"text")+"'/>");if(A.body)N=A.body.clone();N.appendTo(M);if(D.field){var G=J.name,F=$.isFunction(P.prefixID)?P.prefixID(C):(P.prefixID||"");O.id=J.id||(F+J.name);if($.inArray(B,["select","combobox","autocomplete","popup"])!=-1){G=J.textField||J.comboboxName;if(J.comboboxName&&!J.id)O.id=(P.prefixID||"")+J.comboboxName}if($.inArray(B,["select","combobox","autocomplete","popup","radiolist","checkboxlist","listbox"])!=-1)O.valueFieldID=F+J.name;if(!A.body){var H=F+G;N.attr($.extend({name:H},J.attr));if(J.cssClass)N.addClass(J.cssClass);if(J.validate&&!C.options.unSetValidateAttr)N.attr("validate",liger.toJSON(J.validate))}$.extend(O,J.options)}if(J.editor){$.extend(O,J.editor.options);if(J.editor.valueColumnName)O.valueField=J.editor.valueColumnName;if(J.editor.displayColumnName)O.textField=J.editor.displayColumnName;if(_){var K=liger.defaults[_];for(var L in K)if(L in J.editor)O[L]=J.editor[L]}var I=J.editor.p||J.editor.ext;I=typeof(I)=="function"?I(D):I;$.extend(O,I)}return N["liger"+_](O)},getValue:function(_,$){if(_.getValue)return _.getValue()},setValue:function(_,A,$){if(_.setValue)_.setValue(A)},getText:function(_,$){if(_.getText)return _.getText()},setText:function(_,A,$){if(_.setText)_.setText(A)},getSelected:function(_,$){if(_.getSelected)return _.getSelected()},resize:function(_,B,A,$){if($.field)B=B-2;if(_.resize)_.resize(B,A)},destroy:function(_,$){if(_.destroy)_.destroy()}},A)};liger.editors={"text":{control:"TextBox"},"date":{control:"DateEditor",setValue:function(editor,value,editParm){if(typeof value=="string"&&/^\/Date/.test(value)){value=value.replace(/^\//,"new ").replace(/\/$/,"");eval("value = "+value)}editor.setValue(value)}},"combobox":{control:"ComboBox"},"spinner":{control:"Spinner"},"checkbox":{control:"CheckBox"},"checkboxlist":{control:"CheckBoxList",body:$("<div></div>"),resize:function(_,B,A,$){_.set("width",B-2)}},"radiolist":{control:"RadioList",body:$("<div></div>"),resize:function(_,B,A,$){_.set("width",B-2)}},"listbox":{control:"ListBox",body:$("<div></div>"),resize:function(_,B,A,$){_.set("width",B-2)}},"popup":{control:"PopupEdit"},"number":{control:"TextBox",options:{number:true}},"currency":{control:"TextBox",options:{currency:true}},"digits":{control:"TextBox",options:{digits:true}},"password":{control:"TextBox",password:true}};liger.editors["string"]=liger.editors["text"];liger.editors["select"]=liger.editors["combobox"];liger.editors["int"]=liger.editors["digits"];liger.editors["float"]=liger.editors["number"];liger.editors["chk"]=liger.editors["checkbox"];liger.editors["popupedit"]=liger.editors["popup"];$.fn.live=$.fn.on?$.fn.on:$.fn.live;if(!$.browser){var userAgent=navigator.userAgent.toLowerCase();$.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)}}})(jQuery);(function($){liger.inject={prev:"liger-",defaults:{Grid_detail:{height:null,onShowDetail:null},Grid_editor:"ComboBox,DateEditor,Spinner,TextBox,PopupEdit,CheckBoxList,RadioList,Grid_editor",Grid_popup:"PopupEdit",Grid_grid:"Grid",Grid_condition:"Form",Grid_toolbar:"Toolbar",Grid_fields:"Form_fields",Form_editor:"ComboBox,DateEditor,Spinner,TextBox,PopupEdit,CheckBoxList,RadioList,Form_editor",Form_grid:"Grid",Form_columns:"Grid_columns",Form_condition:"Form",Form_popup:"PopupEdit",Form_buttons:"Button"},config:{Grid:{dynamics:"data,isChecked,detail,rowDraggingRender,toolbar,columns",arrays:"columns",columns:{dynamics:"render,totalSummary,headerRender,columns,editor,columns",arrays:"columns",textProperty:"display",columns:"liger.inject.config.Grid.columns",editor:{dynamics:"data,columns,render,renderItem,grid,condition,ext",grid:"liger.inject.config.Grid",condition:"liger.inject.config.Form"}},toolbar:{arrays:"items"}},Form:{dynamics:"validate,fields,buttons",arrays:"fields,buttons",fields:{textProperty:"label",dynamics:"validate,editor",editor:{dynamics:"data,columns,render,renderItem,grid,condition,attr",grid:"liger.inject.config.Grid",condition:"liger.inject.config.Form"}},buttons:"liger.inject.config.Button"},PopupEdit:{dynamics:"grid,condition"},Button:{textProperty:"text",dynamics:"click"},ComboBox:{dynamics:"columns,data,tree,grid,condition,render,parms,renderItem"},ListBox:{dynamics:"columns,data,render,parms"},RadioList:{dynamics:"data,parms"},CheckBoxList:{dynamics:"data,parms"}},parse:function(_){try{if(_==null)return null;return new Function("return "+_+";")()}catch($){return null}},parseDefault:function(B){var A=this;if(!B)return B;var _={};$(B.split(",")).each(function(B,C){if(!C)return;C=C.substr(0,1).toUpperCase()+C.substr(1);$.extend(_,A.parse("liger.defaults."+C))});return _},fotmatValue:function($,_){if(_=="boolean")return $=="true"||$=="1";if(_=="number"&&$)return parseFloat($.toString());return $},getOptions:function(B){var F=B.jelement,E=B.defaults,K=B.config;K=$.extend({ignores:"",dynamics:"",arrays:""},K);var A=this,M={},J;if(K.textProperty)M[K.textProperty]=F.text();for(var G in E){var L=G.toLowerCase(),D=$("> ."+L,F);if($.inArray(G,K.ignores.split(","))!=-1)continue;if(D.length){var _=B.controlName+"_"+G,H=A.defaults[_]||liger.defaults[_],C=K[G];if(typeof(H)=="string")H=A.parseDefault(H);else if(typeof(H)=="funcion")H=H();if(typeof(C)=="string")C=A.parse(C);else if(typeof(C)=="funcion")C=C();if(H)if($.inArray(G,K.arrays.split(","))!=-1){J=[];$(">div,>li,>input",D).each(function(){J.push(A.getOptions({defaults:H,controlName:B.controlName,config:C,jelement:$(this)}))});M[G]=J}else M[G]=A.getOptions({defaults:H,controlName:B.controlName,config:C,jelement:D});D.remove()}else if($.inArray(G,K.dynamics.split(","))!=-1||G.indexOf("on")==0){J=A.parse(F.attr("data-"+G)||F.attr(G));if(J)M[G]=A.fotmatValue(J,typeof(E[G]))}else{J=F.attr("data-"+G)||F.attr(G);if(J)M[G]=A.fotmatValue(J,typeof(E[G]))}}var I=F.attr("data-options")||F.attr("data-property");if(I)I=A.parse("{"+I+"}");if(I)$.extend(M,I);return M},init:function(){var B=this,A=this.config;for(var C in B.defaults)if(typeof(B.defaults[C])=="string")B.defaults[C]=B.parseDefault(B.defaults[C]);for(var _ in liger.controls){var D=A[_]||{},E=B.prev+_.toLowerCase();$("."+E).each(function(){var C=$(this),E,A=$.extend({onrender:null,onrendered:null},liger.defaults[_]),F=B.getOptions({defaults:A,controlName:_,config:D,jelement:C});C[liger.pluginPrev+_](F)})}}};$(function(){liger.inject.init()})})(jQuery);(function($){$.fn.ligerAccordion=function(_){return $.ligerui.run.call(this,"ligerAccordion",arguments)};$.fn.ligerGetAccordionManager=function(){return $.ligerui.get(this)};$.ligerDefaults.Accordion={height:null,speed:"normal",changeHeightOnResize:false,heightDiff:0};$.ligerMethos.Accordion={};$.ligerui.controls.Accordion=function(_,A){$.ligerui.controls.Accordion.base.constructor.call(this,_,A)};$.ligerui.controls.Accordion.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"Accordion"},__idPrev:function(){return"Accordion"},_extendMethods:function(){return $.ligerMethos.Accordion},_render:function(){var _=this,B=this.options;_.accordion=$(_.element);if(!_.accordion.hasClass("l-accordion-panel"))_.accordion.addClass("l-accordion-panel");var A=0;if($("> div[lselected=true]",_.accordion).length>0)A=$("> div",_.accordion).index($("> div[lselected=true]",_.accordion));$("> div",_.accordion).each(function(C,_){var B=$("<div class=\"l-accordion-header\"><div class=\"l-accordion-toggle\"></div><div class=\"l-accordion-header-inner\"></div></div>");if(C==A)$(".l-accordion-toggle",B).addClass("l-accordion-toggle-open");if($(_).attr("title")){$(".l-accordion-header-inner",B).html($(_).attr("title"));$(_).attr("title","")}$(_).before(B);if(!$(_).hasClass("l-accordion-content"))$(_).addClass("l-accordion-content")});$(".l-accordion-toggle",_.accordion).each(function(){if(!$(this).hasClass("l-accordion-toggle-open")&&!$(this).hasClass("l-accordion-toggle-close"))$(this).addClass("l-accordion-toggle-close");if($(this).hasClass("l-accordion-toggle-close"))$(this).parent().next(".l-accordion-content:visible").hide()});$(".l-accordion-header",_.accordion).hover(function(){$(this).addClass("l-accordion-header-over")},function(){$(this).removeClass("l-accordion-header-over")});$(".l-accordion-toggle",_.accordion).hover(function(){if($(this).hasClass("l-accordion-toggle-open"))$(this).addClass("l-accordion-toggle-open-over");else if($(this).hasClass("l-accordion-toggle-close"))$(this).addClass("l-accordion-toggle-close-over")},function(){if($(this).hasClass("l-accordion-toggle-open"))$(this).removeClass("l-accordion-toggle-open-over");else if($(this).hasClass("l-accordion-toggle-close"))$(this).removeClass("l-accordion-toggle-close-over")});$(">.l-accordion-header",_.accordion).click(function(){var _=$(".l-accordion-toggle:first",this);if(_.hasClass("l-accordion-toggle-close")){_.removeClass("l-accordion-toggle-close").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over");_.addClass("l-accordion-toggle-open");$(this).next(".l-accordion-content").show(B.speed).siblings(".l-accordion-content:visible").hide(B.speed);$(this).siblings(".l-accordion-header").find(".l-accordion-toggle").removeClass("l-accordion-toggle-open").addClass("l-accordion-toggle-close")}else{_.removeClass("l-accordion-toggle-open").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over").addClass("l-accordion-toggle-close");$(this).next(".l-accordion-content").hide(B.speed)}});_.headerHoldHeight=0;$("> .l-accordion-header",_.accordion).each(function(){_.headerHoldHeight+=$(this).height()});if(B.height&&typeof(B.height)=="string"&&B.height.indexOf("%")>0){_.onResize();if(B.changeHeightOnResize)$(window).resize(function(){_.onResize()})}else if(B.height){_.height=B.heightDiff+B.height;_.accordion.height(_.height);_.setHeight(B.height)}else _.header=_.accordion.height();_.set(B)},onResize:function(){var _=this,A=this.options;if(!A.height||typeof(A.height)!="string"||A.height.indexOf("%")==-1)return false;if(_.accordion.parent()[0].tagName.toLowerCase()=="body"){var B=$(window).height();B-=parseInt(_.layout.parent().css("paddingTop"));B-=parseInt(_.layout.parent().css("paddingBottom"));_.height=A.heightDiff+B*parseFloat(_.height)*0.01}else _.height=A.heightDiff+(_.accordion.parent().height()*parseFloat(A.height)*0.01);_.accordion.height(_.height);_.setContentHeight(_.height-_.headerHoldHeight)},setHeight:function(A){var _=this,B=this.options;_.accordion.height(A);A-=_.headerHoldHeight;$("> .l-accordion-content",_.accordion).height(A)}})})(jQuery);(function($){$.fn.ligerButton=function(_){return $.ligerui.run.call(this,"ligerButton",arguments)};$.fn.ligerGetButtonManager=function(){return $.ligerui.run.call(this,"ligerGetButtonManager",arguments)};$.ligerDefaults.Button={width:60,text:"Button",disabled:false,click:null,icon:null};$.ligerMethos.Button={};$.ligerui.controls.Button=function(_,A){$.ligerui.controls.Button.base.constructor.call(this,_,A)};$.ligerui.controls.Button.ligerExtend($.ligerui.controls.Input,{__getType:function(){return"Button"},__idPrev:function(){return"Button"},_extendMethods:function(){return $.ligerMethos.Button},_render:function(){var _=this,A=this.options;_.button=$(_.element);_.button.addClass("l-button");_.button.append("<div class=\"l-button-l\"></div><div class=\"l-button-r\"></div><span></span>");_.button.hover(function(){if(A.disabled)return;_.button.addClass("l-button-over")},function(){if(A.disabled)return;_.button.removeClass("l-button-over")});A.click&&_.button.click(function(){if(!A.disabled)A.click()});_.set(A)},_setIcon:function(_){var $=this;if(!_){$.button.removeClass("l-button-hasicon");$.button.find("img").remove()}else{$.button.addClass("l-button-hasicon");$.button.append("<img src=\""+_+"\" />")}},_setEnabled:function($){if($)this.button.removeClass("l-button-disabled")},_setDisabled:function($){if($){this.button.addClass("l-button-disabled");this.options.disabled=true}else{this.button.removeClass("l-button-disabled");this.options.disabled=false}},_setWidth:function($){this.button.width($)},_setText:function(_){$("span",this.button).html(_)},setValue:function($){this.set("text",$)},getValue:function(){return this.options.text},setEnabled:function(){this.set("disabled",false)},setDisabled:function(){this.set("disabled",true)}})})(jQuery);(function($){$.fn.ligerCheckBox=function(_){return $.ligerui.run.call(this,"ligerCheckBox",arguments)};$.fn.ligerGetCheckBoxManager=function(){return $.ligerui.run.call(this,"ligerGetCheckBoxManager",arguments)};$.ligerDefaults.CheckBox={disabled:false,readonly:false};$.ligerMethos.CheckBox={};$.ligerui.controls.CheckBox=function(_,A){$.ligerui.controls.CheckBox.base.constructor.call(this,_,A)};$.ligerui.controls.CheckBox.ligerExtend($.ligerui.controls.Input,{__getType:function(){return"CheckBox"},__idPrev:function(){return"CheckBox"},_extendMethods:function(){return $.ligerMethos.CheckBox},_render:function(){var _=this,A=this.options;_.input=$(_.element);_.link=$("<a class=\"l-checkbox\"></a>");_.wrapper=_.input.addClass("l-hidden").wrap("<div class=\"l-checkbox-wrapper\"></div>").parent();_.wrapper.prepend(_.link);_.link.click(function(){if(_.input.attr("disabled")||_.input.attr("readonly"))return false;if(A.disabled||A.readonly)return false;if(_.trigger("beforeClick",[_.element])==false)return false;if($(this).hasClass("l-checkbox-checked"))_._setValue(false);else _._setValue(true);_.input.trigger("change")});_.wrapper.hover(function(){if(!A.disabled)$(this).addClass("l-over")},function(){$(this).removeClass("l-over")});this.set(A);this.updateStyle()},_setCss:function($){this.wrapper.css($)},_setValue:function(A){var $=this,_=this.options;if(!A){$.input[0].checked=false;$.link.removeClass("l-checkbox-checked")}else{$.input[0].checked=true;$.link.addClass("l-checkbox-checked")}},_setDisabled:function($){if($){this.input.attr("disabled",true);this.wrapper.addClass("l-disabled")}else{this.input.attr("disabled",false);this.wrapper.removeClass("l-disabled")}},_getValue:function(){return this.element.checked},updateStyle:function(){if(this.input.attr("disabled")){this.wrapper.addClass("l-disabled");this.options.disabled=true}if(this.input[0].checked)this.link.addClass("l-checkbox-checked");else this.link.removeClass("l-checkbox-checked")}})})(jQuery);(function($){$.fn.ligerCheckBoxList=function(_){return $.ligerui.run.call(this,"ligerCheckBoxList",arguments)};$.ligerDefaults.CheckBoxList={rowSize:3,valueField:"id",textField:"text",valueFieldID:null,name:null,split:";",data:null,parms:null,url:null,onSuccess:null,onError:null,css:null,value:null,valueFieldCssClass:null};$.ligerMethos.CheckBoxList=$.ligerMethos.CheckBoxList||{};$.ligerui.controls.CheckBoxList=function(_,A){$.ligerui.controls.CheckBoxList.base.constructor.call(this,_,A)};$.ligerui.controls.CheckBoxList.ligerExtend($.ligerui.controls.Input,{__getType:function(){return"CheckBoxList"},_extendMethods:function(){return $.ligerMethos.CheckBoxList},_init:function(){$.ligerui.controls.CheckBoxList.base._init.call(this)},_render:function(){var _=this,A=this.options;_.data=A.data;_.valueField=null;if(A.valueFieldID){_.valueField=$("#"+A.valueFieldID+":input,[name="+A.valueFieldID+"]:input");if(_.valueField.length==0)_.valueField=$("<input type=\"hidden\"/>");_.valueField[0].id=_.valueField[0].name=A.valueFieldID}else{_.valueField=$("<input type=\"hidden\"/>");_.valueField[0].id=_.valueField[0].name=_.id+"_val"}if(_.valueField[0].name==null)_.valueField[0].name=_.valueField[0].id;if(A.valueFieldCssClass)_.valueField.addClass(A.valueFieldCssClass);_.valueField.attr("data-ligerid",_.id);_.checkboxList=$(this.element);_.checkboxList.html("<div class=\"l-checkboxlist-inner\"><table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" class=\"l-checkboxlist-table\"></table></div>").addClass("l-checkboxlist").append(_.valueField);_.checkboxList.table=$("table:first",_.checkboxList);_.set(A);_._addClickEven()},destroy:function(){if(this.checkboxList)this.checkboxList.remove();this.options=null;$.ligerui.remove(this)},clear:function(){this._changeValue("");this.trigger("clear")},_setCss:function($){if($)this.checkboxList.addClass($)},_setDisabled:function(_){if(_){this.checkboxList.addClass("l-checkboxlist-disabled");$("input:checkbox",this.radioList).attr("disabled",true)}else{this.checkboxList.removeClass("l-checkboxlist-disabled");$("input:checkbox",this.radioList).removeAttr("disabled")}},_setWidth:function($){this.checkboxList.width($)},_setHeight:function($){this.checkboxList.height($)},indexOf:function(A){var $=this,_=this.options;if(!$.data)return-1;for(var C=0,B=$.data.length;C<B;C++)if(typeof(A)=="object"){if($.data[C]==A)return C}else if($.data[C][_.valueField].toString()==A.toString())return C;return-1},removeItems:function(A){var _=this;if(!_.data)return;$(A).each(function(B,A){var $=_.indexOf(A);if($==-1)return;_.data.splice($,1)});_.refresh()},removeItem:function(_){if(!this.data)return;var $=this.indexOf(_);if($==-1)return;this.data.splice($,1);this.refresh()},insertItem:function(A,_){var $=this;if(!$.data)$.data=[];$.data.splice(_,0,A);$.refresh()},addItems:function(A){var _=this;if(!_.data)_.data=[];$(A).each(function(A,$){_.data.push($)});_.refresh()},addItem:function(_){var $=this;if(!$.data)$.data=[];$.data.push(_);$.refresh()},_setValue:function(A){var $=this,_=this.options;_.value=A;$.valueField.val(_.value);this._dataInit()},setValue:function($){this._setValue($)},_setUrl:function(C){if(!C)return;var _=this,B=this.options,A=$.isFunction(B.parms)?B.parms():B.parms;$.ajax({type:"post",url:C,data:A,cache:false,dataType:"json",success:function($){_.setData($);_.trigger("success",[$])},error:function(A,$){_.trigger("error",[A,$])}})},setUrl:function($){return this._setUrl($)},setParm:function(A,B){if(!A)return;var $=this,_=$.get("parms");if(!_)_={};_[A]=B;$.set("parms",_)},clearContent:function(){var _=this,A=this.options;$("table",_.checkboxList).html("")},_setData:function($){this.setData($)},setData:function(A){var $=this,_=this.options;if(!A||!A.length)return;$.data=A;$.refresh();$.updateStyle()},refresh:function(){var _=this,G=this.options,A=this.data;this.clearContent();if(!A)return;var J=[],I=G.rowSize,E=false,H=G.name||_.id;for(var C=0;C<A.length;C++){var $=A[C][G.valueField],B=A[C][G.textField],D=_.id+"-"+C,F=C%I==0;if(F){if(E)J.push("</tr>");J.push("<tr>");E=true}J.push("<td><input type='checkbox' name='"+H+"' value='"+$+"' id='"+D+"'/><label for='"+D+"'>"+B+"</label></td>")}if(E)J.push("</tr>");_.checkboxList.table.append(J.join(""))},_getValue:function(){var _=this,C=this.options,B=C.name||_.id,A=[];$("input:checkbox[name=\""+B+"\"]:checked").each(function(){A.push(this.value)});if(!A.length)return null;return A.join(C.split)},getValue:function(){return this._getValue()},updateStyle:function(){this._dataInit()},_dataInit:function(){var $=this,_=this.options,A=$.valueField.val();$._changeValue(A)},_changeValue:function(D){var _=this,C=this.options,B=C.name||_.id,A=D?D.split(C.split):[];$("input:checkbox[name='"+B+"']",_.checkboxList).each(function(){this.checked=$.inArray(this.value,A)>-1});_.valueField.val(D);_.selectedValue=D},_addClickEven:function(){var $=this,_=this.options;$.checkboxList.click(function(_){var A=$.getValue();if(A)$.valueField.val(A)})}})})(jQuery);(function($){$.fn.ligerComboBox=function(_){return $.ligerui.run.call(this,"ligerComboBox",arguments)};$.fn.ligerGetComboBoxManager=function(){return $.ligerui.run.call(this,"ligerGetComboBoxManager",arguments)};$.ligerDefaults.ComboBox={resize:true,isMultiSelect:false,isShowCheckBox:false,columns:null,selectBoxWidth:null,selectBoxHeight:null,onBeforeSelect:false,onSelected:null,initValue:null,initText:null,valueField:"id",textField:"text",valueFieldID:null,slide:false,split:";",data:null,tree:null,treeLeafOnly:true,condition:null,grid:null,onStartResize:null,onEndResize:null,hideOnLoseFocus:true,hideGridOnLoseFocus:false,url:null,onSuccess:null,onError:null,onBeforeOpen:null,render:null,absolute:true,cancelable:true,css:null,parms:null,renderItem:null,autocomplete:false,readonly:false,ajaxType:"post",alwayShowInTop:false,valueFieldCssClass:null};$.ligerDefaults.ComboBoxString={Search:"\u641c\u7d22"};$.ligerMethos.ComboBox=$.ligerMethos.ComboBox||{};$.ligerui.controls.ComboBox=function(_,A){$.ligerui.controls.ComboBox.base.constructor.call(this,_,A)};$.ligerui.controls.ComboBox.ligerExtend($.ligerui.controls.Input,{__getType:function(){return"ComboBox"},_extendMethods:function(){return $.ligerMethos.ComboBox},_init:function(){$.ligerui.controls.ComboBox.base._init.call(this);var _=this.options;if(_.columns)_.isShowCheckBox=true;if(_.isMultiSelect)_.isShowCheckBox=true},_render:function(){var _=this,A=this.options;_.data=A.data;_.inputText=null;_.select=null;_.textFieldID="";_.valueFieldID="";_.valueField=null;if(this.element.tagName.toLowerCase()=="input"){this.element.readOnly=true;_.inputText=$(this.element);_.textFieldID=this.element.id}else if(this.element.tagName.toLowerCase()=="select"){$(this.element).hide();_.select=$(this.element);A.isMultiSelect=false;A.isShowCheckBox=false;A.cancelable=false;_.textFieldID=this.element.id+"_txt";_.inputText=$("<input type=\"text\" readonly=\"true\"/>");_.inputText.attr("id",_.textFieldID).insertAfter($(this.element))}if(_.inputText[0].name==undefined)_.inputText[0].name=_.textFieldID;_.valueField=null;if(A.valueFieldID){_.valueField=$("#"+A.valueFieldID+":input,[name="+A.valueFieldID+"]:input").filter("input:hidden");if(_.valueField.length==0)_.valueField=$("<input type=\"hidden\"/>");_.valueField[0].id=_.valueField[0].name=A.valueFieldID}else{_.valueField=$("<input type=\"hidden\"/>");_.valueField[0].id=_.valueField[0].name=_.textFieldID+"_val"}if(A.valueFieldCssClass)_.valueField.addClass(A.valueFieldCssClass);if(_.valueField[0].name==undefined)_.valueField[0].name=_.valueField[0].id;_.valueField.attr("data-ligerid",_.id);_.link=$("<div class=\"l-trigger\"><div class=\"l-trigger-icon\"></div></div>");_.selectBox=$("<div class=\"l-box-select\" style=\"display:none\"><div class=\"l-box-select-inner\"><table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" class=\"l-box-select-table\"></table></div></div>");_.selectBox.table=$("table:first",_.selectBox);_.wrapper=_.inputText.wrap("<div class=\"l-text l-text-combobox\"></div>").parent();_.wrapper.append("<div class=\"l-text-l\"></div><div class=\"l-text-r\"></div>");_.wrapper.append(_.link);_.textwrapper=_.wrapper.wrap("<div class=\"l-text-wrapper\"></div>").parent();if(A.absolute)_.selectBox.appendTo("body").addClass("l-box-select-absolute");else _.textwrapper.append(_.selectBox);_.textwrapper.append(_.valueField);_.inputText.addClass("l-text-field");if(A.isShowCheckBox&&!_.select)$("table",_.selectBox).addClass("l-table-checkbox");else{A.isShowCheckBox=false;$("table",_.selectBox).addClass("l-table-nocheckbox")}_.link.hover(function(){if(A.disabled||A.readonly)return;this.className="l-trigger-hover"},function(){if(A.disabled||A.readonly)return;this.className="l-trigger"}).mousedown(function(){if(A.disabled||A.readonly)return;this.className="l-trigger-pressed"}).mouseup(function(){if(A.disabled||A.readonly)return;this.className="l-trigger-hover"}).click(function(){if(A.disabled||A.readonly)return;if(_.trigger("beforeOpen")==false)return false;_._toggleSelectBox(_.selectBox.is(":visible"))});_.inputText.click(function(){if(A.disabled||A.readonly)return;if(_.trigger("beforeOpen")==false)return false;_._toggleSelectBox(_.selectBox.is(":visible"))}).blur(function(){if(A.disabled)return;_.wrapper.removeClass("l-text-focus")}).focus(function(){if(A.disabled||A.readonly)return;_.wrapper.addClass("l-text-focus")});_.wrapper.hover(function(){if(A.disabled||A.readonly)return;_.wrapper.addClass("l-text-over")},function(){if(A.disabled||A.readonly)return;_.wrapper.removeClass("l-text-over")});_.resizing=false;_.selectBox.hover(null,function($){if(A.hideOnLoseFocus&&_.selectBox.is(":visible")&&!_.boxToggling&&!_.resizing)_._toggleSelectBox(true)});_.bulidContent();_.set(A);if(A.selectBoxWidth)_.selectBox.width(A.selectBoxWidth);else _.selectBox.css("width",_.wrapper.css("width"));if(A.grid)_.bind("show",function(){if(!_.grid){_.setGrid(A.grid);_.set("SelectBoxHeight",A.selectBoxHeight)}});_.updateSelectBoxPosition();$(document).bind("click.combobox",function($){var A=($.target||$.srcElement).tagName.toLowerCase();if(A=="html"||A=="body")_._toggleSelectBox(true)})},destroy:function(){if(this.wrapper)this.wrapper.remove();if(this.selectBox)this.selectBox.remove();this.options=null;$.ligerui.remove(this)},clear:function(){this._changeValue("","");this.trigger("clear")},_setSelectBoxHeight:function(A){if(!A)return;var _=this,B=this.options;if(B.grid)_.grid&&_.grid.set("height",_.getGridHeight(A));else if(!B.table){var C=$("tr",_.selectBox.table).length;if(!B.selectBoxHeight&&C<8)B.selectBoxHeight=C*30;if(B.selectBoxHeight)_.selectBox.height(B.selectBoxHeight)}},_setCss:function($){if($)this.wrapper.addClass($)},_setCancelable:function(B){var _=this,A=this.options;if(!B&&_.unselect){_.unselect.remove();_.unselect=null}if(!B&&!_.unselect)return;_.unselect=$("<div class=\"l-trigger l-trigger-cancel\"><div class=\"l-trigger-icon\"></div></div>").hide();_.wrapper.hover(function(){},function(){_.unselect.hide()});if(!A.disabled&&!A.readonly&&A.cancelable)_.wrapper.append(_.unselect);_.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){_.clear()})},_setDisabled:function($){if($)this.wrapper.addClass("l-text-disabled");else this.wrapper.removeClass("l-text-disabled")},_setReadonly:function($){if($)this.wrapper.addClass("l-text-readonly");else this.wrapper.removeClass("l-text-readonly")},_setLable:function(B){var _=this,A=this.options;if(B){if(_.labelwrapper)_.labelwrapper.find(".l-text-label:first").html(B+":&nbsp");else{_.labelwrapper=_.textwrapper.wrap("<div class=\"l-labeltext\"></div>").parent();_.labelwrapper.prepend("<div class=\"l-text-label\" style=\"float:left;display:inline;\">"+B+":&nbsp</div>");_.textwrapper.css("float","left")}if(!A.labelWidth)A.labelWidth=$(".l-text-label",_.labelwrapper).outerWidth();else $(".l-text-label",_.labelwrapper).outerWidth(A.labelWidth);$(".l-text-label",_.labelwrapper).width(A.labelWidth);$(".l-text-label",_.labelwrapper).height(_.wrapper.height());_.labelwrapper.append("<br style=\"clear:both;\" />");if(A.labelAlign)$(".l-text-label",_.labelwrapper).css("text-align",A.labelAlign);_.textwrapper.css({display:"inline"});_.labelwrapper.width(_.wrapper.outerWidth()+A.labelWidth+2)}},_setWidth:function(A){var $=this,_=this.options;if(A>20){$.wrapper.css({width:A});$.inputText.css({width:A-20});$.textwrapper.css({width:A});if(!_.selectBoxWidth)$.selectBox.css({width:A})}},_setHeight:function(_){var $=this;if(_>10){$.wrapper.height(_);$.inputText.height(_-2);$.textwrapper.css({width:_})}},_setResize:function(B){var _=this,A=this.options;if(A.columns)return;if(B&&$.fn.ligerResizable){_.selectBox.ligerResizable({handles:"se,s,e",onStartResize:function(){_.resizing=true;_.trigger("startResize")},onEndResize:function(){_.resizing=false;if(_.trigger("endResize")==false)return false},onStopResize:function(A,$){if(_.grid){if(A.newWidth)_.selectBox.width(A.newWidth);if(A.newHeight)_.set({selectBoxHeight:A.newHeight});_.grid.refreshSize();_.trigger("endResize");return false}return true}});_.selectBox.append("<div class='l-btn-nw-drop'></div>")}},findTextByValue:function(D){var A=this,C=this.options;if(D==null)return"";var _="",B=function($){var _=D.toString().split(C.split);for(var A=0;A<_.length;A++)if(_[A]==$)return true;return false};$(A.data).each(function(E,A){var $=A[C.valueField],D=A[C.textField];if(B($))_+=D+C.split});if(_.length>0)_=_.substr(0,_.length-1);return _},findValueByText:function(A){var _=this,D=this.options;if(!A&&A=="")return"";var C=function($){var _=A.toString().split(D.split);for(var B=0;B<_.length;B++)if(_[B]==$)return true;return false},B="";$(_.data).each(function(E,_){var $=_[D.valueField],A=_[D.textField];if(C(A))B+=$+D.split});if(B.length>0)B=B.substr(0,B.length-1);return B},removeItem:function(){},insertItem:function(){},addItem:function(){},_setValue:function(D,A){var _=this,C=this.options;A=_.findTextByValue(D);if(C.tree)_.selectValueByTree(D);else if(!C.isMultiSelect){_._changeValue(D,A);$("tr[value='"+D+"'] td",_.selectBox).addClass("l-selected");$("tr[value!='"+D+"'] td",_.selectBox).removeClass("l-selected")}else{_._changeValue(D,A);if(D!=null){var B=D.toString().split(C.split);$("table.l-table-checkbox :checkbox",_.selectBox).each(function(){this.checked=false});for(var E=0;E<B.length;E++)$("table.l-table-checkbox tr[value="+B[E]+"] :checkbox",_.selectBox).each(function(){this.checked=true})}}},selectValue:function($){this._setValue($)},bulidContent:function(){var $=this,_=this.options;this.clearContent();if($.select)$.setSelect();else if(_.tree)$.setTree(_.tree)},reload:function(){var $=this,_=this.options;if(_.url)$.set("url",_.url);else if($.grid)$.grid.reload()},_setUrl:function(C){if(!C)return;var _=this,B=this.options,A=$.isFunction(B.parms)?B.parms():B.parms;$.ajax({type:B.ajaxType,url:C,data:A,cache:false,dataType:"json",success:function($){_.setData($);_.trigger("success",[$])},error:function(A,$){_.trigger("error",[A,$])}})},setUrl:function($){return this._setUrl($)},setParm:function(A,B){if(!A)return;var $=this,_=$.get("parms");if(!_)_={};_[A]=B;$.set("parms",_)},clearContent:function(){var _=this,A=this.options;$("table",_.selectBox).html("")},setSelect:function(){var _=this,A=this.options;this.clearContent();$("option",_.select).each(function(D){var A=$(this).val(),C=$(this).html(),B=$("<tr><td index='"+D+"' value='"+A+"' text='"+C+"'>"+C+"</td>");$("table.l-table-nocheckbox",_.selectBox).append(B);$("td",B).hover(function(){$(this).addClass("l-over")},function(){$(this).removeClass("l-over")})});$("td:eq("+_.select[0].selectedIndex+")",_.selectBox).each(function(){if($(this).hasClass("l-selected")){_.selectBox.hide();return}$(".l-selected",_.selectBox).removeClass("l-selected");$(this).addClass("l-selected");if(_.select[0].selectedIndex!=$(this).attr("index")&&_.select[0].onchange){_.select[0].selectedIndex=$(this).attr("index");_.select[0].onchange()}var D=parseInt($(this).attr("index"));_.select[0].selectedIndex=D;_.select.trigger("change");_.selectBox.hide();var C=$(this).attr("value"),B=$(this).html();if(A.render)_.inputText.val(A.render(C,B));else _.inputText.val(B)});_._addClickEven()},_setData:function($){this.setData($)},setData:function(F){var B=this,E=this.options;if(!F||!F.length)return;if(B.data!=F)B.data=F;this.clearContent();if(E.columns){B.selectBox.table.headrow=$("<tr class='l-table-headerow'><td width='18px'></td></tr>");B.selectBox.table.append(B.selectBox.table.headrow);B.selectBox.table.addClass("l-box-select-grid");for(var G=0;G<E.columns.length;G++){var C=$("<td columnindex='"+G+"' columnname='"+E.columns[G].name+"'>"+E.columns[G].header+"</td>");if(E.columns[G].width)C.width(E.columns[G].width);B.selectBox.table.headrow.append(C)}}var J=[];for(var I=0;I<F.length;I++){var _=F[I][E.valueField],H=F[I][E.textField];if(!E.columns){J.push("<tr value='"+_+"'>");if(E.isShowCheckBox)J.push("<td style='width:18px;'  index='"+I+"' value='"+_+"' text='"+H+"' ><input type='checkbox' /></td>");var A=H;if(E.renderItem)A=E.renderItem.call(B,{data:F[I],value:_,text:H,key:B.inputText.val()});else if(E.autocomplete)A=B._highLight(H,B.inputText.val());J.push("<td index='"+I+"' value='"+_+"' text='"+H+"' align='left'>"+A+"</td></tr>")}else{J.push("<tr value='"+_+"'><td style='width:18px;'  index='"+I+"' value='"+_+"' text='"+H+"' ><input type='checkbox' /></td>");for(G=0;G<E.columns.length;G++){var D=E.columns[G].name;J.push("<td>"+F[I][D]+"</td>")}J.push("</tr>")}}if(!E.columns){if(E.isShowCheckBox)$("table.l-table-checkbox",B.selectBox).append(J.join(""));else $("table.l-table-nocheckbox",B.selectBox).append(J.join(""))}else B.selectBox.table.append(J.join(""));if(E.isShowCheckBox&&$.fn.ligerCheckBox)$("table input:checkbox",B.selectBox).ligerCheckBox();$(".l-table-checkbox input:checkbox",B.selectBox).change(function(){if(this.checked&&B.hasBind("beforeSelect")){var _=null;if($(this).parent().get(0).tagName.toLowerCase()=="div")_=$(this).parent().parent();else _=$(this).parent();if(_!=null&&B.trigger("beforeSelect",[_.attr("value"),_.attr("text")])==false){B.selectBox.slideToggle("fast");return false}}if(!E.isMultiSelect)if(this.checked){$("input:checked",B.selectBox).not(this).each(function(){this.checked=false;$(".l-checkbox-checked",$(this).parent()).removeClass("l-checkbox-checked")});B.selectBox.slideToggle("fast")}B._checkboxUpdateValue()});$("table.l-table-nocheckbox td",B.selectBox).hover(function(){$(this).addClass("l-over")},function(){$(this).removeClass("l-over")});B._addClickEven();if(!E.autocomplete)B.updateStyle()},setTree:function(A){var _=this,B=this.options;this.clearContent();_.selectBox.table.remove();if(A.checkbox!=false)A.onCheck=function(){var C=_.treeManager.getChecked(),D=[],A=[];$(C).each(function(_,$){if(B.treeLeafOnly&&$.data.children)return;D.push($.data[B.valueField]);A.push($.data[B.textField])});_._changeValue(D.join(B.split),A.join(B.split))};else{A.onSelect=function(A){if(_.trigger("BeforeSelect"[A])==false)return;if(B.treeLeafOnly&&A.data.children)return;var C=A.data[B.valueField],$=A.data[B.textField];_._changeValue(C,$)};A.onCancelSelect=function($){_._changeValue("","")}}A.onAfterAppend=function(A,C){if(!_.treeManager)return;var $=null;if(B.initValue)$=B.initValue;else if(_.valueField.val()!="")$=_.valueField.val();_.selectValueByTree($)};_.tree=$("<ul></ul>");$("div:first",_.selectBox).append(_.tree);_.tree.ligerTree(A);_.treeManager=_.tree.ligerGetTreeManager()},selectValueByTree:function(D){var _=this,C=this.options;if(D!=null){var A="",B=D.toString().split(C.split);$(B).each(function(D,$){_.treeManager.selectNode($.toString());A+=_.treeManager.getTextByID($);if(D<B.length-1)A+=C.split});_._changeValue(D,A)}},setGrid:function(K){var A=this,J=this.options;if(A.grid)return;J.hideOnLoseFocus=J.hideGridOnLoseFocus?true:false;this.clearContent();A.selectBox.addClass("l-box-select-lookup");A.selectBox.table.remove();var _=$("div:first",A.selectBox),G=$("<div></div>").appendTo(_),D=$("<div></div>").appendTo(_);A.conditionPanel=G;if(J.condition){var B=$.extend({labelWidth:60,space:20},J.condition);A.condition=G.ligerForm(B)}else G.remove();K=$.extend({columnWidth:120,alternatingRow:false,frozen:true,rownumbers:true,allowUnSelectRow:true},K,{width:"100%",height:A.getGridHeight(),inWindow:false,parms:J.parms,isChecked:function(B){var _=A.getValue();if(!_)return false;if(!J.valueField||!B[J.valueField])return false;return $.inArray(B[J.valueField].toString(),_.split(J.split))!=-1}});A.grid=A.gridManager=D.ligerGrid(K);A.grid.bind("afterShowData",function(){A.updateSelectBoxPosition()});var E=[],I=function(){var B=[],_=[];$(E).each(function(A,$){B.push($[J.valueField]);_.push($[J.textField])});if(K.checkbox)A.selected=E;else if(E.length)A.selected=E[0];else A.selected=null;A._changeValue(B.join(J.split),_.join(J.split));A.trigger("gridSelect",{value:B.join(J.split),text:_.join(J.split),data:E})},H=function($){for(var _=E.length-1;_>=0;_--)if(E[_][J.valueField]==$[J.valueField])E.splice(_,1)},F=function($){for(var _=E.length-1;_>=0;_--)if(E[_][J.valueField]==$[J.valueField])return;E.push($)};if(K.checkbox){var C=function(_,$){_&&F($);!_&&H($)};A.grid.bind("CheckAllRow",function(_){$(A.grid.rows).each(function($){C(_,$)});I()});A.grid.bind("CheckRow",function(_,$){C(_,$);I()})}else{A.grid.bind("SelectRow",function($){E=[$];I();A._toggleSelectBox(true)});A.grid.bind("UnSelectRow",function(){E=[];I()})}A.bind("show",function(){A.grid.refreshSize()});A.bind("clear",function(){E=[];A.grid.selecteds=[];A.grid._showData()});if(J.condition){var M=$("<li style=\"margin-right:9px\"><div></div></li>"),L=$("<li style=\"margin-right:9px;float:right\"><div></div></li>");$("ul:first",G).append(M).append(L).after("<div class=\"l-clear\"></div>");$("div",M).ligerButton({text:J.Search,width:40,click:function(){var _=A.condition.toConditions();A.grid.setParm(K.conditionParmName||"condition",$.ligerui.toJSON(_));A.grid.reload()}});$("div",L).ligerButton({text:"\u5173\u95ed",width:40,click:function(){A.selectBox.hide()}})}A.grid.refreshSize()},getGridHeight:function(_){var $=this,A=this.options;_=_||$.selectBox.height();_-=$.conditionPanel.height();return _},_getValue:function(){return $(this.valueField).val()},getValue:function(){return this._getValue()},getSelected:function(){return this.selected},getText:function(){return this.inputText.val()},setText:function($){this.inputText.val($)},updateStyle:function(){var $=this,_=this.options;_.initValue=$._getValue();$._dataInit()},_dataInit:function(){var _=this,B=this.options,C=null;if(B.initValue!=null&&B.initText!=null)_._changeValue(B.initValue,B.initText);if(B.initValue!=null){C=B.initValue;if(B.tree){if(C)_.selectValueByTree(C)}else if(_.data){var A=_.findTextByValue(C);_._changeValue(C,A)}}else if(_.valueField.val()!=""){C=_.valueField.val();if(B.tree){if(C)_.selectValueByTree(C)}else if(_.data){A=_.findTextByValue(C);_._changeValue(C,A)}}if(!B.isShowCheckBox)$("table tr",_.selectBox).find("td:first").each(function(){if(C!=null&&C==$(this).attr("value"))$(this).addClass("l-selected");else $(this).removeClass("l-selected")});else $(":checkbox",_.selectBox).each(function(){var D=null,_=$(this);if(_.parent().get(0).tagName.toLowerCase()=="div")D=_.parent().parent();else D=_.parent();if(D==null)return;$(".l-checkbox",D).removeClass("l-checkbox-checked");_[0].checked=false;var A=(C||"").toString().split(B.split);$(A).each(function(B,A){if(C!=null&&A==D.attr("value")){$(".l-checkbox",D).addClass("l-checkbox-checked");_[0].checked=true}})})},_changeValue:function(_,A){var $=this,B=this.options;$.valueField.val(_);if(B&&B.render)$.inputText.val(B.render(_,A));else $.inputText.val(A);$.selectedValue=_;$.selectedText=A;$.inputText.trigger("change").focus();$.trigger("selected",[_,A])},_checkboxUpdateValue:function(){var _=this,A=this.options,B="",C="";$("input:checked",_.selectBox).each(function(){var _=null;if($(this).parent().get(0).tagName.toLowerCase()=="div")_=$(this).parent().parent();else _=$(this).parent();if(!_)return;B+=_.attr("value")+A.split;C+=_.attr("text")+A.split});if(B.length>0)B=B.substr(0,B.length-1);if(C.length>0)C=C.substr(0,C.length-1);_._changeValue(B,C)},_addClickEven:function(){var _=this,A=this.options;$(".l-table-nocheckbox td",_.selectBox).click(function(){var D=$(this).attr("value"),C=parseInt($(this).attr("index")),B=$(this).attr("text");if(_.hasBind("beforeSelect")&&_.trigger("beforeSelect",[D,B])==false){if(A.slide)_.selectBox.slideToggle("fast");else _.selectBox.hide();return false}if($(this).hasClass("l-selected")){if(A.slide)_.selectBox.slideToggle("fast");else _.selectBox.hide();return}$(".l-selected",_.selectBox).removeClass("l-selected");$(this).addClass("l-selected");if(_.select)if(_.select[0].selectedIndex!=C){_.select[0].selectedIndex=C;_.select.trigger("change")}if(A.slide){_.boxToggling=true;_.selectBox.hide("fast",function(){_.boxToggling=false})}else _.selectBox.hide();_._changeValue(D,B)})},updateSelectBoxPosition:function(){var _=this,D=this.options;if(D&&D.absolute){var C=$(document).height();if(D.alwayShowInTop||Number(_.wrapper.offset().top+1+_.wrapper.outerHeight()+_.selectBox.height())>C&&C>Number(_.selectBox.height()+1))_.selectBox.css({left:_.wrapper.offset().left,top:_.wrapper.offset().top-1-_.selectBox.height()});else _.selectBox.css({left:_.wrapper.offset().left,top:_.wrapper.offset().top+1+_.wrapper.outerHeight()})}else{var B=_.wrapper.offset().top-$(window).scrollTop(),A=_.selectBox.height()+textHeight+4;if(B+A>$(window).height()&&B>A)_.selectBox.css("marginTop",-1*(_.selectBox.height()+textHeight+5))}},_toggleSelectBox:function(D){var A=this,B=this.options,_=A.wrapper.height();A.boxToggling=true;if(D){if(B.slide)A.selectBox.slideToggle("fast",function(){A.boxToggling=false});else{A.selectBox.hide();A.boxToggling=false}}else{A.updateSelectBoxPosition();if(B.slide)A.selectBox.slideToggle("fast",function(){A.boxToggling=false;if(!B.isShowCheckBox&&$("td.l-selected",A.selectBox).length>0){var _=($("td.l-selected",A.selectBox).offset().top-A.selectBox.offset().top);$(".l-box-select-inner",A.selectBox).animate({scrollTop:_})}});else{A.selectBox.show();A.boxToggling=false;if(!A.tree&&!A.grid&&!B.isShowCheckBox&&$("td.l-selected",A.selectBox).length>0){var C=($("td.l-selected",A.selectBox).offset().top-A.selectBox.offset().top);$(".l-box-select-inner",A.selectBox).animate({scrollTop:C})}}}A.isShowed=A.selectBox.is(":visible");A.trigger("toggle",[D]);A.trigger(D?"hide":"show")},_highLight:function(_,A){var $=_.indexOf(A);if($==-1)return _;return _.substring(0,$)+"<span class='l-highLight'>"+A+"</span>"+_.substring(A.length+$)},_setAutocomplete:function(B){var $=this,A=this.options;if(!B)return;$.inputText.removeAttr("readonly");var _=$.inputText.val();$.inputText.keyup(function(){setTimeout(function(){if(_==$.inputText.val())return;A.initValue="";$.valueField.val("");if(A.url){$.setParm("key",$.inputText.val());$.set("url",A.url);$.selectBox.show()}else if(A.grid){$.grid.setParm("key",$.inputText.val());$.grid.reload()}_=$.inputText.val()},1)})}});$.ligerui.controls.ComboBox.prototype.setValue=$.ligerui.controls.ComboBox.prototype.selectValue;$.ligerui.controls.ComboBox.prototype.setInputValue=$.ligerui.controls.ComboBox.prototype._changeValue})(jQuery);(function($){$.fn.ligerDateEditor=function(){return $.ligerui.run.call(this,"ligerDateEditor",arguments)};$.fn.ligerGetDateEditorManager=function(){return $.ligerui.run.call(this,"ligerGetDateEditorManager",arguments)};$.ligerDefaults.DateEditor={format:"yyyy-MM-dd hh:mm",showTime:false,onChangeDate:false,absolute:true,cancelable:true,readonly:false};$.ligerDefaults.DateEditorString={dayMessage:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],monthMessage:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],todayMessage:"\u4eca\u5929",closeMessage:"\u5173\u95ed"};$.ligerMethos.DateEditor={};$.ligerui.controls.DateEditor=function(_,A){$.ligerui.controls.DateEditor.base.constructor.call(this,_,A)};$.ligerui.controls.DateEditor.ligerExtend($.ligerui.controls.Input,{__getType:function(){return"DateEditor"},__idPrev:function(){return"DateEditor"},_extendMethods:function(){return $.ligerMethos.DateEditor},_render:function(){var _=this,B=this.options;if(!B.showTime&&B.format.indexOf(" hh:mm")>-1)B.format=B.format.replace(" hh:mm","");if(this.element.tagName.toLowerCase()!="input"||this.element.type!="text")return;_.inputText=$(this.element);if(!_.inputText.hasClass("l-text-field"))_.inputText.addClass("l-text-field");_.link=$("<div class=\"l-trigger\"><div class=\"l-trigger-icon\"></div></div>");_.text=_.inputText.wrap("<div class=\"l-text l-text-date\"></div>").parent();_.text.append("<div class=\"l-text-l\"></div><div class=\"l-text-r\"></div>");_.text.append(_.link);_.textwrapper=_.text.wrap("<div class=\"l-text-wrapper\"></div>").parent();var C="";C+="<div class='l-box-dateeditor' style='display:none'>";C+="    <div class='l-box-dateeditor-header'>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevyear'><span></span></div>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevmonth'><span></span></div>";C+="        <div class='l-box-dateeditor-header-text'><a class='l-box-dateeditor-header-month'></a> , <a  class='l-box-dateeditor-header-year'></a></div>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextmonth'><span></span></div>";C+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextyear'><span></span></div>";C+="    </div>";C+="    <div class='l-box-dateeditor-body'>";C+="        <table cellpadding='0' cellspacing='0' border='0' class='l-box-dateeditor-calendar'>";C+="            <thead>";C+="                <tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>";C+="            </thead>";C+="            <tbody>";C+="                <tr class='l-first'><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>";C+="            </tbody>";C+="        </table>";C+="        <ul class='l-box-dateeditor-monthselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="        <ul class='l-box-dateeditor-yearselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="        <ul class='l-box-dateeditor-hourselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="        <ul class='l-box-dateeditor-minuteselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";C+="    </div>";C+="    <div class='l-box-dateeditor-toolbar'>";C+="        <div class='l-box-dateeditor-time'></div>";C+="        <div class='l-button l-button-today'></div>";C+="        <div class='l-button l-button-close'></div>";C+="        <div class='l-clear'></div>";C+="    </div>";C+="</div>";_.dateeditor=$(C);if(B.absolute)_.dateeditor.appendTo("body").addClass("l-box-dateeditor-absolute");else _.textwrapper.append(_.dateeditor);_.header=$(".l-box-dateeditor-header",_.dateeditor);_.body=$(".l-box-dateeditor-body",_.dateeditor);_.toolbar=$(".l-box-dateeditor-toolbar",_.dateeditor);_.body.thead=$("thead",_.body);_.body.tbody=$("tbody",_.body);_.body.monthselector=$(".l-box-dateeditor-monthselector",_.body);_.body.yearselector=$(".l-box-dateeditor-yearselector",_.body);_.body.hourselector=$(".l-box-dateeditor-hourselector",_.body);_.body.minuteselector=$(".l-box-dateeditor-minuteselector",_.body);_.toolbar.time=$(".l-box-dateeditor-time",_.toolbar);_.toolbar.time.hour=$("<a></a>");_.toolbar.time.minute=$("<a></a>");_.buttons={btnPrevYear:$(".l-box-dateeditor-header-prevyear",_.header),btnNextYear:$(".l-box-dateeditor-header-nextyear",_.header),btnPrevMonth:$(".l-box-dateeditor-header-prevmonth",_.header),btnNextMonth:$(".l-box-dateeditor-header-nextmonth",_.header),btnYear:$(".l-box-dateeditor-header-year",_.header),btnMonth:$(".l-box-dateeditor-header-month",_.header),btnToday:$(".l-button-today",_.toolbar),btnClose:$(".l-button-close",_.toolbar)};var A=new Date();_.now={year:A.getFullYear(),month:A.getMonth()+1,day:A.getDay(),date:A.getDate(),hour:A.getHours(),minute:A.getMinutes()};_.currentDate={year:A.getFullYear(),month:A.getMonth()+1,day:A.getDay(),date:A.getDate(),hour:A.getHours(),minute:A.getMinutes()};_.selectedDate=null;_.usedDate=null;$("td",_.body.thead).each(function(A,_){$(_).html(B.dayMessage[A])});$("li",_.body.monthselector).each(function(A,_){$(_).html(B.monthMessage[A])});_.buttons.btnToday.html(B.todayMessage);_.buttons.btnClose.html(B.closeMessage);if(B.showTime){_.toolbar.time.show();_.toolbar.time.append(_.toolbar.time.hour).append(":").append(_.toolbar.time.minute);$("li",_.body.hourselector).each(function(B,A){var _=B;if(B<10)_="0"+B.toString();$(this).html(_)});$("li",_.body.minuteselector).each(function(B,A){var _=B;if(B<10)_="0"+B.toString();$(this).html(_)})}_.bulidContent();if(B.initValue)_.inputText.val(B.initValue);if(_.inputText.val()!="")_.onTextChange();_.dateeditor.hover(null,function($){if(_.dateeditor.is(":visible")&&!_.editorToggling)_.toggleDateEditor(true)});_.link.hover(function(){if(B.disabled)return;this.className="l-trigger-hover"},function(){if(B.disabled)return;this.className="l-trigger"}).mousedown(function(){if(B.disabled)return;this.className="l-trigger-pressed"}).mouseup(function(){if(B.disabled)return;this.className="l-trigger-hover"}).click(function(){if(B.disabled)return;_.bulidContent();_.toggleDateEditor(_.dateeditor.is(":visible"))});if(B.disabled){_.inputText.attr("readonly","readonly");_.text.addClass("l-text-disabled")}_.buttons.btnClose.click(function(){_.toggleDateEditor(true)});$("td",_.body.tbody).hover(function(){if($(this).hasClass("l-box-dateeditor-today"))return;$(this).addClass("l-box-dateeditor-over")},function(){$(this).removeClass("l-box-dateeditor-over")}).click(function(){$(".l-box-dateeditor-selected",_.body.tbody).removeClass("l-box-dateeditor-selected");if(!$(this).hasClass("l-box-dateeditor-today"))$(this).addClass("l-box-dateeditor-selected");_.currentDate.date=parseInt($(this).html());_.currentDate.day=new Date(_.currentDate.year,_.currentDate.month-1,1).getDay();if($(this).hasClass("l-box-dateeditor-out"))if($("tr",_.body.tbody).index($(this).parent())==0){if(--_.currentDate.month==0){_.currentDate.month=12;_.currentDate.year--}}else if(++_.currentDate.month==13){_.currentDate.month=1;_.currentDate.year++}_.selectedDate={year:_.currentDate.year,month:_.currentDate.month,date:_.currentDate.date};_.showDate();_.editorToggling=true;_.dateeditor.slideToggle("fast",function(){_.editorToggling=false})});$(".l-box-dateeditor-header-btn",_.header).hover(function(){$(this).addClass("l-box-dateeditor-header-btn-over")},function(){$(this).removeClass("l-box-dateeditor-header-btn-over")});_.buttons.btnYear.click(function(){if(!_.body.yearselector.is(":visible"))$("li",_.body.yearselector).each(function(C,B){var A=_.currentDate.year+(C-4);if(A==_.currentDate.year)$(this).addClass("l-selected");else $(this).removeClass("l-selected");$(this).html(A)});_.body.yearselector.slideToggle()});_.body.yearselector.hover(function(){},function(){$(this).slideUp()});$("li",_.body.yearselector).click(function(){_.currentDate.year=parseInt($(this).html());_.body.yearselector.slideToggle();_.bulidContent()});_.buttons.btnMonth.click(function(){$("li",_.body.monthselector).each(function(B,A){if(_.currentDate.month==B+1)$(this).addClass("l-selected");else $(this).removeClass("l-selected")});_.body.monthselector.slideToggle()});_.body.monthselector.hover(function(){},function(){$(this).slideUp("fast")});$("li",_.body.monthselector).click(function(){var A=$("li",_.body.monthselector).index(this);_.currentDate.month=A+1;_.body.monthselector.slideToggle();_.bulidContent()});_.toolbar.time.hour.click(function(){$("li",_.body.hourselector).each(function(B,A){if(_.currentDate.hour==B)$(this).addClass("l-selected");else $(this).removeClass("l-selected")});_.body.hourselector.slideToggle()});_.body.hourselector.hover(function(){},function(){$(this).slideUp("fast")});$("li",_.body.hourselector).click(function(){var A=$("li",_.body.hourselector).index(this);_.currentDate.hour=A;_.body.hourselector.slideToggle();_.bulidContent();_.showDate()});_.toolbar.time.minute.click(function(){$("li",_.body.minuteselector).each(function(B,A){if(_.currentDate.minute==B)$(this).addClass("l-selected");else $(this).removeClass("l-selected")});_.body.minuteselector.slideToggle("fast",function(){var _=$("li",this).index($("li.l-selected",this));if(_>29){var A=($("li.l-selected",this).offset().top-$(this).offset().top);$(this).animate({scrollTop:A})}})});_.body.minuteselector.hover(function(){},function(){$(this).slideUp("fast")});$("li",_.body.minuteselector).click(function(){var A=$("li",_.body.minuteselector).index(this);_.currentDate.minute=A;_.body.minuteselector.slideToggle("fast");_.bulidContent();_.showDate()});_.buttons.btnPrevMonth.click(function(){if(--_.currentDate.month==0){_.currentDate.month=12;_.currentDate.year--}_.bulidContent()});_.buttons.btnNextMonth.click(function(){if(++_.currentDate.month==13){_.currentDate.month=1;_.currentDate.year++}_.bulidContent()});_.buttons.btnPrevYear.click(function(){_.currentDate.year--;_.bulidContent()});_.buttons.btnNextYear.click(function(){_.currentDate.year++;_.bulidContent()});_.buttons.btnToday.click(function(){_.currentDate={year:_.now.year,month:_.now.month,day:_.now.day,date:_.now.date};_.selectedDate={year:_.now.year,month:_.now.month,day:_.now.day,date:_.now.date};_.showDate();_.dateeditor.slideToggle("fast")});_.inputText.change(function(){_.onTextChange()}).blur(function(){_.text.removeClass("l-text-focus")}).focus(function(){_.text.addClass("l-text-focus")});_.text.hover(function(){_.text.addClass("l-text-over")},function(){_.text.removeClass("l-text-over")});if(B.label){_.labelwrapper=_.textwrapper.wrap("<div class=\"l-labeltext\"></div>").parent();_.labelwrapper.prepend("<div class=\"l-text-label\" style=\"float:left;display:inline;\">"+B.label+":&nbsp</div>");_.textwrapper.css("float","left");if(!B.labelWidth)B.labelWidth=$(".l-text-label",_.labelwrapper).outerWidth();else $(".l-text-label",_.labelwrapper).outerWidth(B.labelWidth);$(".l-text-label",_.labelwrapper).width(B.labelWidth);$(".l-text-label",_.labelwrapper).height(_.text.height());_.labelwrapper.append("<br style=\"clear:both;\" />");if(B.labelAlign)$(".l-text-label",_.labelwrapper).css("text-align",B.labelAlign);_.textwrapper.css({display:"inline"});_.labelwrapper.width(_.text.outerWidth()+B.labelWidth+2)}_.set(B)},destroy:function(){if(this.textwrapper)this.textwrapper.remove();if(this.dateeditor)this.dateeditor.remove();this.options=null;$.ligerui.remove(this)},bulidContent:function(){var _=this,C=this.options,E=new Date(_.currentDate.year,_.currentDate.month-1,1).getDay(),B=_.currentDate.month,F=_.currentDate.year;if(++B==13){B=1;F++}var D=new Date(F,B-1,0).getDate(),A=new Date(_.currentDate.year,_.currentDate.month-1,0).getDate();_.buttons.btnMonth.html(C.monthMessage[_.currentDate.month-1]);_.buttons.btnYear.html(_.currentDate.year);_.toolbar.time.hour.html(_.currentDate.hour);_.toolbar.time.minute.html(_.currentDate.minute);if(_.toolbar.time.hour.html().length==1)_.toolbar.time.hour.html("0"+_.toolbar.time.hour.html());if(_.toolbar.time.minute.html().length==1)_.toolbar.time.minute.html("0"+_.toolbar.time.minute.html());$("td",this.body.tbody).each(function(){this.className=""});$("tr",this.body.tbody).each(function(C,B){$("td",B).each(function(H,G){var B=C*7+(H-E),F=B+1;if(_.selectedDate&&_.currentDate.year==_.selectedDate.year&&_.currentDate.month==_.selectedDate.month&&B+1==_.selectedDate.date){if(H==0||H==6)$(G).addClass("l-box-dateeditor-holiday");$(G).addClass("l-box-dateeditor-selected");$(G).siblings().removeClass("l-box-dateeditor-selected")}else if(_.currentDate.year==_.now.year&&_.currentDate.month==_.now.month&&B+1==_.now.date){if(H==0||H==6)$(G).addClass("l-box-dateeditor-holiday");$(G).addClass("l-box-dateeditor-today")}else if(B<0){F=A+F;$(G).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")}else if(B>D-1){F=F-D;$(G).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")}else if(H==0||H==6)$(G).addClass("l-box-dateeditor-holiday").removeClass("l-box-dateeditor-selected");else G.className="";$(G).html(F)})})},updateSelectBoxPosition:function(){var _=this,B=this.options;if(B.absolute){var A=$(document).height();if(Number(_.text.offset().top+1+_.text.outerHeight()+_.dateeditor.height())>A&&A>Number(_.dateeditor.height()+1))_.dateeditor.css({left:_.text.offset().left,top:_.text.offset().top-1-_.dateeditor.height()});else _.dateeditor.css({left:_.text.offset().left,top:_.text.offset().top+1+_.text.outerHeight()})}else if(_.text.offset().top+4>_.dateeditor.height()&&_.text.offset().top+_.dateeditor.height()+textHeight+4-$(window).scrollTop()>$(window).height()){_.dateeditor.css("marginTop",-1*(_.dateeditor.height()+textHeight+5));_.showOnTop=true}else _.showOnTop=false},toggleDateEditor:function(B){var _=this,A=this.options,$=_.text.height();_.editorToggling=true;if(B)_.dateeditor.hide("fast",function(){_.editorToggling=false});else{_.updateSelectBoxPosition();_.dateeditor.slideDown("fast",function(){_.editorToggling=false})}},showDate:function(){var $=this,A=this.options;if(!this.currentDate)return;this.currentDate.hour=parseInt($.toolbar.time.hour.html(),10);this.currentDate.minute=parseInt($.toolbar.time.minute.html(),10);var B=this.currentDate.year+"/"+this.currentDate.month+"/"+this.currentDate.date+" "+this.currentDate.hour+":"+this.currentDate.minute,_=new Date(B);B=$.getFormatDate(_);this.inputText.val(B);this.onTextChange()},isDateTime:function(C){var $=this,B=this.options,A=C.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(A==null)return false;var _=new Date(A[1],A[3]-1,A[4]);if(_=="NaN")return false;return(_.getFullYear()==A[1]&&(_.getMonth()+1)==A[3]&&_.getDate()==A[4])},isLongDateTime:function(D){var $=this,C=this.options,B=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/,A=D.match(B);if(A==null)return false;var _=new Date(A[1],A[3]-1,A[4],A[5],A[6]);if(_=="NaN")return false;return(_.getFullYear()==A[1]&&(_.getMonth()+1)==A[3]&&_.getDate()==A[4]&&_.getHours()==A[5]&&_.getMinutes()==A[6])},getFormatDate:function(C){var $=this,_=this.options;if(C=="NaN")return null;var B=_.format,A={"M+":C.getMonth()+1,"d+":C.getDate(),"h+":C.getHours(),"m+":C.getMinutes(),"s+":C.getSeconds(),"q+":Math.floor((C.getMonth()+3)/3),"S":C.getMilliseconds()};if(/(y+)/.test(B))B=B.replace(RegExp.$1,(C.getFullYear()+"").substr(4-RegExp.$1.length));for(var D in A)if(new RegExp("("+D+")").test(B))B=B.replace(RegExp.$1,RegExp.$1.length==1?A[D]:("00"+A[D]).substr((""+A[D]).length));return B},clear:function(){this.set("value","");this.usedDate=null},_setCancelable:function(B){var _=this,A=this.options;if(!B&&_.unselect){_.unselect.remove();_.unselect=null}if(!B&&!_.unselect)return;_.unselect=$("<div class=\"l-trigger l-trigger-cancel\"><div class=\"l-trigger-icon\"></div></div>").hide();_.text.hover(function(){_.unselect.show()},function(){_.unselect.hide()});if(!A.disabled&&A.cancelable)_.text.append(_.unselect);_.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){if(A.readonly)return;_.clear()})},_rever:function(){var $=this,_=this.options;if(!$.usedDate)$.inputText.val("");else $.inputText.val($.getFormatDate($.usedDate))},_getMatch:function(F){var D=[-1,-1,-1,-1,-1,-1],_=0,G="^",B=F||this.options.format;while(true){var H=B.match(/^yyyy|MM|dd|mm|hh|HH|ss|-|\/|:|\s/);if(H){var C=H[0].charAt(0),$=H[0].length,A="yMdhms".indexOf(C);if(A!=-1){D[A]=_+1;G+="(\\d{1,"+$+"})"}else{var E=C==" "?"\\s":C;G+="("+E+")"}_++;if($==B.length){G+="$";break}B=B.substring($)}else return null}return{reg:new RegExp(G),position:D}},_bulidDate:function(E){var $=this,D=this.options,C=this._getMatch();if(!C)return null;var A=E.match(C.reg);if(!A)return null;var B={y:C.position[0]==-1?1900:A[C.position[0]],M:C.position[1]==-1?0:parseInt(A[C.position[1]],10)-1,d:C.position[2]==-1?1:parseInt(A[C.position[2]],10),h:C.position[3]==-1?0:parseInt(A[C.position[3]],10),m:C.position[4]==-1?0:parseInt(A[C.position[4]],10),s:C.position[5]==-1?0:parseInt(A[C.position[5]],10)};if(B.M<0||B.M>11||B.d<0||B.d>31)return null;var _=new Date(B.y,B.M,B.d);if(D.showTime){if(B.m<0||B.m>59||B.h<0||B.h>23||B.s<0||B.s>59)return null;_.setHours(B.h);_.setMinutes(B.m);_.setSeconds(B.s)}return _},updateStyle:function(){this.onTextChange()},onTextChange:function(){var B=this,D=this.options,A=B.inputText.val();if(!A){B.selectedDate=null;return true}var C=B._bulidDate(A);if(!C){B._rever();return}else B.usedDate=C;B.selectedDate={year:B.usedDate.getFullYear(),month:B.usedDate.getMonth()+1,day:B.usedDate.getDay(),date:B.usedDate.getDate(),hour:B.usedDate.getHours(),minute:B.usedDate.getMinutes()};B.currentDate={year:B.usedDate.getFullYear(),month:B.usedDate.getMonth()+1,day:B.usedDate.getDay(),date:B.usedDate.getDate(),hour:B.usedDate.getHours(),minute:B.usedDate.getMinutes()};var _=B.getFormatDate(C);B.inputText.val(_);B.trigger("changeDate",[_]);if($(B.dateeditor).is(":visible"))B.bulidContent()},_setHeight:function(_){var $=this;if(_>4){$.text.css({height:_});$.inputText.css({height:_});$.textwrapper.css({height:_})}},_setWidth:function(_){var $=this;if(_>20){$.text.css({width:_});$.inputText.css({width:_-20});$.textwrapper.css({width:_})}},_setValue:function(value){var g=this;if(!value)g.inputText.val("");if(typeof value=="string")if(/^\/Date/.test(value)){value=value.replace(/^\//,"new ").replace(/\/$/,"");eval("value = "+value)}else g.inputText.val(value);if(typeof value=="object")if(value instanceof Date){g.inputText.val(g.getFormatDate(value));g.onTextChange()}},_getValue:function(){return this.usedDate},setEnabled:function(){var $=this,_=this.options;this.inputText.removeAttr("readonly");this.text.removeClass("l-text-disabled");_.disabled=false},setDisabled:function(){var $=this,_=this.options;this.inputText.attr("readonly","readonly");this.text.addClass("l-text-disabled");_.disabled=true}})})(jQuery);(function($){var _=$.ligerui;$(".l-dialog-btn").live("mouseover",function(){$(this).addClass("l-dialog-btn-over")}).live("mouseout",function(){$(this).removeClass("l-dialog-btn-over")});$(".l-dialog-tc .l-dialog-close").live("mouseover",function(){$(this).addClass("l-dialog-close-over")}).live("mouseout",function(){$(this).removeClass("l-dialog-close-over")});$.ligerDialog=function(){return _.run.call(null,"ligerDialog",arguments,{isStatic:true})};$.ligerui.DialogImagePath="../../lib/ligerUI/skins/Aqua/images/win/";function A(A){for(var B in A)$("<img />").attr("src",_.DialogImagePath+A[B])}$.ligerDefaults.Dialog={cls:null,id:null,buttons:null,isDrag:true,width:280,height:null,content:"",target:null,url:null,load:false,type:"none",left:null,top:null,modal:true,name:null,isResize:false,allowClose:true,opener:null,timeParmName:null,closeWhenEnter:null,isHidden:true,show:true,title:"\u63d0\u793a",showMax:false,showToggle:false,showMin:false,slide:$.browser.msie?false:true,fixedType:null,showType:null,onLoaded:null,onExtend:null,onExtended:null,onCollapse:null,onCollapseed:null,onContentHeightChange:null,onClose:null,onClosed:null,onStopResize:null};$.ligerDefaults.DialogString={titleMessage:"\u63d0\u793a",ok:"\u786e\u5b9a",yes:"\u662f",no:"\u5426",cancel:"\u53d6\u6d88",waittingMessage:"\u6b63\u5728\u7b49\u5f85\u4e2d,\u8bf7\u7a0d\u5019..."};$.ligerMethos.Dialog=$.ligerMethos.Dialog||{};_.controls.Dialog=function($){_.controls.Dialog.base.constructor.call(this,null,$)};_.controls.Dialog.ligerExtend(_.core.Win,{__getType:function(){return"Dialog"},__idPrev:function(){return"Dialog"},_extendMethods:function(){return $.ligerMethos.Dialog},_render:function(){var A=this,C=this.options,G="";A.set(C,true);var F=$("<div class=\"l-dialog\"><table class=\"l-dialog-table\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tbody><tr><td class=\"l-dialog-tl\"></td><td class=\"l-dialog-tc\"><div class=\"l-dialog-tc-inner\"><div class=\"l-dialog-icon\"></div><div class=\"l-dialog-title\"></div><div class=\"l-dialog-winbtns\"><div class=\"l-dialog-winbtn l-dialog-close\"></div></div></div></td><td class=\"l-dialog-tr\"></td></tr><tr><td class=\"l-dialog-cl\"></td><td class=\"l-dialog-cc\"><div class=\"l-dialog-body\"><div class=\"l-dialog-image\"></div> <div class=\"l-dialog-content\"></div><div class=\"l-dialog-buttons\"><div class=\"l-dialog-buttons-inner\"></div></td><td class=\"l-dialog-cr\"></td></tr><tr><td class=\"l-dialog-bl\"></td><td class=\"l-dialog-bc\"></td><td class=\"l-dialog-br\"></td></tr></tbody></table></div>");$("body").append(F);A.dialog=F;A.element=F[0];A.dialog.body=$(".l-dialog-body:first",A.dialog);A.dialog.header=$(".l-dialog-tc-inner:first",A.dialog);A.dialog.winbtns=$(".l-dialog-winbtns:first",A.dialog.header);A.dialog.buttons=$(".l-dialog-buttons:first",A.dialog);A.dialog.content=$(".l-dialog-content:first",A.dialog);A.set(C,false);if(C.allowClose==false)$(".l-dialog-close",A.dialog).remove();if(C.target||C.url||C.type=="none"){C.type=null;A.dialog.addClass("l-dialog-win")}if(C.cls)A.dialog.addClass(C.cls);if(C.id)A.dialog.attr("id",C.id);A.mask();if(C.isDrag)A._applyDrag();if(C.isResize)A._applyResize();if(C.type)A._setImage();else{$(".l-dialog-image",A.dialog).remove();A.dialog.content.addClass("l-dialog-content-noimage")}if(!C.show){A.unmask();A.dialog.hide()}if(C.target){A.dialog.content.prepend(C.target);$(C.target).show()}else if(C.url){if(C.timeParmName){C.url+=C.url.indexOf("?")==-1?"?":"&";C.url+=C.timeParmName+"="+new Date().getTime()}if(C.load)A.dialog.body.load(C.url,function(){A._saveStatus();A.trigger("loaded")});else{A.jiframe=$("<iframe frameborder='0'></iframe>");var E=C.name?C.name:"ligerwindow"+new Date().getTime();A.jiframe.attr("name",E);A.jiframe.attr("id",E);A.dialog.content.prepend(A.jiframe);A.dialog.content.addClass("l-dialog-content-nopadding");setTimeout(function(){A.jiframe.attr("src",C.url);A.frame=window.frames[A.jiframe.attr("name")]},0);G="jquery_ligerui_"+new Date().getTime();A.tmpInput=$("<input></input>");A.tmpInput.attr("id",G);A.dialog.content.prepend(A.tmpInput)}}if(C.opener)A.dialog.opener=C.opener;if(C.buttons)$(C.buttons).each(function(C,B){var _=$("<div class=\"l-dialog-btn\"><div class=\"l-dialog-btn-l\"></div><div class=\"l-dialog-btn-r\"></div><div class=\"l-dialog-btn-inner\"></div></div>");$(".l-dialog-btn-inner",_).html(B.text);$(".l-dialog-buttons-inner",A.dialog.buttons).prepend(_);B.width&&_.width(B.width);B.onclick&&_.click(function(){B.onclick(B,A,C)})});else A.dialog.buttons.remove();$(".l-dialog-buttons-inner",A.dialog.buttons).append("<div class='l-clear'></div>");$(".l-dialog-title",A.dialog).bind("selectstart",function(){return false});A.dialog.click(function(){_.win.setFront(A)});$(".l-dialog-tc .l-dialog-close",A.dialog).click(function(){if(C.isHidden)A.hide();else A.close()});if(!C.fixedType){var D=0,H=0,B=C.width||A.dialog.width();if(C.slide==true)C.slide="fast";if(C.left!=null)D=C.left;else C.left=D=0.5*($(window).width()-B);if(C.top!=null)H=C.top;else C.top=H=0.5*($(window).height()-A.dialog.height())+$(window).scrollTop()-10;if(D<0)C.left=D=0;if(H<0)C.top=H=0;A.dialog.css({left:D,top:H})}A.show();$("body").bind("keydown.dialog",function($){var _=$.which;if(_==13)A.enter();else if(_==27)A.esc()});A._updateBtnsWidth();A._saveStatus();A._onReisze();if(G!=""){$("#"+G).focus();$("#"+G).remove()}},_borderX:12,_borderY:32,doMax:function(F){var A=this,D=this.options,C=$(window).width(),B=$(window).height(),E=0,G=0;if(_.win.taskbar){B-=_.win.taskbar.outerHeight();if(_.win.top)G+=_.win.taskbar.outerHeight()}if(F){A.dialog.body.animate({width:C-A._borderX},D.slide);A.dialog.animate({left:E,top:G},D.slide);A.dialog.content.animate({height:B-A._borderY-A.dialog.buttons.outerHeight()},D.slide,function(){A._onReisze()})}else{A.set({width:C,height:B,left:E,top:G});A._onReisze()}},max:function(){var _=this,A=this.options;if(_.winmax){_.winmax.addClass("l-dialog-recover");_.doMax(A.slide);if(_.wintoggle)if(_.wintoggle.hasClass("l-dialog-extend"))_.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-extend-disabled");else _.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-collapse-disabled");if(_.resizable)_.resizable.set({disabled:true});if(_.draggable)_.draggable.set({disabled:true});_.maximum=true;$(window).bind("resize.dialogmax",function(){_.doMax(false)})}},recover:function(){var _=this,A=this.options;if(_.winmax){_.winmax.removeClass("l-dialog-recover");if(A.slide){_.dialog.body.animate({width:_._width-_._borderX},A.slide);_.dialog.animate({left:_._left,top:_._top},A.slide);_.dialog.content.animate({height:_._height-_._borderY-_.dialog.buttons.outerHeight()},A.slide,function(){_._onReisze()})}else{_.set({width:_._width,height:_._height,left:_._left,top:_._top});_._onReisze()}if(_.wintoggle)_.wintoggle.removeClass("l-dialog-toggle-disabled l-dialog-extend-disabled l-dialog-collapse-disabled");$(window).unbind("resize.dialogmax")}if(this.resizable)this.resizable.set({disabled:false});if(_.draggable)_.draggable.set({disabled:false});_.maximum=false},min:function(){var $=this,B=this.options,A=_.win.getTask(this);if(B.slide){$.dialog.body.animate({width:1},B.slide);A.y=A.offset().top+A.height();A.x=A.offset().left+A.width()/2;$.dialog.animate({left:A.x,top:A.y},B.slide,function(){$.dialog.hide()})}else $.dialog.hide();$.unmask();$.minimize=true;$.actived=false},active:function(){var A=this,D=this.options;if(A.minimize){var C=A._width,B=A._height,E=A._left,F=A._top;if(A.maximum){C=$(window).width();B=$(window).height();E=F=0;if(_.win.taskbar){B-=_.win.taskbar.outerHeight();if(_.win.top)F+=_.win.taskbar.outerHeight()}}if(D.slide){A.dialog.body.animate({width:C-A._borderX},D.slide);A.dialog.animate({left:E,top:F},D.slide)}else A.set({width:C,height:B,left:E,top:F})}A.actived=true;A.minimize=false;_.win.setFront(A);A.show()},toggle:function(){var $=this,_=this.options;if(!$.wintoggle)return;if($.wintoggle.hasClass("l-dialog-extend"))$.extend();else $.collapse()},collapse:function(){var $=this,_=this.options;if(!$.wintoggle)return;if(_.slide)$.dialog.content.animate({height:1},_.slide);else $.dialog.content.height(1);if(this.resizable)this.resizable.set({disabled:true})},extend:function(){var $=this,A=this.options;if(!$.wintoggle)return;var _=$._height-$._borderY-$.dialog.buttons.outerHeight();if(A.slide)$.dialog.content.animate({height:_},A.slide);else $.dialog.content.height(_);if(this.resizable)this.resizable.set({disabled:false})},_updateBtnsWidth:function(){var _=this,A=$(">div",_.dialog.winbtns).length;_.dialog.winbtns.width(22*A)},_setLeft:function($){if(!this.dialog)return;if($!=null)this.dialog.css({left:$})},_setTop:function($){if(!this.dialog)return;if($!=null)this.dialog.css({top:$})},_setWidth:function($){if(!this.dialog)return;if($>=this._borderX)this.dialog.body.width($-this._borderX)},_setHeight:function(B){var $=this,A=this.options;if(!this.dialog)return;if(B>=this._borderY){var _=B-this._borderY-$.dialog.buttons.outerHeight();if($.trigger("ContentHeightChange",[_])==false)return;$.dialog.content.height(_);$.trigger("ContentHeightChanged",[_])}},_setShowMax:function(B){var _=this,A=this.options;if(B){if(!_.winmax)_.winmax=$("<div class=\"l-dialog-winbtn l-dialog-max\"></div>").appendTo(_.dialog.winbtns).hover(function(){if($(this).hasClass("l-dialog-recover"))$(this).addClass("l-dialog-recover-over");else $(this).addClass("l-dialog-max-over")},function(){$(this).removeClass("l-dialog-max-over l-dialog-recover-over")}).click(function(){if($(this).hasClass("l-dialog-recover"))_.recover();else _.max()})}else if(_.winmax){_.winmax.remove();_.winmax=null}_._updateBtnsWidth()},_setShowMin:function(C){var A=this,B=this.options;if(C){if(!A.winmin){A.winmin=$("<div class=\"l-dialog-winbtn l-dialog-min\"></div>").appendTo(A.dialog.winbtns).hover(function(){$(this).addClass("l-dialog-min-over")},function(){$(this).removeClass("l-dialog-min-over")}).click(function(){A.min()});_.win.addTask(A)}}else if(A.winmin){A.winmin.remove();A.winmin=null}A._updateBtnsWidth()},_setShowToggle:function(B){var _=this,A=this.options;if(B){if(!_.wintoggle)_.wintoggle=$("<div class=\"l-dialog-winbtn l-dialog-collapse\"></div>").appendTo(_.dialog.winbtns).hover(function(){if($(this).hasClass("l-dialog-toggle-disabled"))return;if($(this).hasClass("l-dialog-extend"))$(this).addClass("l-dialog-extend-over");else $(this).addClass("l-dialog-collapse-over")},function(){$(this).removeClass("l-dialog-extend-over l-dialog-collapse-over")}).click(function(){if($(this).hasClass("l-dialog-toggle-disabled"))return;if(_.wintoggle.hasClass("l-dialog-extend")){if(_.trigger("extend")==false)return;_.wintoggle.removeClass("l-dialog-extend");_.extend();_.trigger("extended")}else{if(_.trigger("collapse")==false)return;_.wintoggle.addClass("l-dialog-extend");_.collapse();_.trigger("collapseed")}})}else if(_.wintoggle){_.wintoggle.remove();_.wintoggle=null}},enter:function(){var $=this,_=this.options,A;if(_.closeWhenEnter!=undefined)A=_.closeWhenEnter;else if(_.type=="warn"||_.type=="error"||_.type=="success"||_.type=="question")A=true;if(A)$.close()},esc:function(){},_removeDialog:function(){var _=this,B=this.options;if(B.showType&&B.fixedType)_.dialog.animate({bottom:-1*B.height},function(){A()});else A();function A(){var A=$("iframe",_.dialog);if(A.length){var B=A[0];B.src="about:blank";B.contentWindow.document.write("");$.browser.msie&&CollectGarbage();A.remove()}_.dialog.remove()}},close:function(){var $=this,_=this.options;if($.trigger("Close")==false)return;$.doClose();if($.trigger("Closed")==false)return},doClose:function(){var A=this;_.win.removeTask(this);A.unmask();A._removeDialog();$("body").unbind("keydown.dialog")},_getVisible:function(){return this.dialog.is(":visible")},_setUrl:function(A){var $=this,_=this.options;_.url=A;if(_.load)$.dialog.body.html("").load(_.url,function(){$.trigger("loaded")});else if($.jiframe)$.jiframe.attr("src",_.url)},_setContent:function($){this.dialog.content.html($)},_setTitle:function(B){var _=this,A=this.options;if(B)$(".l-dialog-title",_.dialog).html(B)},_hideDialog:function(){var $=this,_=this.options;if(_.showType&&_.fixedType)$.dialog.animate({bottom:-1*_.height},function(){$.dialog.hide()});else $.dialog.hide()},hidden:function(){var $=this;_.win.removeTask($);$.dialog.hide();$.unmask()},show:function(){var _=this,A=this.options;_.mask();if(A.fixedType){if(A.showType){_.dialog.css({bottom:-1*A.height}).addClass("l-dialog-fixed");_.dialog.show().animate({bottom:0})}else _.dialog.show().css({bottom:0})}else _.dialog.show();$.ligerui.win.setFront.ligerDefer($.ligerui.win,100,[_])},setUrl:function($){this._setUrl($)},_saveStatus:function(){var $=this;$._width=$.dialog.body.width();$._height=$.dialog.body.height();var A=0,_=0;if(!isNaN(parseInt($.dialog.css("top"))))A=parseInt($.dialog.css("top"));if(!isNaN(parseInt($.dialog.css("left"))))_=parseInt($.dialog.css("left"));$._top=A;$._left=_},_applyDrag:function(){var A=this,B=this.options;if($.fn.ligerDrag)A.draggable=A.dialog.ligerDrag({handler:".l-dialog-title",animate:false,onStartDrag:function(){_.win.setFront(A);var B=$("<div class='l-dragging-mask' style='display:block'></div>").height(A.dialog.height());A.dialog.append(B);A.dialog.content.addClass("l-dialog-content-dragging")},onDrag:function(_,$){var A=$.pageY||$.screenY;if(A<0)return false},onStopDrag:function(){A.dialog.find("div.l-dragging-mask:first").remove();A.dialog.content.removeClass("l-dialog-content-dragging");if(B.target){var C=_.find($.ligerui.controls.DateEditor),D=_.find($.ligerui.controls.ComboBox);$($.merge(C,D)).each(function(){if(this.updateSelectBoxPosition)this.updateSelectBoxPosition()})}A._saveStatus()}})},_onReisze:function(){var _=this,C=this.options;if(C.target){var B=$(C.target).liger();if(!B)B=$(C.target).find(":first").liger();if(!B)return;var A=_.dialog.content.height(),D=_.dialog.content.width();B.trigger("resize",[{width:D,height:A}])}},_applyResize:function(){var _=this,A=this.options;if($.fn.ligerResizable)_.resizable=_.dialog.ligerResizable({onStopResize:function(A,$){var C=0,B=0;if(!isNaN(parseInt(_.dialog.css("top"))))C=parseInt(_.dialog.css("top"));if(!isNaN(parseInt(_.dialog.css("left"))))B=parseInt(_.dialog.css("left"));if(A.diffLeft)_.set({left:B+A.diffLeft});if(A.diffTop)_.set({top:C+A.diffTop});if(A.newWidth){_.set({width:A.newWidth});_.dialog.body.css({width:A.newWidth-_._borderX})}if(A.newHeight)_.set({height:A.newHeight});_._onReisze();_._saveStatus();_.trigger("stopResize");return false},animate:false})},_setImage:function(){var _=this,A=this.options;if(A.type)if(A.type=="success"||A.type=="donne"||A.type=="ok"){$(".l-dialog-image",_.dialog).addClass("l-dialog-image-donne").show();_.dialog.content.css({paddingLeft:64,paddingBottom:30})}else if(A.type=="error"){$(".l-dialog-image",_.dialog).addClass("l-dialog-image-error").show();_.dialog.content.css({paddingLeft:64,paddingBottom:30})}else if(A.type=="warn"){$(".l-dialog-image",_.dialog).addClass("l-dialog-image-warn").show();_.dialog.content.css({paddingLeft:64,paddingBottom:30})}else if(A.type=="question"){$(".l-dialog-image",_.dialog).addClass("l-dialog-image-question").show();_.dialog.content.css({paddingLeft:64,paddingBottom:40})}}});_.controls.Dialog.prototype.hide=_.controls.Dialog.prototype.hidden;$.ligerDialog.open=function(_){return $.ligerDialog(_)};$.ligerDialog.close=function(){var A=_.find(_.controls.Dialog.prototype.__getType());for(var B in A){var $=A[B];$.destroy.ligerDefer($,5)}_.win.unmask()};$.ligerDialog.show=function(A){var B=_.find(_.controls.Dialog.prototype.__getType());if(B.length)for(var C in B){B[C].show();return}return $.ligerDialog(A)};$.ligerDialog.hide=function(){var A=_.find(_.controls.Dialog.prototype.__getType());for(var B in A){var $=A[B];$.hide()}};$.ligerDialog.tip=function(_){_=$.extend({showType:"slide",width:240,modal:false,height:100},_||{});$.extend(_,{fixedType:"se",type:"none",isDrag:false,isResize:false,showMax:false,showToggle:false,showMin:false});return $.ligerDialog.open(_)};$.ligerDialog.alert=function(_,A,D,B){_=_||"";if(typeof(A)=="function"){B=A;D=null}else if(typeof(D)=="function")B=D;var C=function(_,A,$){A.close();if(B)B(_,A,$)};p={content:_,buttons:[{text:$.ligerDefaults.DialogString.ok,onclick:C}]};if(typeof(A)=="string"&&A!="")p.title=A;if(typeof(D)=="string"&&D!="")p.type=D;$.extend(p,{showMax:false,showToggle:false,showMin:false});return $.ligerDialog(p)};$.ligerDialog.confirm=function(_,A,B){if(typeof(A)=="function"){B=A;type=null}var C=function($,_){_.close();if(B)B($.type=="ok")};p={type:"question",content:_,buttons:[{text:$.ligerDefaults.DialogString.yes,onclick:C,type:"ok"},{text:$.ligerDefaults.DialogString.no,onclick:C,type:"no"}]};if(typeof(A)=="string"&&A!="")p.title=A;$.extend(p,{showMax:false,showToggle:false,showMin:false});return $.ligerDialog(p)};$.ligerDialog.warning=function(_,A,B){if(typeof(A)=="function"){B=A;type=null}var C=function($,_){_.close();if(B)B($.type)};p={type:"question",content:_,buttons:[{text:$.ligerDefaults.DialogString.yes,onclick:C,type:"yes"},{text:$.ligerDefaults.DialogString.no,onclick:C,type:"no"},{text:$.ligerDefaults.DialogString.cancel,onclick:C,type:"cancel"}]};if(typeof(A)=="string"&&A!="")p.title=A;$.extend(p,{showMax:false,showToggle:false,showMin:false});return $.ligerDialog(p)};$.ligerDialog.waitting=function(_){_=_||$.ligerDefaults.Dialog.waittingMessage;return $.ligerDialog.open({cls:"l-dialog-waittingdialog",type:"none",content:"<div style=\"padding:4px\">"+_+"</div>",allowClose:false})};$.ligerDialog.closeWaitting=function(){var A=_.find(_.controls.Dialog);for(var B in A){var $=A[B];if($.dialog.hasClass("l-dialog-waittingdialog"))$.close()}};$.ligerDialog.success=function(_,A,B){return $.ligerDialog.alert(_,A,"success",B)};$.ligerDialog.error=function(_,A,B){return $.ligerDialog.alert(_,A,"error",B)};$.ligerDialog.warn=function(_,A,B){return $.ligerDialog.alert(_,A,"warn",B)};$.ligerDialog.question=function(_,A){return $.ligerDialog.alert(_,A,"question")};$.ligerDialog.prompt=function(_,D,C,B){var A=$("<input type=\"text\" class=\"l-dialog-inputtext\"/>");if(typeof(C)=="function")B=C;if(typeof(D)=="function")B=D;else if(typeof(D)=="boolean")C=D;if(typeof(C)=="boolean"&&C)A=$("<textarea class=\"l-dialog-textarea\"></textarea>");if(typeof(D)=="string"||typeof(D)=="int")A.val(D);var E=function(_,C,$){C.close();if(B)B(_.type=="yes",A.val())};p={title:_,target:A,width:320,buttons:[{text:$.ligerDefaults.DialogString.ok,onclick:E,type:"yes"},{text:$.ligerDefaults.DialogString.cancel,onclick:E,type:"cancel"}]};return $.ligerDialog(p)}})(jQuery);(function($){var _=$.ligerui;$.fn.ligerDrag=function($){return _.run.call(this,"ligerDrag",arguments,{idAttrName:"ligeruidragid",hasElement:false,propertyToElemnt:"target"})};$.fn.ligerGetDragManager=function(){return _.run.call(this,"ligerGetDragManager",arguments,{idAttrName:"ligeruidragid",hasElement:false,propertyToElemnt:"target"})};$.ligerDefaults.Drag={onStartDrag:false,onDrag:false,onStopDrag:false,handler:null,proxy:true,revert:false,animate:true,onRevert:null,onEndRevert:null,receive:null,onDragEnter:null,onDragOver:null,onDragLeave:null,onDrop:null,disabled:false,proxyX:null,proxyY:null};_.controls.Drag=function($){_.controls.Drag.base.constructor.call(this,null,$)};_.controls.Drag.ligerExtend(_.core.UIComponent,{__getType:function(){return"Drag"},__idPrev:function(){return"Drag"},_render:function(){var $=this,_=this.options;this.set(_);$.cursor="move";$.handler.css("cursor",$.cursor);$.handler.bind("mousedown.drag",function(A){if(_.disabled)return;if(A.button==2)return;$._start.call($,A)}).bind("mousemove.drag",function(){if(_.disabled)return;$.handler.css("cursor",$.cursor)})},_rendered:function(){this.options.target.ligeruidragid=this.id},_start:function(B){var A=this,C=this.options;if(A.reverting)return;if(C.disabled)return;A.current={target:A.target,left:A.target.offset().left,top:A.target.offset().top,startX:B.pageX||B.screenX,startY:B.pageY||B.clientY};if(A.trigger("startDrag",[A.current,B])==false)return false;A.cursor="move";A._createProxy(C.proxy,B);if(C.proxy&&!A.proxy)return false;(A.proxy||A.handler).css("cursor",A.cursor);$(document).bind("selectstart.drag",function(){return false});$(document).bind("mousemove.drag",function(){A._drag.apply(A,arguments)});_.draggable.dragging=true;$(document).bind("mouseup.drag",function(){_.draggable.dragging=false;A._stop.apply(A,arguments)})},_drag:function(A){var _=this,B=this.options;if(!_.current)return;var C=A.pageX||A.screenX,D=A.pageY||A.screenY;_.current.diffX=C-_.current.startX;_.current.diffY=D-_.current.startY;(_.proxy||_.handler).css("cursor",_.cursor);if(_.receive)_.receive.each(function(G,B){var E=$(B),F=E.offset();if(C>F.left&&C<F.left+E.width()&&D>F.top&&D<F.top+E.height()){if(!_.receiveEntered[G]){_.receiveEntered[G]=true;_.trigger("dragEnter",[B,_.proxy||_.target,A])}else _.trigger("dragOver",[B,_.proxy||_.target,A])}else if(_.receiveEntered[G]){_.receiveEntered[G]=false;_.trigger("dragLeave",[B,_.proxy||_.target,A])}});if(_.hasBind("drag")){if(_.trigger("drag",[_.current,A])!=false)_._applyDrag();else if(_.proxy)_._removeProxy();else _._stop()}else _._applyDrag()},_stop:function(A){var _=this,B=this.options;$(document).unbind("mousemove.drag");$(document).unbind("mouseup.drag");$(document).unbind("selectstart.drag");if(_.receive)_.receive.each(function(B,$){if(_.receiveEntered[B])_.trigger("drop",[$,_.proxy||_.target,A])});if(_.proxy)if(B.revert){if(_.hasBind("revert")){if(_.trigger("revert",[_.current,A])!=false)_._revert(A);else _._removeProxy()}else _._revert(A)}else{_._applyDrag(_.target);_._removeProxy()}_.cursor="move";_.trigger("stopDrag",[_.current,A]);_.current=null;_.handler.css("cursor",_.cursor)},_revert:function(_){var $=this;$.reverting=true;$.proxy.animate({left:$.current.left,top:$.current.top},function(){$.reverting=false;$._removeProxy();$.trigger("endRevert",[$.current,_]);$.current=null})},_applyDrag:function(C){var $=this,_=this.options;C=C||$.proxy||$.target;var A={},D=false,B=C==$.target;if($.current.diffX){if(B||_.proxyX==null)A.left=$.current.left+$.current.diffX;else A.left=$.current.startX+_.proxyX+$.current.diffX;D=true}if($.current.diffY){if(B||_.proxyY==null)A.top=$.current.top+$.current.diffY;else A.top=$.current.startY+_.proxyY+$.current.diffY;D=true}if(C==$.target&&$.proxy&&_.animate){$.reverting=true;C.animate(A,function(){$.reverting=false})}else C.css(A)},_setReceive:function(_){this.receiveEntered={};if(!_)return;if(typeof _=="string")this.receive=$(_);else this.receive=_},_setHandler:function(B){var _=this,A=this.options;if(!B)_.handler=$(A.target);else _.handler=(typeof B=="string"?$(B,A.target):B)},_setTarget:function(_){this.target=$(_)},_setCursor:function($){this.cursor=$;(this.proxy||this.handler).css("cursor",$)},_createProxy:function(C,A){if(!C)return;var _=this,B=this.options;if(typeof C=="function")_.proxy=C.call(this.options.target,_,A);else if(C=="clone"){_.proxy=_.target.clone().css("position","absolute");_.proxy.appendTo("body")}else{_.proxy=$("<div class='l-draggable'></div>");_.proxy.width(_.target.width()).height(_.target.height());_.proxy.attr("dragid",_.id).appendTo("body")}_.proxy.css({left:B.proxyX==null?_.current.left:_.current.startX+B.proxyX,top:B.proxyY==null?_.current.top:_.current.startY+B.proxyY}).show()},_removeProxy:function(){var $=this;if($.proxy){$.proxy.remove();$.proxy=null}}})})(jQuery);(function($){$.fn.ligerEasyTab=function(){return $.ligerui.run.call(this,"ligerEasyTab",arguments)};$.fn.ligerGetEasyTabManager=function(){return $.ligerui.run.call(this,"ligerGetEasyTabManager",arguments)};$.ligerDefaults.EasyTab={};$.ligerMethos.EasyTab={};$.ligerui.controls.EasyTab=function(_,A){$.ligerui.controls.EasyTab.base.constructor.call(this,_,A)};$.ligerui.controls.EasyTab.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"EasyTab"},__idPrev:function(){return"EasyTab"},_extendMethods:function(){return $.ligerMethos.EasyTab},_render:function(){var _=this,B=this.options;_.tabs=$(this.element);_.tabs.addClass("l-easytab");var A=0;if($("> div[lselected=true]",_.tabs).length>0)A=$("> div",_.tabs).index($("> div[lselected=true]",_.tabs));_.tabs.ul=$("<ul class=\"l-easytab-header\"></ul>");$("> div",_.tabs).each(function(D,C){var B=$("<li><span></span></li>");if(D==A)$("span",B).addClass("l-selected");if($(C).attr("title"))$("span",B).html($(C).attr("title"));_.tabs.ul.append(B);if(!$(C).hasClass("l-easytab-panelbox"))$(C).addClass("l-easytab-panelbox")});_.tabs.ul.prependTo(_.tabs);$(".l-easytab-panelbox:eq("+A+")",_.tabs).show().siblings(".l-easytab-panelbox").hide();$("> ul:first span",_.tabs).click(function(){if($(this).hasClass("l-selected"))return;var A=$("> ul:first span",_.tabs).index(this);$(this).addClass("l-selected").parent().siblings().find("span.l-selected").removeClass("l-selected");$(".l-easytab-panelbox:eq("+A+")",_.tabs).show().siblings(".l-easytab-panelbox").hide()}).not("l-selected").hover(function(){$(this).addClass("l-over")},function(){$(this).removeClass("l-over")});_.set(B)}})})(jQuery);(function($){$.fn.ligerFilter=function(){return $.ligerui.run.call(this,"ligerFilter",arguments)};$.fn.ligerGetFilterManager=function(){return $.ligerui.run.call(this,"ligerGetFilterManager",arguments)};$.ligerDefaults.Filter={fields:[],operators:{},editors:{}};$.ligerDefaults.FilterString={strings:{"and":"\u5e76\u4e14","or":"\u6216\u8005","equal":"\u76f8\u7b49","notequal":"\u4e0d\u76f8\u7b49","startwith":"\u4ee5..\u5f00\u59cb","endwith":"\u4ee5..\u7ed3\u675f","like":"\u76f8\u4f3c","greater":"\u5927\u4e8e","greaterorequal":"\u5927\u4e8e\u6216\u7b49\u4e8e","less":"\u5c0f\u4e8e","lessorequal":"\u5c0f\u4e8e\u6216\u7b49\u4e8e","in":"\u5305\u62ec\u5728...","notin":"\u4e0d\u5305\u62ec...","addgroup":"\u589e\u52a0\u5206\u7ec4","addrule":"\u589e\u52a0\u6761\u4ef6","deletegroup":"\u5220\u9664\u5206\u7ec4"}};$.ligerDefaults.Filter.operators["string"]=$.ligerDefaults.Filter.operators["text"]=["equal","notequal","startwith","endwith","like","greater","greaterorequal","less","lessorequal","in","notin"];$.ligerDefaults.Filter.operators["number"]=$.ligerDefaults.Filter.operators["int"]=$.ligerDefaults.Filter.operators["float"]=$.ligerDefaults.Filter.operators["date"]=["equal","notequal","greater","greaterorequal","less","lessorequal","in","notin"];$.ligerDefaults.Filter.editors["string"]={create:function(B,_){var A=$("<input type='text'/>");B.append(A);A.ligerTextBox(_.editor.options||{});return A},setValue:function($,_){$.val(_)},getValue:function($){return $.liger("option","value")},destroy:function($){$.liger("destroy")}};$.ligerDefaults.Filter.editors["date"]={create:function(B,_){var A=$("<input type='text'/>");B.append(A);A.ligerDateEditor(_.editor.options||{});return A},setValue:function($,_){$.liger("option","value",_)},getValue:function(_,$){return _.liger("option","value")},destroy:function($){$.liger("destroy")}};$.ligerDefaults.Filter.editors["number"]={create:function(B,_){var A=$("<input type='text'/>");B.append(A);var C={minValue:_.editor.minValue,maxValue:_.editor.maxValue};A.ligerSpinner($.extend(C,_.editor.options||{}));return A},setValue:function($,_){$.val(_)},getValue:function(_,$){var A=$.editor.type=="int";if(A)return parseInt(_.val(),10);else return parseFloat(_.val())},destroy:function($){$.liger("destroy")}};$.ligerDefaults.Filter.editors["combobox"]={create:function(B,_){var A=$("<input type='text'/>");B.append(A);var C={data:_.data,slide:false,valueField:_.editor.valueField||_.editor.valueColumnName,textField:_.editor.textField||_.editor.displayColumnName};$.extend(C,_.editor.options||{});A.ligerComboBox(C);return A},setValue:function($,_){$.liger("option","value",_)},getValue:function($){return $.liger("option","value")},destroy:function($){$.liger("destroy")}};$.ligerui.controls.Filter=function(_,A){$.ligerui.controls.Filter.base.constructor.call(this,_,A)};$.ligerui.controls.Filter.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"Filter"},__idPrev:function(){return"Filter"},_init:function(){$.ligerui.controls.Filter.base._init.call(this)},_render:function(){var _=this,A=this.options;_.set(A);$("#"+_.id+" .addgroup").live("click",function(){var A=$(this).parent().parent().parent().parent();_.addGroup(A)});$("#"+_.id+" .deletegroup").live("click",function(){var A=$(this).parent().parent().parent().parent();_.deleteGroup(A)});$("#"+_.id+" .addrule").live("click",function(){var A=$(this).parent().parent().parent().parent();_.addRule(A)});$("#"+_.id+" .deleterole").live("click",function(){var A=$(this).parent().parent();_.deleteRule(A)})},_setFields:function(B){var _=this,A=this.options;if(_.group)_.group.remove();_.group=$(_._bulidGroupTableHtml()).appendTo(_.element)},editors:{},editorCounter:0,addGroup:function(A){var _=this,C=this.options;A=$(A||_.group);var B=$(">tbody:first > tr:last",A),E=[];E.push("<tr class=\"l-filter-rowgroup\"><td class=\"l-filter-cellgroup\" colSpan=\"4\">");var D=!A.hasClass("l-filter-group-alt");E.push(_._bulidGroupTableHtml(D,true));E.push("</td></tr>");var F=$(E.join(""));B.before(F);return F.find("table:first")},deleteGroup:function(B){var _=this,A=this.options;$("td.l-filter-value",B).each(function(){var A=$(this).parent();$("select.fieldsel",A).unbind();_.removeEditor(A)});$(B).parent().parent().remove()},removeEditor:function(C){var A=this,D=this.options,E=$(C).attr("editortype"),_=$(C).attr("editorid"),B=A.editors[_];if(B)D.editors[E].destroy(B);$("td.l-filter-value:first",C).html("")},setData:function(D,A){var _=this,C=this.options;A=A||_.group;var B=$(">tbody:first > tr:last",A);A.find(">tbody:first > tr").not(B).remove();$("select:first",B).val(D.op);if(D.rules)$(D.rules).each(function(){var D=_.addRule(A);D.attr("fieldtype",this.type||"string");$("select.opsel",D).val(this.op);$("select.fieldsel",D).val(this.field).trigger("change");var E=D.attr("editorid");if(E&&_.editors[E]){var B=_.getField(this.field);if(B&&B.editor)C.editors[B.editor.type].setValue(_.editors[E],this.value,B)}else $(":text",D).val(this.value)});if(D.groups)$(D.groups).each(function(){var $=_.addGroup(A);_.setData(this,$)})},addRule:function(A){var _=this,D=this.options;A=A||_.group;var C=$(">tbody:first > tr:last",A),B=$(_._bulidRuleRowHtml());C.before(B);if(D.fields.length)_.appendEditor(B,D.fields[0]);$("select.fieldsel",B).bind("change",function(){var D=$(this).parent().next().find("select:first"),G=$(this).val();if(!G)return;var A=_.getField(G),C=A.type||"string",F=B.attr("fieldtype");if(C!=F){D.html(_._bulidOpSelectOptionsHtml(C));B.attr("fieldtype",C)}var H=null,E=B.attr("editortype");if(_.enabledEditor(A))H=A.editor.type;if(E)_.removeEditor(B);if(H)_.appendEditor(B,A);else{B.removeAttr("editortype").removeAttr("editorid");$("td.l-filter-value:first",B).html("<input type=\"text\" class=\"valtxt\" />")}});return B},deleteRule:function(_){$("select.fieldsel",_).unbind();this.removeEditor(_);$(_).remove()},appendEditor:function(C,_){var A=this,E=this.options;if(A.enabledEditor(_)){var D=$("td.l-filter-value:first",C).html(""),B=E.editors[_.editor.type];A.editors[++A.editorCounter]=B.create(D,_);C.attr("editortype",_.editor.type).attr("editorid",A.editorCounter)}},getData:function(C){var _=this,A=this.options;C=C||_.group;var B={};$("> tbody > tr",C).each(function(K,J){var H=$(J).hasClass("l-filter-rowlast"),I=$(J).hasClass("l-filter-rowgroup");if(I){var G=$("> td:first > table:first",J);if(G.length){if(!B.groups)B.groups=[];B.groups.push(_.getData(G))}}else if(H)B.op=$(".groupopsel:first",J).val();else{var F=$("select.fieldsel:first",J).val(),A=_.getField(F),C=$(".opsel:first",J).val(),D=_._getRuleValue(J,A),E=$(J).attr("fieldtype")||"string";if(!B.rules)B.rules=[];B.rules.push({field:F,op:C,value:D,type:E})}});return B},_getRuleValue:function(D,_){var A=this,E=this.options,F=$(D).attr("editorid"),C=$(D).attr("editortype"),B=A.editors[F];if(B)return E.editors[C].getValue(B,_);return $(".valtxt:first",D).val()},enabledEditor:function($){var _=this,A=this.options;if(!$.editor||!$.editor.type)return false;return($.editor.type in A.editors)},getField:function(C){var _=this,A=this.options;for(var D=0,B=A.fields.length;D<B;D++){var $=A.fields[D];if($.name==C)return $}return null},_bulidGroupTableHtml:function(A,C){var $=this,_=this.options,B=[];B.push("<table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" class=\"l-filter-group");if(A)B.push(" l-filter-group-alt");B.push("\"><tbody>");B.push("<tr class=\"l-filter-rowlast\"><td class=\"l-filter-rowlastcell\" align=\"right\" colSpan=\"4\">");B.push("<select class=\"groupopsel\">");B.push("<option value=\"and\">"+_.strings["and"]+"</option>");B.push("<option value=\"or\">"+_.strings["or"]+"</option>");B.push("</select>");B.push("<input type=\"button\" value=\""+_.strings["addgroup"]+"\" class=\"addgroup\">");B.push("<input type=\"button\" value=\""+_.strings["addrule"]+"\" class=\"addrule\">");if(C)B.push("<input type=\"button\" value=\""+_.strings["deletegroup"]+"\" class=\"deletegroup\">");B.push("</td></tr>");B.push("</tbody></table>");return B.join("")},_bulidRuleRowHtml:function(F){var A=this,C=this.options;F=F||C.fields;var _=[],B=F[0].type||"string";_.push("<tr fieldtype=\""+B+"\"><td class=\"l-filter-column\">");_.push("<select class=\"fieldsel\">");for(var E=0,D=F.length;E<D;E++){var $=F[E];_.push("<option value=\""+$.name+"\"");if(E==0)_.push(" selected ");_.push(">");_.push($.display);_.push("</option>")}_.push("</select>");_.push("</td>");_.push("<td class=\"l-filter-op\">");_.push("<select class=\"opsel\">");_.push(A._bulidOpSelectOptionsHtml(B));_.push("</select>");_.push("</td>");_.push("<td class=\"l-filter-value\">");_.push("<input type=\"text\" class=\"valtxt\" />");_.push("</td>");_.push("<td>");_.push("<div class=\"l-icon-cross deleterole\"></div>");_.push("</td>");_.push("</tr>");return _.join("")},_bulidOpSelectOptionsHtml:function(A){var $=this,C=this.options,F=C.operators[A],B=[];for(var E=0,D=F.length;E<D;E++){var _=F[E];B[B.length]="<option value=\""+_+"\">";B[B.length]=C.strings[_];B[B.length]="</option>"}return B.join("")}})})(jQuery);(function(_){_.fn.ligerForm=function(){return _.ligerui.run.call(this,"ligerForm",arguments)};_.ligerui.getConditions=function($,A){if(!$)return null;$=liger.get(_($));if($&&$.toConditions)return $.toConditions()};_.ligerDefaults=_.ligerDefaults||{};_.ligerDefaults.Form={space:40,rightToken:"\uff1a",labelAlign:"left",align:"left",fields:[],appendID:true,prefixID:null,toJSON:_.ligerui.toJSON,labelCss:null,fieldCss:null,spaceCss:null,onAfterSetFields:null,buttons:null,readonly:false,editors:{},validate:null,unSetValidateAttr:false};_.ligerDefaults.FormString={invalidMessage:"\u5b58\u5728{errorCount}\u4e2a\u5b57\u6bb5\u9a8c\u8bc1\u4e0d\u901a\u8fc7\uff0c\u8bf7\u68c0\u67e5!",detailMessage:"\u8be6\u7ec6",okMessage:"\u786e\u5b9a"};_.ligerDefaults.Form.editors.textarea={create:function(C,A,D){var B=_("<textarea class=\"l-textarea\" />"),$=(D.prefixID||"")+A.field.name;if(_("#"+$).length)B=_("#"+$);B.attr({id:$,name:$});if(D.readonly)B.attr("readonly",true);C.append(B);return B},getValue:function(_,$){return _.val()},setValue:function(_,A,$){_.val(A)},resize:function(_,B,A,$){_.css({width:B-2}).parent().css("width","auto")}};_.ligerDefaults.Form.editors.hidden={create:function(C,A,D){var B=_("<input type = \"hidden\"  />"),$=(D.prefixID||"")+A.field.name;if(_("#"+$).length)B=_("#"+$);B.attr({id:$,name:$});C.append(B);return B},getValue:function(_,$){return _.val()},setValue:function(_,A,$){_.val(A)}};_.ligerDefaults.Form_fields={name:null,textField:null,type:null,editor:null,label:null,newline:true,op:null,vt:null,attr:null,validate:null};_.ligerDefaults.Form_editor={};_.ligerDefaults.Form.editorBulider=function(E){var B=this,C=this.options,D={},A=E.attr("ltype"),$={};if(C.readonly)D.readonly=true;D=_.extend({width:($.width||C.inputWidth)-2},$.options,$.editor,D);if(A=="autocomplete")D.autocomplete=true;if(E.is("select"))E.ligerComboBox(D);else if(E.is(":password"))E.ligerTextBox(D);else if(E.is(":text"))switch(A){case"select":case"combobox":case"autocomplete":E.ligerComboBox(D);break;case"spinner":E.ligerSpinner(D);break;case"date":E.ligerDateEditor(D);break;case"popup":E.ligerPopupEdit(D);break;case"currency":D.currency=true;case"float":case"number":D.number=true;E.ligerTextBox(D);break;case"int":case"digits":D.digits=true;default:E.ligerTextBox(D);break}else if(E.is(":radio"))E.ligerRadio(D);else if(E.is(":checkbox"))E.ligerCheckBox(D);else if(E.is("textarea"))E.addClass("l-textarea")};_.ligerui.controls.Form=function($,A){_.ligerui.controls.Form.base.constructor.call(this,$,A)};_.ligerui.controls.Form.ligerExtend(_.ligerui.core.UIComponent,{__getType:function(){return"Form"},__idPrev:function(){return"Form"},_init:function(){var $=this,B=this.options;_.ligerui.controls.Form.base._init.call(this);for(var C in liger.editors){var A=liger.editors[C];if(!A||C in B.editors)continue;B.editors[C]=liger.getEditor(_.extend({type:C,master:$},A))}},_render:function(){var $=this,B=this.options,A=_(this.element);$.form=A.is("form")?A:A.parents("form:first");_("input,select,textarea",A).each(function(){B.editorBulider.call($,_(this))});$.set(B);if(B.buttons){var C=_("<ul class=\"l-form-buttons\"></ul>").appendTo(A);_(B.buttons).each(function(){var $=_("<li><div></div></li>").appendTo(C);_("div:first",$).ligerButton(this)})}if(!$.element.id)$.element.id=$.id;_("#"+$.element.id+" .togglebtn").live("click",function(){if(_(this).hasClass("togglebtn-down"))_(this).removeClass("togglebtn-down");else _(this).addClass("togglebtn-down");var A=_(this).parent().nextAll("ul,div");for(var B=0;B<A.length;B++){var $=_(A[B]);if($.hasClass("l-group"))break;if(_(this).hasClass("togglebtn-down"))$.hide();else $.show()}})},getEditor:function(B){var _=this,A=this.options;if(!_.editors)return;for(var D=0,C=A.fields.length;D<C;D++){var $=A.fields[D];if($.name==B&&_.editors[D])return _.editors[D].control}},getField:function(_){var $=this,A=this.options;if(!A.fields)return null;return A.fields[_]},toConditions:function(){var A=this,B=this.options,$=[];_(B.fields).each(function(F,_){var C=_.name,E=_.textField,B=A.editors[F];if(!B||!C)return;var D=B.editor.getValue(B.control);if(D)$.push({op:_.operator||"like",field:C,value:D,type:_.type||"string"})});return $},_preSetFields:function(D){var A=this,B=this.options,$=null,C=null;_(B.fields).each(function(A,_){if(B.readonly||_.readonly||(_.editor&&_.editor.readonly))delete _.validate;if(_.type=="hidden")return;_.type=_.type||"text";if(_.newline==null)_.newline=true;if($&&!_.group){_.group=$;_.groupicon=C}if(_.group){_.group=_.group.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,"");$=_.group;C=_.groupicon}})},_setReadonly:function(C){var _=this,B=this.options;if(C&&_.editors)for(var A in _.editors){var $=_.editors[A].control;if($&&$._setReadonly)$._setReadonly(true)}},_setFields:function(G){var A=this,C=this.options;if(_.isFunction(C.prefixID))C.prefixID=C.prefixID(A);A.validate={};var B=_(this.element);_(".l-form-container",B).remove();if(G&&G.length){A._preSetFields(G);if(!B.hasClass("l-form"))B.addClass("l-form");var F=["<div class=\"l-form-container\">"],D=false,$=null,E=[];_(G).each(function(B,$){var D=$.name,G=($.readonly||($.editor&&$.editor.readonly))?true:false,F=(C.prefixID||"")+($.textField||$.id||$.name);if($.validate&&!G){A.validate.rules=A.validate.rules||{};A.validate.rules[F]=$.validate;if($.validateMessage){A.validate.messages=A.validate.messages||{};A.validate.messages[F]=$.validateMessage}}if(_.inArray($.group,E)==-1)E.push($.group)});_(E).each(function(B,E){_(G).each(function(M,B){if(B.group!=E)return;var H=_.inArray(B,G),J=B.id||B.name,I=B.newline,L=(C.prefixID||"")+(B.id||B.name);if(!J)return;if(B.type=="hidden"){if(!_("#"+L).length)F.push("<div style=\"display:none\" id=\""+(A.id+"|"+M)+"\"></div>");return}var K=B.group&&B.group!=$;if(H==0||K)I=true;if(I){if(D){F.push("</ul>");D=false}if(K){F.push("<div class=\"l-group");if(B.groupicon)F.push(" l-group-hasicon");F.push("\">");if(B.groupicon)F.push("<img src=\""+B.groupicon+"\" />");F.push("<span>"+B.group+"</span></div>");$=B.group}F.push("<ul>");D=true}F.push("<li class=\"l-fieldcontainer");if(I)F.push(" l-fieldcontainer-first");F.push("\"");F.push(" fieldindex="+H);F.push("><ul>");F.push(A._buliderLabelContainer(B,H));F.push(A._buliderControlContainer(B,H));F.push(A._buliderSpaceContainer(B,H));F.push("</ul></li>")})});if(D){F.push("</ul>");D=false}F.push("</div>");B.append(F.join(""));_(".l-group .togglebtn",B).remove();_(".l-group",B).width(B.width()*0.95).append("<div class='togglebtn'></div>")}(function(){A.editors=A.editors||{};_(G).each(function(E,$){var D=document.getElementById(A.id+"|"+E),B=C.editors[$.type];if(!D)return;D=_(D);var F=A._createEditor(B,D,{field:$},D.width(),D.height());if(A.editors[E]&&A.editors[E].control&&A.editors[E].control.destroy)A.editors[E].control.destroy();A.editors[E]={control:F,editor:B}});A.initValidate();A.trigger("afterSetFields")})()},getData:function(){var $=this,A=this.options;$.data=$.data||{};_(A.fields).each(function(E,_){var B=_.name,D=_.textField,A=$.editors[E];if(!A)return;if(B){var C=A.editor.getValue(A.control);$._setValueByName($.data,B,C)}if(D){C=A.editor.getText(A.control);$._setValueByName($.data,D,C)}});return $.data},setData:function(B){var $=this,A=this.options,C=$.get("fields");$.data=B||{};(function(){_(C).each(function(F,_){var C=_.name,E=_.textField,B=$.editors[F];if(!B)return;if(C&&(C in $.data)){var D=$._getValueByName($.data,C);B.editor.setValue(B.control,D)}if(E&&(E in $.data)){var A=$._getValueByName($.data,E);B.editor.setText(B.control,A)}})})()},_setValueByName:function(B,_,A){if(!B||!_)return null;if(_.indexOf(".")==-1)B[_]=A;else{try{new Function("data,value","data."+_+"=value;")(B,A)}catch($){}}},_getValueByName:function(A,_){if(!A||!_)return null;if(_.indexOf(".")==-1)return A[_];else{try{return new Function("data","return data."+_+";")(A)}catch($){return null}}},valid:function(){var $=this,_=this.options;if(!$.form||!$.validator)return;return $.form.valid()},initValidate:function(){var A=this,B=this.options;if(!A.form||!B.validate||!A.form.validate){A.validator=null;return}var C=B.validate==true?{}:B.validate,$=_.extend({errorPlacement:function(A,$){if(!$.attr("id"))$.attr("id",new Date().getTime());if($.hasClass("l-textarea"))$.addClass("l-textarea-invalid");else if($.hasClass("l-text-field"))$.parent().addClass("l-text-invalid");_($).removeAttr("title").ligerHideTip();_($).attr("title",A.html()).ligerTip({distanceX:5,distanceY:-3,auto:true})},success:function(A){if(!A.attr("for"))return;var $=_("#"+A.attr("for"));if($.hasClass("l-textarea"))$.removeClass("l-textarea-invalid");else if($.hasClass("l-text-field"))$.parent().removeClass("l-text-invalid");_($).removeAttr("title").ligerHideTip()}},C,{rules:A.validate.rules,messages:A.validate.messages});A.validator=A.form.validate($)},showInvalid:function(D){var A=this,C=this.options;if(!A.validator)return;var B=_("<div><div class=\"invalid\">"+C.invalidMessage.replace("{errorCount}",A.validator.errorList.length)+"<a class=\"viewInvalidDetail\" href=\"javascript:void(0)\">"+C.detailMessage+"</a></div><div class=\"invalidDetail\" style=\"display:none;\">"+$(A.validator.errorList)+"</div></div>");B.find("a.viewInvalidDetail:first").bind("click",function(){_(this).parent().next("div.invalidDetail").toggle()});_.ligerDialog.open({type:"error",width:350,showMax:false,showToggle:false,showMin:false,target:B,buttons:[{text:C.okMessage,onclick:function(_,$){$.close()}}]})},_createEditor:function(F,C,_,E,B){var $=this,D=this.options,A=F.create.call(this,C,_,D);if(A&&F.resize)F.resize.call(this,A,E,B,_);return A},_buliderLabelContainer:function($){var _=this,B=this.options,C=$.label||$.display,A=$.labelWidth||$.labelwidth||B.labelWidth,D=$.labelAlign||B.labelAlign;if(C)C+=B.rightToken;var E=[];E.push("<li");if(B.labelCss)E.push(" class=\""+B.labelCss+"\"");E.push(" style=\"");if(A)E.push("width:"+A+"px;");if(D)E.push("text-align:"+D+";");E.push("\">");if(C)E.push(C);E.push("</li>");return E.join("")},_buliderControlContainer:function($,D){var _=this,C=this.options,B=$.width||C.inputWidth,A=$.align||$.textAlign||$.textalign||C.align,E=[];E.push("<li");E.push(" id=\""+(_.id+"|"+D)+"\"");if(C.fieldCss)E.push(" class=\""+C.fieldCss+"\"");E.push(" style=\"");if(B)E.push("width:"+B+"px;");if(A)E.push("text-align:"+A+";");E.push("\">");E.push("</li>");return E.join("")},_buliderSpaceContainer:function($){var _=this,A=this.options,B=$.space||$.spaceWidth||A.space,C=[];C.push("<li");if(A.spaceCss)C.push(" class=\""+A.spaceCss+"\"");C.push(" style=\"");if(B)C.push("width:"+B+"px;");C.push("\">");if($.validate&&$.validate.required)C.push("<span class='l-star'>*</span>");C.push("</li>");return C.join("")},_buliderControl:function($,E){var A=this,D=this.options,C=$.width||D.inputWidth,B=$.name||$.id,F=($.type||"text").toLowerCase(),G=($.readonly||($.editor&&$.editor.readonly))?true:false,H=[];if(F=="textarea"||F=="htmleditor")H.push("<textarea ");else if(_.inArray(F,["checkbox","radio","password","file"])!=-1)H.push("<input type=\""+F+"\" ");else if(_.inArray(F,["select","combobox","autocomplete","popup","radiolist","checkboxlist","listbox"])!=-1)H.push("<input type=\"hidden\" ");else H.push("<input type=\"text\" ");H.push("name=\""+B+"\" ");H.push("fieldindex=\""+E+"\" ");$.cssClass&&H.push("class=\""+$.cssClass+"\" ");D.appendID&&H.push(" id=\""+B+"\" ");H.push(A._getInputAttrHtml($));if($.validate&&!G){H.push(" validate='"+D.toJSON($.validate)+"' ");A.validate=A.validate||{};A.validate.rules=A.validate.rules||{};A.validate.rules[B]=$.validate;if($.validateMessage){A.validate.messages=A.validate.messages||{};A.validate.messages[B]=$.validateMessage}}H.push(" />");return H.join("")},_getInputAttrHtml:function($){var B=[],A=($.type||"text").toLowerCase();if(A=="textarea"){$.cols&&B.push("cols=\""+$.cols+"\" ");$.rows&&B.push("rows=\""+$.rows+"\" ")}B.push("ltype=\""+A+"\" ");$.op&&B.push("op=\""+$.op+"\" ");$.vt&&B.push("vt=\""+$.vt+"\" ");if($.attr)for(var _ in $.attr)B.push(_+"=\""+$.attr[_]+"\" ");return B.join("")}});function $($){var A=[];_($).each(function(D,B){var C=_(B.element).parents("li:first").prev("li:first").html(),$=B.message;A.push("<div>"+C+" "+$+"</div>")});return A.join("")}})(jQuery);(function($){var l=$.ligerui;$.fn.ligerGrid=function(_){return $.ligerui.run.call(this,"ligerGrid",arguments)};$.fn.ligerGetGridManager=function(){return $.ligerui.run.call(this,"ligerGetGridManager",arguments)};$.ligerDefaults.Grid={title:null,width:"auto",height:"auto",columnWidth:null,resizable:true,url:false,data:null,usePager:true,page:1,pageSize:10,pageSizeOptions:[10,20,30,40,50],parms:[],columns:[],minColToggle:1,dataType:"server",dataAction:"server",showTableToggleBtn:false,switchPageSizeApplyComboBox:false,allowAdjustColWidth:true,checkbox:false,allowHideColumn:true,enabledEdit:false,isScroll:true,dateFormat:"yyyy-MM-dd",inWindow:true,statusName:"__status",method:"post",async:true,fixedCellHeight:true,heightDiff:0,cssClass:null,root:"Rows",record:"Total",pageParmName:"page",pagesizeParmName:"pagesize",sortnameParmName:"sortname",sortorderParmName:"sortorder",allowUnSelectRow:false,alternatingRow:true,mouseoverRowCssClass:"l-grid-row-over",enabledSort:true,rowAttrRender:null,groupColumnName:null,groupColumnDisplay:"\u5206\u7ec4",groupRender:null,totalRender:null,delayLoad:false,where:null,selectRowButtonOnly:false,whenRClickToSelect:false,contentType:null,checkboxColWidth:27,detailColWidth:29,clickToEdit:true,detailToEdit:false,onEndEdit:null,minColumnWidth:80,tree:null,isChecked:null,isSelected:null,frozen:true,frozenDetail:false,frozenCheckbox:true,detail:null,detailHeight:260,isShowDetailToggle:null,rownumbers:false,frozenRownumbers:true,rownumbersColWidth:26,colDraggable:false,rowDraggable:false,rowDraggingRender:null,autoCheckChildren:true,onRowDragDrop:null,rowHeight:22,headerRowHeight:23,toolbar:null,toolbarShowInLeft:true,headerImg:null,unSetValidateAttr:true,onDragCol:null,onToggleCol:null,onChangeSort:null,onSuccess:null,onDblClickRow:null,onSelectRow:null,onUnSelectRow:null,onBeforeCheckRow:null,onCheckRow:null,onBeforeCheckAllRow:null,onCheckAllRow:null,onBeforeShowData:null,onAfterShowData:null,onError:null,onSubmit:null,onReload:null,onToFirst:null,onToPrev:null,onToNext:null,onToLast:null,onAfterAddRow:null,onBeforeEdit:null,onBeforeSubmitEdit:null,onAfterEdit:null,onLoading:null,onLoaded:null,onContextmenu:null,onBeforeCancelEdit:null,onAfterSubmitEdit:null,onRowDragDrop:null,onGroupExtend:null,onGroupCollapse:null,onLoadData:null};$.ligerDefaults.GridString={errorMessage:"\u53d1\u751f\u9519\u8bef",pageStatMessage:"\u663e\u793a\u4ece{from}\u5230{to}\uff0c\u603b {total} \u6761 \u3002\u6bcf\u9875\u663e\u793a\uff1a{pagesize}",pageTextMessage:"Page",loadingMessage:"\u52a0\u8f7d\u4e2d...",findTextMessage:"\u67e5\u627e",noRecordMessage:"\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u8bb0\u5f55\u5b58\u5728",isContinueByDataChanged:"\u6570\u636e\u5df2\u7ecf\u6539\u53d8,\u5982\u679c\u7ee7\u7eed\u5c06\u4e22\u5931\u6570\u636e,\u662f\u5426\u7ee7\u7eed?",cancelMessage:"\u53d6\u6d88",saveMessage:"\u4fdd\u5b58",applyMessage:"\u5e94\u7528",draggingMessage:"{count}\u884c"};$.ligerDefaults.Grid_columns={id:null,name:null,totalSummary:null,display:null,headerRender:null,isAllowHide:true,isSort:false,type:null,columns:null,width:120,minWidth:80,format:null,align:"left",hide:false,editor:null,render:null,textField:null};$.ligerDefaults.Grid_editor={type:null,ext:null,onChange:null,onChanged:null};$.ligerMethos.Grid=$.ligerMethos.Grid||{};$.ligerDefaults.Grid.sorters=$.ligerDefaults.Grid.sorters||{};$.ligerDefaults.Grid.formatters=$.ligerDefaults.Grid.formatters||{};$.ligerDefaults.Grid.editors=$.ligerDefaults.Grid.editors||{};$.ligerDefaults.Grid.sorters["date"]=function($,_){return $<_?-1:$>_?1:0};$.ligerDefaults.Grid.sorters["int"]=function($,_){return parseInt($)<parseInt(_)?-1:parseInt($)>parseInt(_)?1:0};$.ligerDefaults.Grid.sorters["float"]=function($,_){return parseFloat($)<parseFloat(_)?-1:parseFloat($)>parseFloat(_)?1:0};$.ligerDefaults.Grid.sorters["string"]=function($,_){if(!$)return false;return $.localeCompare(_)};$.ligerDefaults.Grid.formatters["date"]=function(value,column){function getFormatDate(D,_){var $=this,A=this.options;if(isNaN(D))return null;var C=_,B={"M+":D.getMonth()+1,"d+":D.getDate(),"h+":D.getHours(),"m+":D.getMinutes(),"s+":D.getSeconds(),"q+":Math.floor((D.getMonth()+3)/3),"S":D.getMilliseconds()};if(/(y+)/.test(C))C=C.replace(RegExp.$1,(D.getFullYear()+"").substr(4-RegExp.$1.length));for(var E in B)if(new RegExp("("+E+")").test(C))C=C.replace(RegExp.$1,RegExp.$1.length==1?B[E]:("00"+B[E]).substr((""+B[E]).length));return C}if(!value)return"";if(typeof(value)=="string"&&/^\/Date/.test(value)){value=value.replace(/^\//,"new ").replace(/\/$/,"");eval("value = "+value)}if(value instanceof Date){var format=column.format||this.options.dateFormat||"yyyy-MM-dd";return getFormatDate(value,format)}else return value.toString()};$.ligerui.controls.Grid=function(_,A){$.ligerui.controls.Grid.base.constructor.call(this,_,A)};$.ligerui.controls.Grid.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"$.ligerui.controls.Grid"},__idPrev:function(){return"grid"},_extendMethods:function(){return $.ligerMethos.Grid},_init:function(){$.ligerui.controls.Grid.base._init.call(this);var _=this,B=this.options;B.dataType=B.url?"server":"local";if(B.dataType=="local"){B.data=B.data||[];B.dataAction="local"}if(B.isScroll==false)B.height="auto";if(!B.frozen){B.frozenCheckbox=false;B.frozenDetail=false;B.frozenRownumbers=false}if(B.detailToEdit){B.enabledEdit=true;B.clickToEdit=false;B.detail={height:"auto",onShowDetail:function(A,C,D){$(C).addClass("l-grid-detailpanel-edit");_.beginEdit(A,function(D,_){var A=$("<div class='l-editbox'></div>");A.width(120).height(B.rowHeight+1);A.appendTo(C);return A});function E(){$(C).parent().parent().remove();_.collapseDetail(A)}$("<div class='l-clear'></div>").appendTo(C);$("<div class='l-button'>"+B.saveMessage+"</div>").appendTo(C).click(function(){_.endEdit(A);E()});$("<div class='l-button'>"+B.applyMessage+"</div>").appendTo(C).click(function(){_.submitEdit(A)});$("<div class='l-button'>"+B.cancelMessage+"</div>").appendTo(C).click(function(){_.cancelEdit(A);E()})}}}if(B.tree){B.tree.childrenName=B.tree.childrenName||"children";B.tree.isParent=B.tree.isParent||function($){var _=B.tree.childrenName in $;return _};B.tree.isExtend=B.tree.isExtend||function($){if("isextend"in $&&$["isextend"]==false)return false;return true}}for(var C in liger.editors){var A=liger.editors[C];if(!A||C in B.editors)continue;B.editors[C]=liger.getEditor($.extend({type:C,master:_},A))}},_render:function(){var _=this,B=this.options;_.grid=$(_.element);_.grid.addClass("l-panel");var C=[];C.push("        <div class='l-panel-header'><span class='l-panel-header-text'></span></div>");C.push("                    <div class='l-grid-loading'></div>");C.push("        <div class='l-panel-topbar' style='display:none'><div class='l-panel-topbarinner'></div></div><div class='l-clear'></div>");C.push("        <div class='l-panel-bwarp'>");C.push("            <div class='l-panel-body'>");C.push("                <div class='l-grid'>");C.push("                    <div class='l-grid-dragging-line'></div>");C.push("                    <div class='l-grid-popup'><table cellpadding='0' cellspacing='0'><tbody></tbody></table></div>");C.push("                  <div class='l-grid1'>");C.push("                      <div class='l-grid-header l-grid-header1'>");C.push("                          <div class='l-grid-header-inner'><table class='l-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>");C.push("                      </div>");C.push("                      <div class='l-grid-body l-grid-body1'>");C.push("                      </div>");C.push("                  </div>");C.push("                  <div class='l-grid2'>");C.push("                      <div class='l-grid-header l-grid-header2'>");C.push("                          <div class='l-grid-header-inner'><table class='l-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>");C.push("                      </div>");C.push("                      <div class='l-grid-body l-grid-body2 l-scroll'>");C.push("                      </div>");C.push("                  </div>");C.push("                 </div>");C.push("              </div>");C.push("         </div>");C.push("         <div class='l-panel-bar'>");C.push("            <div class='l-panel-bbar-inner'>");C.push("                <div class='l-bar-group  l-bar-message'><span class='l-bar-text'></span></div>");C.push("            <div class='l-bar-group l-bar-selectpagesize'></div>");C.push("                <div class='l-bar-separator'></div>");C.push("                <div class='l-bar-group'>");C.push("                    <div class='l-bar-button l-bar-btnfirst'><span></span></div>");C.push("                    <div class='l-bar-button l-bar-btnprev'><span></span></div>");C.push("                </div>");C.push("                <div class='l-bar-separator'></div>");C.push("                <div class='l-bar-group'><span class='pcontrol'> <input type='text' size='4' value='1' style='width:20px' maxlength='3' /> / <span></span></span></div>");C.push("                <div class='l-bar-separator'></div>");C.push("                <div class='l-bar-group'>");C.push("                     <div class='l-bar-button l-bar-btnnext'><span></span></div>");C.push("                    <div class='l-bar-button l-bar-btnlast'><span></span></div>");C.push("                </div>");C.push("                <div class='l-bar-separator'></div>");C.push("                <div class='l-bar-group'>");C.push("                     <div class='l-bar-button l-bar-btnload' onclick='javascript:location.reload();'><span></span></div>");C.push("                </div>");C.push("                <div class='l-bar-separator'></div>");C.push("                <div class='l-clear'></div>");C.push("            </div>");C.push("         </div>");_.grid.html(C.join(""));_.header=$(".l-panel-header:first",_.grid);_.body=$(".l-panel-body:first",_.grid);_.toolbar=$(".l-panel-bar:first",_.grid);_.popup=$(".l-grid-popup:first",_.grid);_.gridloading=$(".l-grid-loading:first",_.grid);_.draggingline=$(".l-grid-dragging-line",_.grid);_.topbar=$(".l-panel-topbarinner:first",_.grid);_.gridview=$(".l-grid:first",_.grid);_.gridview.attr("id",_.id+"grid");_.gridview1=$(".l-grid1:first",_.gridview);_.gridview2=$(".l-grid2:first",_.gridview);_.gridheader=$(".l-grid-header:first",_.gridview2);_.gridbody=$(".l-grid-body:first",_.gridview2);_.f={};_.f.gridheader=$(".l-grid-header:first",_.gridview1);_.f.gridbody=$(".l-grid-body:first",_.gridview1);_.currentData=null;_.changedCells={};_.editors={};_.editor={editing:false};_.cacheData={};if(B.height=="auto")_.bind("SysGridHeightChanged",function(){if(_.enabledFrozen())_.gridview.height(Math.max(_.gridview1.height(),_.gridview2.height()))});var A=$.extend({},B);this._bulid();this._setColumns(B.columns);delete A["columns"];delete A["data"];delete A["url"];_.set(A);if(!B.delayLoad)if(B.url)_.set({url:B.url});else if(B.data)_.set({data:B.data})},_setFrozen:function($){if($)this.grid.addClass("l-frozen");else this.grid.removeClass("l-frozen")},_setCssClass:function($){this.grid.addClass($)},_setLoadingMessage:function($){this.gridloading.html($)},_setToolbar:function(B){var _=this,A=this.options;if(B&&$.fn.ligerToolBar){_.topbar.parent().show();_.toolbarManager=_.topbar.ligerToolBar(B);if(B.title){var C=$("<div class='l-panel-topbartitle'><span>"+B.title+"</span></div>");if(B.icon){C.append("<img class='l-panel-topbaricon' src='"+B.icon+"'></img>");C.addClass("l-panel-topbartitle-hasicon")}_.topbar.parent().append(C)}if(A.toolbarShowInLeft)_.topbar.addClass("l-panel-topbarinner-left")}else _.topbar.parent().remove()},isHorizontalScrollShowed:function(){var $=this,_=$.gridbody.find(".l-grid-body-inner:first");if(!_.length)return false;return $.gridbody.width()<_.width()},_setHeight:function(A){var $=this,_=this.options;$.unbind("SysGridHeightChanged");if(A=="auto"){$.bind("SysGridHeightChanged",function(){if($.enabledFrozen())$.gridview.height(Math.max($.gridview1.height(),$.gridview2.height()))});return}A=$._calculateGridBodyHeight(A);if(A>0){$.gridbody.height(A);$.f.gridbody.height(A);var B=_.headerRowHeight*($._columnMaxLevel-1)+_.headerRowHeight-1;$.gridview.height(A+B)}$._updateHorizontalScrollStatus.ligerDefer($,10)},_calculateGridBodyHeight:function(B){var _=this,A=this.options;if(typeof B=="string"&&B.indexOf("%")>0)if(A.inWindow)B=$(window).height()*parseFloat(B)*0.01;else B=_.grid.parent().height()*parseFloat(B)*0.01;if(A.title)B-=24;if(A.usePager)B-=32;if(A.totalRender)B-=25;if(A.toolbar)B-=_.topbar.outerHeight();var C=A.headerRowHeight*(_._columnMaxLevel-1)+A.headerRowHeight-1;B-=C;return B},_updateHorizontalScrollStatus:function(){var $=this,_=this.options;if($.isHorizontalScrollShowed())$.gridview.addClass("l-grid-hashorizontal");else $.gridview.removeClass("l-grid-hashorizontal")},_updateFrozenWidth:function(){var $=this,A=this.options;if($.enabledFrozen()){$.gridview1.width($.f.gridtablewidth);var _=$.gridview.width()-$.f.gridtablewidth;$.gridview2.css({left:$.f.gridtablewidth});if(_>0)$.gridview2.css({width:_})}},_setWidth:function(A){var $=this,_=this.options;if($.enabledFrozen())$._onResize()},_setUrl:function($){this.options.url=$;if($){this.options.dataType="server";this.loadData(true)}else this.options.dataType="local"},removeParm:function(A){var $=this,_=$.get("parms");if(!_)_={};if(_ instanceof Array)removeArrItem(_,function($){return $.name==A});else delete _[A];$.set("parms",_)},setParm:function(A,B){var $=this,_=$.get("parms");if(!_)_={};if(_ instanceof Array){removeArrItem(_,function($){return $.name==A});_.push({name:A,value:B})}else _[A]=B;$.set("parms",_)},_setData:function($){this.loadData(this.options.data)},loadData:function(C){var A=this,F=this.options;A.loading=true;A.trigger("loadData");var G=null,_=true;if(typeof(C)=="function"){G=C;if(A.lastData)A.data=A.lastData;else{A.data=A.currentData;if(!A.data)A.data={};if(!A.data[F.root])A.data[F.root]=[];A.lastData=A.data}_=false}else if(typeof(C)=="boolean")_=C;else if(typeof(C)=="object"&&C){_=false;F.dataType="local";F.data=C}if(!F.newPage)F.newPage=1;if(F.dataAction=="server")if(!F.sortOrder)F.sortOrder="asc";var D=[];if(F.parms){var B=$.isFunction(F.parms)?F.parms():F.parms;if(B.length)$(B).each(function(){D.push({name:this.name,value:this.value})});else if(typeof B=="object")for(var E in B)D.push({name:E,value:B[E]})}if(F.dataAction=="server"){if(F.usePager){D.push({name:F.pageParmName,value:F.newPage});D.push({name:F.pagesizeParmName,value:F.pageSize})}if(F.sortName){D.push({name:F.sortnameParmName,value:F.sortName});D.push({name:F.sortorderParmName,value:F.sortOrder})}}$(".l-bar-btnload span",A.toolbar).addClass("l-disabled");if(F.dataType=="local"){A.filteredData=F.data||A.currentData;if(G)A.filteredData[F.root]=A._searchData(A.filteredData[F.root],G);if(F.usePager)A.currentData=A._getCurrentPageData(A.filteredData);else A.currentData=A.filteredData;A._convertTreeData();A._showData()}else if(F.dataAction=="local"&&!_){if(A.data&&A.data[F.root]){A.filteredData=A.data;if(G)A.filteredData[F.root]=A._searchData(A.filteredData[F.root],G);A.currentData=A._getCurrentPageData(A.filteredData);A._convertTreeData();A._showData()}}else A.loadServerData(D,G);A.loading=false},_convertTreeData:function(){var $=this,_=this.options;if(_.tree&&_.tree.idField&&_.tree.parentIDField){$.currentData[_.root]=$.arrayToTree($.currentData[_.root],_.tree.idField,_.tree.parentIDField);$.currentData[_.record]=$.currentData[_.root].length}},loadServerData:function(A,D){var _=this,B=this.options,C={type:B.method,url:B.url,data:A,async:B.async,dataType:"json",beforeSend:function(){if(_.hasBind("loading"))_.trigger("loading");else _.toggleLoading(true)},success:function($){_.trigger("success",[$,_]);if(!$||!$[B.root]||!$[B.root].length){_.currentData=_.data={};_.currentData[B.root]=_.data[B.root]=[];if($&&$[B.record])_.currentData[B.record]=_.data[B.record]=$[B.record];else _.currentData[B.record]=_.data[B.record]=0;_._convertTreeData();_._showData();return}_.data=$;if(_.data[B.record]!=null&&_.cacheData.records)_.cacheData.records=_.data[B.record];if(B.dataAction=="server"){_.currentData=_.data;if(_.currentData[B.record]==null&&_.cacheData.records)_.currentData[B.record]=_.cacheData.records}else{_.filteredData=_.data;if(D)_.filteredData[B.root]=_._searchData(_.filteredData[B.root],D);if(B.usePager)_.currentData=_._getCurrentPageData(_.filteredData);else _.currentData=_.filteredData}_._convertTreeData();_._showData.ligerDefer(_,10,[_.currentData])},complete:function(){_.trigger("complete",[_]);if(_.hasBind("loaded"))_.trigger("loaded",[_]);else _.toggleLoading.ligerDefer(_,10,[false])},error:function(D,A,C){_.currentData=_.data={};_.currentData[B.root]=_.data[B.root]=[];_.currentData[B.record]=_.data[B.record]=0;_.toggleLoading.ligerDefer(_,10,[false]);$(".l-bar-btnload span",_.toolbar).removeClass("l-disabled");_.trigger("error",[D,A,C])}};if(B.contentType)C.contentType=B.contentType;$.ajax(C)},toggleLoading:function($){this.gridloading[$?"show":"hide"]()},_createEditor:function(D,B,$,C,A){var _=D.create.call(this,B,$);if(D.setValue)D.setValue.call(this,_,$.value,$);if(D.setText&&$.column.textField)D.setText.call(this,_,$.text,$);if(D.resize)D.resize.call(this,_,C,A,$);return _},beginEdit:function(I,B){var _=this,K=this.options;if(!K.enabledEdit||K.clickToEdit)return;var M=_.getRow(I);if(M._editing)return;if(_.trigger("beginEdit",{record:M,rowindex:M["__index"]})==false)return;_.editors[M["__id"]]={};M._editing=true;_.reRender({rowdata:M});B=B||function(C,B){var D=_.getCellObj(C,B),A=$(D).html("");_.setCellEditing(C,B,true);return A};for(var F=0,D=_.columns.length;F<D;F++){var L=_.columns[F];if(!L.name||!L.editor||!L.editor.type||!K.editors[L.editor.type])continue;var G=K.editors[L.editor.type],A={record:M,value:_._getValueByName(M,L.name),column:L,rowindex:M["__index"],grid:_},J=B(M,L),C=J.width(),H=J.height(),E=_._createEditor(G,J,A,C,H);_.editors[M["__id"]][L["__id"]]={editor:G,input:E,editParm:A,container:J}}_.trigger("afterBeginEdit",{record:M,rowindex:M["__index"]})},cancelEdit:function(_){var $=this;if(_==undefined){for(var D in $.editors)$.cancelEdit(D)}else{var C=$.getRow(_);if(!$.editors[C["__id"]])return;if($.trigger("beforeCancelEdit",{record:C,rowindex:C["__index"]})==false)return;for(var B in $.editors[C["__id"]]){var A=$.editors[C["__id"]][B];if(A.editor.destroy)A.editor.destroy(A.input,A.editParm)}delete $.editors[C["__id"]];delete C["_editing"];$.reRender({rowdata:C})}},addEditRow:function(_,$){this.submitEdit();_=this.add(_);this.beginEdit(_,$)},submitEdit:function(A){var _=this,B=this.options;if(A==undefined){for(var G in _.editors)_.submitEdit(G)}else{var F=_.getRow(A),$={};if(!_.editors[F["__id"]])return;for(var E in _.editors[F["__id"]]){var D=_.editors[F["__id"]][E],C=D.editParm.column;if(C.name)$[C.name]=D.editor.getValue(D.input,D.editParm);if(C.textField&&D.editor.getText)$[C.textField]=D.editor.getText(D.input,D.editParm)}if(_.trigger("beforeSubmitEdit",{record:F,rowindex:F["__index"],newdata:$})==false)return false;_.updateRow(F,$);_.trigger("afterSubmitEdit",{record:F,rowindex:F["__index"],newdata:$})}},endEdit:function(_){var $=this,A=this.options;if($.editor.editing){var B=$.editor;$.trigger("sysEndEdit",[$.editor.editParm]);$.trigger("endEdit",[$.editor.editParm]);if(B.editor.destroy)B.editor.destroy(B.input,B.editParm);$.editor.container.remove();$.reRender({rowdata:$.editor.editParm.record,column:$.editor.editParm.column});$.trigger("afterEdit",[$.editor.editParm]);$.editor={editing:false}}else if(_!=undefined){var D=$.getRow(_);if(!$.editors[D["__id"]])return;if($.submitEdit(_)==false)return false;for(var C in $.editors[D["__id"]]){B=$.editors[D["__id"]][C];if(B.editor.destroy)B.editor.destroy(B.input,B.editParm)}delete $.editors[D["__id"]];delete D["_editing"];$.trigger("afterEdit",{record:D,rowindex:D["__index"]})}else for(var E in $.editors)$.endEdit(E);$._fixHeight.ligerDefer($,10)},setWidth:function($){return this._setWidth($)},setHeight:function($){return this._setHeight($)},enabledCheckbox:function(){return this.options.checkbox?true:false},enabledFrozen:function(){var $=this,A=this.options;if(!A.frozen)return false;var _=$.columns||[];if($.enabledDetail()&&A.frozenDetail||$.enabledCheckbox()&&A.frozenCheckbox||A.frozenRownumbers&&A.rownumbers)return true;for(var C=0,B=_.length;C<B;C++)if(_[C].frozen)return true;this._setFrozen(false);return false},enabledDetailEdit:function(){if(!this.enabledDetail())return false;return this.options.detailToEdit?true:false},enabledDetail:function(){if(this.options.detail&&this.options.detail.onShowDetail)return true;return false},enabledGroup:function(){return this.options.groupColumnName?true:false},deleteSelectedRow:function(){if(!this.selected)return;for(var _ in this.selected){var $=this.selected[_];if($["__id"]in this.records)this._deleteData.ligerDefer(this,10,[$])}this.reRender.ligerDefer(this,20)},removeRange:function(A){var _=this,B=this.options;$.each(A,function(){_._removeData(this)});_.reRender()},remove:function(_){var $=this,A=this.options,B=$.getRow(_);$._removeData(_);$.reRender()},deleteRange:function(A){var _=this,B=this.options;$.each(A,function(){_._deleteData(this)});_.reRender()},deleteRow:function(_){var $=this,A=this.options,B=$.getRow(_);if(!B)return;$._deleteData(B);$.reRender();$.isDataChanged=true},_deleteData:function(_){var $=this,A=this.options,D=$.getRow(_);D[A.statusName]="delete";if(A.tree){var B=$.getChildren(D,true);if(B)for(var E=0,C=B.length;E<C;E++)B[E][A.statusName]="delete"}$.deletedRows=$.deletedRows||[];$.deletedRows.push(D);$._removeSelected(D)},updateCell:function(G,J,H){var _=this,I=this.options,K,A,L;if(typeof(G)=="string"){for(var F=0,C=_.columns.length;F<C;F++)if(_.columns[F].name==G)_.updateCell(F,J,H);return}if(typeof(G)=="number"){K=_.columns[G];L=_.getRow(H);A=_.getCellObj(L,K)}else if(typeof(G)=="object"&&G["__id"]){K=G;L=_.getRow(H);A=_.getCellObj(L,K)}else{A=G;var B=A.id.split("|"),D=B[B.length-1];K=_._columns[D];var E=$(A).parent();L=L||_.getRow(E[0])}if(J!=null&&K.name){_._setValueByName(L,K.name,J);if(L[I.statusName]!="add")L[I.statusName]="update";_.isDataChanged=true}_.reRender({rowdata:L,column:K})},addRows:function(C,E,B,A){var _=this,D=this.options;$(C).each(function(){_.addRow(this,E,B,A)})},_createRowid:function(){return"r"+(1000+this.recordNumber)},_isRowId:function($){return($ in this.records)},_addNewRecord:function(C,A,D){var $=this,_=this.options;$.recordNumber++;C["__id"]=$._createRowid();C["__previd"]=A;if(A&&A!=-1){var F=$.records[A];if(F["__nextid"]&&F["__nextid"]!=-1){var E=$.records[F["__nextid"]];if(E)E["__previd"]=C["__id"]}F["__nextid"]=C["__id"];C["__index"]=F["__index"]+1}else C["__index"]=0;if(_.tree){if(D&&D!=-1){var B=$.records[D];C["__pid"]=D;C["__level"]=B["__level"]+1}else{C["__pid"]=-1;C["__level"]=1}C["__hasChildren"]=C[_.tree.childrenName]?true:false}C[_.statusName]=C[_.statusName]||"nochanged";$.rows[C["__index"]]=C;$.records[C["__id"]]=C;return C},_getRows:function(B){var $=this,A=this.options,_=[];function C($){if(!$||!$.length)return;for(var E=0,D=$.length;E<D;E++){var B=$[E];_.push(B);if(B[A.tree.childrenName])C(B[A.tree.childrenName])}}C(B);return _},_updateGridData:function(){var $=this,A=this.options;$.recordNumber=0;$.rows=[];$.records={};var _=-1;function B(C,F){if(!C||!C.length)return;for(var G=0,E=C.length;G<E;G++){var D=C[G];$.formatRecord(D);if(D[A.statusName]=="delete")continue;$._addNewRecord(D,_,F);_=D["__id"];if(D["__hasChildren"])B(D[A.tree.childrenName],D["__id"])}}B($.currentData[A.root],-1);return $.rows},_moveData:function(F,B,A){var D=this,E=this.options,_=D.getRow(F),I=D.getRow(B),C,G,H=D._getParentChildren(_);C=$.inArray(_,H);H.splice(C,1);H=D._getParentChildren(I);G=$.inArray(I,H);H.splice(G+(A?1:0),0,_)},move:function(A,_,$){this._moveData(A,_,$);this.reRender()},moveRange:function(B,_,$){for(var A in B)this._moveData(B[A],_,$);this.reRender()},up:function(C){var _=this,D=this.options,E=_.getRow(C),F=_._getParentChildren(E),B=$.inArray(E,F);if(B==-1||B==0)return;var A=_.getSelected();_.move(E,F[B-1],false);_.select(A)},down:function(C){var _=this,D=this.options,E=_.getRow(C),F=_._getParentChildren(E),B=$.inArray(E,F);if(B==-1||B==F.length-1)return;var A=_.getSelected();_.move(E,F[B+1],true);_.select(A)},addRow:function(F,E,A,_){var $=this,B=this.options;F=F||{};$._addData(F,_,E,A);$.reRender();F[B.statusName]="add";if(B.tree){var C=$.getChildren(F,true);if(C)for(var G=0,D=C.length;G<D;G++)C[G][B.statusName]="add"}$.isDataChanged=true;B.total=B.total?(B.total+1):1;B.pageCount=Math.ceil(B.total/B.pageSize);$._buildPager();$.trigger("SysGridHeightChanged");$.trigger("afterAddRow",[F]);return F},updateRow:function(A,B){var _=this,C=this.options,D=_.getRow(A);_.isDataChanged=true;$.extend(D,B||{});if(D[C.statusName]!="add")D[C.statusName]="update";_.reRender.ligerDefer(_,10,[{rowdata:D}]);return D},setCellEditing:function(G,E,A){var _=this,D=this.options,C=_.getCellObj(G,E),H=A?"addClass":"removeClass";$(C)[H]("l-grid-row-cell-editing");if(G["__id"]!=0){var F=$(_.getRowObj(G["__id"])).prev();if(!F.length)return;var I=_.getRow(F[0]),B=_.getCellObj(I,E);if(!B)return;$(B)[H]("l-grid-row-cell-editing-topcell")}if(E["__previd"]!=-1&&E["__previd"]!=null){B=$(_.getCellObj(G,E)).prev();$(B)[H]("l-grid-row-cell-editing-leftcell")}},reRender:function(A){var _=this,D=this.options;A=A||{};var F=A.rowdata,E=A.column;if(E&&(E.isdetail||E.ischeckbox))return;if(F&&F[D.statusName]=="delete")return;if(F&&E){var C=_.getCellObj(F,E);$(C).html(_._getCellHtml(F,E));if(!E.issystem)_.setCellEditing(F,E,false)}else if(F)$(_.columns).each(function(){_.reRender({rowdata:F,column:this})});else if(E){for(var G in _.records)_.reRender({rowdata:_.records[G],column:E});for(var H=0;H<_.totalNumber;H++){var B=document.getElementById(_.id+"|total"+H+"|"+E["__id"]);$("div:first",B).html(_._getTotalCellContent(E,_.groups&&_.groups[H]?_.groups[H]:_.currentData[D.root]))}}else _._showData()},getData:function(B,A){var _=this,C=this.options,D=[];if(A==undefined)A=true;for(var F in _.records){var E=$.extend(true,{},_.records[F]);if(E[C.statusName]==B||B==undefined)D.push(_.formatRecord(E,A))}return D},formatRecord:function(_,$){delete _["__id"];delete _["__previd"];delete _["__nextid"];delete _["__index"];if(this.options.tree){delete _["__pid"];delete _["__level"];delete _["__hasChildren"]}if($)delete _[this.options.statusName];return _},getUpdated:function(){return this.getData("update",true)},getDeleted:function(){return this.deletedRows},getAdded:function(){return this.getData("add",true)},getChanges:function(){var _=this,A=this.options,B=[];if(this.deletedRows)$(this.deletedRows).each(function(){var A=$.extend(true,{},this);B.push(_.formatRecord(A,true))});$.merge(B,_.getUpdated());$.merge(B,_.getAdded());return B},getColumn:function($){var _=this,B=this.options;if(typeof $=="string"){if(_._isColumnId($))return _._columns[$];else return _.columns[parseInt($)]}else if(typeof($)=="number")return _.columns[$];else if(typeof $=="object"&&$.nodeType==1){var A=$.id.split("|"),C=A[A.length-1];return _._columns[C]}return $},getColumnType:function(_){var $=this,A=this.options;for(i=0;i<$.columns.length;i++)if($.columns[i].name==_){if($.columns[i].type)return $.columns[i].type;return"string"}return null},isTotalSummary:function(){var $=this,_=this.options;for(var A=0;A<$.columns.length;A++)if($.columns[A].totalSummary)return true;return false},getColumns:function(A){var _=this,C=this.options,D=[];for(var $ in _._columns){var B=_._columns[$];if(A!=undefined){if(B["__level"]==A)D.push(B)}else if(B["__leaf"])D.push(B)}return D},changeSort:function(C,A){var $=this,B=this.options;if($.loading)return true;if(B.dataAction=="local"){var _=$.getColumnType(C);if(!$.sortedData)$.sortedData=$.filteredData;if(!$.sortedData||!$.sortedData[B.root])return;if(B.sortName==C)$.sortedData[B.root].reverse();else $.sortedData[B.root].sort(function(A,B){return $._compareData(A,B,C,_)});if(B.usePager)$.currentData=$._getCurrentPageData($.sortedData);else $.currentData=$.sortedData;$._showData()}B.sortName=C;B.sortOrder=A;if(B.dataAction=="server")$.loadData(B.where)},changePage:function(B){var _=this,A=this.options;if(_.loading)return true;if(A.dataAction!="local"&&_.isDataChanged&&!confirm(A.isContinueByDataChanged))return false;A.pageCount=parseInt($(".pcontrol span",_.toolbar).html());switch(B){case"first":if(A.page==1)return;A.newPage=1;break;case"prev":if(A.page==1)return;if(A.page>1)A.newPage=parseInt(A.page)-1;break;case"next":if(A.page>=A.pageCount)return;A.newPage=parseInt(A.page)+1;break;case"last":if(A.page>=A.pageCount)return;A.newPage=A.pageCount;break;case"input":var C=parseInt($(".pcontrol input",_.toolbar).val());if(isNaN(C))C=1;if(C<1)C=1;else if(C>A.pageCount)C=A.pageCount;$(".pcontrol input",_.toolbar).val(C);A.newPage=C;break}if(A.newPage==A.page)return false;if(A.newPage==1){$(".l-bar-btnfirst span",_.toolbar).addClass("l-disabled");$(".l-bar-btnprev span",_.toolbar).addClass("l-disabled")}else{$(".l-bar-btnfirst span",_.toolbar).removeClass("l-disabled");$(".l-bar-btnprev span",_.toolbar).removeClass("l-disabled")}if(A.newPage==A.pageCount){$(".l-bar-btnlast span",_.toolbar).addClass("l-disabled");$(".l-bar-btnnext span",_.toolbar).addClass("l-disabled")}else{$(".l-bar-btnlast span",_.toolbar).removeClass("l-disabled");$(".l-bar-btnnext span",_.toolbar).removeClass("l-disabled")}_.trigger("changePage",[A.newPage]);if(A.dataAction=="server")_.loadData(A.where);else{_.currentData=_._getCurrentPageData(_.filteredData);_._showData()}},getSelectedRow:function(){for(var _ in this.selected){var $=this.selected[_];if($["__id"]in this.records)return $}return null},getSelectedRows:function(){var $=[];for(var A in this.selected){var _=this.selected[A];if(_["__id"]in this.records)$.push(_)}return $},getSelectedRowObj:function(){for(var _ in this.selected){var $=this.selected[_];if($["__id"]in this.records)return this.getRowObj($)}return null},getSelectedRowObjs:function(){var $=[];for(var A in this.selected){var _=this.selected[A];if(_["__id"]in this.records)$.push(this.getRowObj(_))}return $},getCellObj:function($,_){var A=this.getRow($);_=this.getColumn(_);return document.getElementById(this._getCellDomId(A,_))},getRowObj:function(_,B){var $=this,A=this.options;if(_==null)return null;if(typeof(_)=="string"){if($._isRowId(_))return document.getElementById($.id+(B?"|1|":"|2|")+_);else return document.getElementById($.id+(B?"|1|":"|2|")+$.rows[parseInt(_)]["__id"])}else if(typeof(_)=="number")return document.getElementById($.id+(B?"|1|":"|2|")+$.rows[_]["__id"]);else if(typeof(_)=="object"&&_["__id"])return $.getRowObj(_["__id"],B);return _},getRow:function(_){var $=this,A=this.options;if(_==null)return null;if(typeof(_)=="string"){if($._isRowId(_))return $.records[_];else return $.rows[parseInt(_)]}else if(typeof(_)=="number")return $.rows[parseInt(_)];else if(typeof(_)=="object"&&_.nodeType==1&&!_["__id"])return $._getRowByDomId(_.id);return _},_setColumnVisible:function(C,A){var _=this,B=this.options;if(!A){C._hide=false;document.getElementById(C["__domid"]).style.display="";if(C["__pid"]!=-1){var $=_._columns[C["__pid"]];if($._hide){document.getElementById($["__domid"]).style.display="";this._setColumnVisible($,A)}}}else{C._hide=true;document.getElementById(C["__domid"]).style.display="none";if(C["__pid"]!=-1){var D=true,$=this._columns[C["__pid"]];for(var E=0;$&&E<$.columns.length;E++)if(!$.columns[E]._hide){D=false;break}if(D){$._hide=true;document.getElementById($["__domid"]).style.display="none";this._setColumnVisible($,A)}}}},toggleCol:function(_,E,A){var B=this,I=this.options,J;if(typeof(_)=="number")J=B.columns[_];else if(typeof(_)=="object"&&_["__id"])J=_;else if(typeof(_)=="string")if(B._isColumnId(_))J=B._columns[_];else{$(B.columns).each(function(){if(this.name==_)B.toggleCol(this,E,A)});return}if(!J)return;var L=J["__leafindex"],G=document.getElementById(J["__domid"]);if(!G)return;G=$(G);var C=[];for(var H in B.rows){var K=B.getCellObj(B.rows[H],J);if(K)C.push(K)}for(H=0;H<B.totalNumber;H++){var F=document.getElementById(B.id+"|total"+H+"|"+J["__id"]);if(F)C.push(F)}var D=J._width;if(E&&J._hide){if(J.frozen)B.f.gridtablewidth+=(parseInt(D)+1);else B.gridtablewidth+=(parseInt(D)+1);B._setColumnVisible(J,false);$(C).show()}else if(!E&&!J._hide){if(J.frozen)B.f.gridtablewidth-=(parseInt(D)+1);else B.gridtablewidth-=(parseInt(D)+1);B._setColumnVisible(J,true);$(C).hide()}if(J.frozen){$("div:first",B.f.gridheader).width(B.f.gridtablewidth);$("div:first",B.f.gridbody).width(B.f.gridtablewidth)}else{$("div:first",B.gridheader).width(B.gridtablewidth+40);$("div:first",B.gridbody).width(B.gridtablewidth)}B._updateFrozenWidth();if(!A)$(":checkbox[columnindex="+L+"]",B.popup).each(function(){this.checked=E;if($.fn.ligerCheckBox){var _=$(this).ligerGetCheckBoxManager();if(_)_.updateStyle()}})},setColumnWidth:function(_,G){var A=this,I=this.options;if(!G)return;G=parseInt(G,10);var J;if(typeof(_)=="number")J=A.columns[_];else if(typeof(_)=="object"&&_["__id"])J=_;else if(typeof(_)=="string")if(A._isColumnId(_))J=A._columns[_];else{$(A.columns).each(function(){if(this.name==_)A.setColumnWidth(this,G)});return}if(!J)return;var E=I.minColumnWidth;if(J.minWidth)E=J.minWidth;G=G<E?E:G;var C=G-J._width;if(A.trigger("beforeChangeColumnWidth",[J,G])==false)return;J._width=G;if(J.frozen){A.f.gridtablewidth+=C;$("div:first",A.f.gridheader).width(A.f.gridtablewidth);$("div:first",A.f.gridbody).width(A.f.gridtablewidth)}else{A.gridtablewidth+=C;$("div:first",A.gridheader).width(A.gridtablewidth+40);$("div:first",A.gridbody).width(A.gridtablewidth)}$(document.getElementById(J["__domid"])).css("width",G);var B=[];for(var L in A.records){var K=A.getCellObj(A.records[L],J);if(K)B.push(K);if(!A.enabledDetailEdit()&&A.editors[L]&&A.editors[L][J["__id"]]){var F=A.editors[L][J["__id"]];if(F.editor.resize)F.editor.resize(F.input,G,F.container.height(),F.editParm)}}for(var H=0;H<A.totalNumber;H++){var D=document.getElementById(A.id+"|total"+H+"|"+J["__id"]);if(D)B.push(D)}$(B).css("width",G).find("> div.l-grid-row-cell-inner:first").css("width",G-8);A._updateFrozenWidth();A._updateHorizontalScrollStatus.ligerDefer(A,10);A.trigger("afterChangeColumnWidth",[J,G])},changeHeaderText:function(A,F){var _=this,B=this.options,C;if(typeof(A)=="number")C=_.columns[A];else if(typeof(A)=="object"&&A["__id"])C=A;else if(typeof(A)=="string")if(_._isColumnId(A))C=_._columns[A];else{$(_.columns).each(function(){if(this.name==A)_.changeHeaderText(this,F)});return}if(!C)return;var E=C["__leafindex"],D=document.getElementById(C["__domid"]);$(".l-grid-hd-cell-text",D).html(F);if(B.allowHideColumn)$(":checkbox[columnindex="+E+"]",_.popup).parent().next().html(F)},changeCol:function(E,_,G){var A=this,K=this.options;if(!E||!_)return;var H=A.getColumn(E),J=A.getColumn(_);H.frozen=J.frozen;var B,D,L=H["__pid"]==-1?K.columns:A._columns[H["__pid"]].columns,F=J["__pid"]==-1?K.columns:A._columns[J["__pid"]].columns;B=$.inArray(H,L);D=$.inArray(J,F);var C=L==F,I=H["__level"]==J["__level"];F.splice(D+(G?1:0),0,H);if(!C)L.splice(B,1);else if(G)L.splice(B,1);else L.splice(B+1,1);A._setColumns(K.columns);A.reRender()},collapseDetail:function(A){var _=this,C=this.options,E=_.getRow(A);if(!E)return;for(var G=0,D=_.columns.length;G<D;G++)if(_.columns[G].isdetail){var F=_.getRowObj(E),B=_.getCellObj(E,_.columns[G]);$(F).next("tr.l-grid-detailpanel").hide();$(".l-grid-row-cell-detailbtn:first",B).removeClass("l-open");_.trigger("SysGridHeightChanged");return}},extendDetail:function(A){var _=this,C=this.options,E=_.getRow(A);if(!E)return;for(var G=0,D=_.columns;G<D;G++)if(_.columns[G].isdetail){var F=_.getRowObj(E),B=_.getCellObj(E,_.columns[G]);$(F).next("tr.l-grid-detailpanel").show();$(".l-grid-row-cell-detailbtn:first",B).addClass("l-open");_.trigger("SysGridHeightChanged");return}},getParent:function(_){var $=this,A=this.options;if(!A.tree)return null;var B=$.getRow(_);if(!B)return null;if(B["__pid"]in $.records)return $.records[B["__pid"]];else return null},getChildren:function(A,E){var $=this,B=this.options;if(!B.tree)return null;var C=$.getRow(A);if(!C)return null;var _=[];function D($){if($[B.tree.childrenName])for(var F=0,C=$[B.tree.childrenName].length;F<C;F++){var A=$[B.tree.childrenName][F];if(A["__status"]=="delete")continue;_.push(A);if(E)D(A)}}D(C);return _},isLeaf:function(_){var $=this,A=this.options,B=$.getRow(_);if(!B)return;return B["__hasChildren"]?false:true},hasChildren:function(_){var $=this,A=this.options,B=this.getRow(_);if(!B)return;return(B[A.tree.childrenName]&&B[A.tree.childrenName].length)?true:false},existRecord:function($){for(var _ in this.records)if(this.records[_]==$)return true;return false},_removeSelected:function(F){var _=this,B=this.options;if(B.tree){var C=_.getChildren(F,true);if(C)for(var G=0,E=C.length;G<E;G++){var D=$.inArray(C[G],_.selected);if(D!=-1)_.selected.splice(D,1)}}var A=$.inArray(F,_.selected);if(A!=-1)_.selected.splice(A,1)},_getParentChildren:function(_){var $=this,A=this.options,B=$.getRow(_),C;if(A.tree&&$.existRecord(B)&&B["__pid"]in $.records)C=$.records[B["__pid"]][A.tree.childrenName];else C=$.currentData[A.root];return C},_removeData:function(C){var _=this,B=this.options,D=_._getParentChildren(C),A=$.inArray(C,D);if(A!=-1)D.splice(A,1);_._removeSelected(C)},_addData:function(F,D,E,B){var _=this,C=this.options;if(!_.currentData)_.currentData={};if(!_.currentData[C.root])_.currentData[C.root]=[];var G=_.currentData[C.root];if(E){if(C.tree)if(D)G=D[C.tree.childrenName];else if(E["__pid"]in _.records)G=_.records[E["__pid"]][C.tree.childrenName];var A=$.inArray(E,G);G.splice(A==-1?-1:A+(B?0:1),0,F)}else{if(C.tree&&D)G=D[C.tree.childrenName];G.push(F)}},_appendData:function(D,B,C,_){var $=this,A=this.options;D[A.statusName]="update";$._removeData(D);$._addData(D,B,C,_)},appendRange:function(F,C,D,A){var _=this,B=this.options,E=false;$.each(F,function(B,$){if($["__id"]&&_.existRecord($)){if(_.isLeaf(C))_.upgrade(C);_._appendData($,C,D,A);E=true}else _.appendRow($,C,D,A)});if(E)_.reRender()},appendRow:function(E,C,D,A){var _=this,B=this.options;if($.isArray(E)){_.appendRange(E,C,D,A);return}if(E["__id"]&&_.existRecord(E)){_._appendData(E,C,D,A);_.reRender();return}if(C&&_.isLeaf(C))_.upgrade(C);_.addRow(E,D,A?true:false,C)},upgrade:function(A){var _=this,B=this.options,C=_.getRow(A);if(!C||!B.tree)return;C[B.tree.childrenName]=C[B.tree.childrenName]||[];C["__hasChildren"]=true;var D=[_.getRowObj(C)];if(_.enabledFrozen())D.push(_.getRowObj(C,true));$("> td > div > .l-grid-tree-space:last",D).addClass("l-grid-tree-link l-grid-tree-link-open")},demotion:function(A){var _=this,B=this.options,E=_.getRow(A);if(!E||!B.tree)return;var F=[_.getRowObj(E)];if(_.enabledFrozen())F.push(_.getRowObj(E,true));$("> td > div > .l-grid-tree-space:last",F).removeClass("l-grid-tree-link l-grid-tree-link-open l-grid-tree-link-close");if(_.hasChildren(E)){var C=_.getChildren(E);for(var G=0,D=C.length;G<D;G++)_.deleteRow(C[G])}E["__hasChildren"]=false},collapse:function(B){var _=this,C=this.options,D=_.getRowObj(B),A=$(".l-grid-tree-link",D);if(A.hasClass("l-grid-tree-link-close"))return;_.toggle(B)},expand:function(B){var _=this,C=this.options,D=_.getRowObj(B),A=$(".l-grid-tree-link",D);if(A.hasClass("l-grid-tree-link-open"))return;_.toggle(B)},toggle:function(G){if(!G)return;var _=this,I=this.options,L=_.getRow(G),J=[_.getRowObj(L)];if(_.enabledFrozen())J.push(_.getRowObj(L,true));var F=L["__level"],M,H=$(".l-grid-tree-link:first",J),K=true;_.collapsedRows=_.collapsedRows||[];if(H.hasClass("l-grid-tree-link-close")){H.removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open");M=$.inArray(L,_.collapsedRows);if(M!=-1)_.collapsedRows.splice(M,1)}else{K=false;H.addClass("l-grid-tree-link-close").removeClass("l-grid-tree-link-open");M=$.inArray(L,_.collapsedRows);if(M==-1)_.collapsedRows.push(L)}var B=_.getChildren(L,true);for(var E=0,D=B.length;E<D;E++){var A=B[E],C=$([_.getRowObj(A["__id"])]);if(_.enabledFrozen())C=C.add(_.getRowObj(A["__id"],true));if(K){$(".l-grid-tree-link",C).removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open");C.show()}else{$(".l-grid-tree-link",C).removeClass("l-grid-tree-link-open").addClass("l-grid-tree-link-close");C.hide()}}},_bulid:function(){var $=this;$._clearGrid();$._initBuildHeader();$._initHeight();$._initFootbar();$._buildPager();$._setEvent()},_setColumns:function(_){var $=this;$._initColumns();$._initBuildGridHeader();$._initBuildPopup()},_initBuildHeader:function(){var _=this,A=this.options;if(A.title){$(".l-panel-header-text",_.header).html(A.title);if(A.headerImg)_.header.append("<img src='"+A.headerImg+"' />").addClass("l-panel-header-hasicon")}else _.header.hide();if(A.toolbar){if($.fn.ligerToolBar)_.toolbarManager=_.topbar.ligerToolBar(A.toolbar)}else _.topbar.parent().remove()},_createColumnId:function($){if($.id!=null&&$.id!="")return $.id.toString();return"c"+(100+this._columnCount)},_isColumnId:function($){return($ in this._columns)},_initColumns:function(){var A=this,I=this.options;A._columns={};A._columnCount=0;A._columnLeafCount=0;A._columnMaxLevel=1;if(!I.columns)return;function B($,_){for(var A in _)if(_[A]in $)delete $[_[A]]}function K(E,C,G,D){B(E,["__id","__pid","__previd","__nextid","__domid","__leaf","__leafindex","__level","__colSpan","__rowSpan"]);if(C>A._columnMaxLevel)A._columnMaxLevel=C;A._columnCount++;E["__id"]=A._createColumnId(E);E["__domid"]=A.id+"|hcell|"+E["__id"];A._columns[E["__id"]]=E;if(!E.columns||!E.columns.length)E["__leafindex"]=A._columnLeafCount++;E["__level"]=C;E["__pid"]=G;E["__previd"]=D;if(!E.columns||!E.columns.length){E["__leaf"]=true;return 1}var $=0,H=-1;for(var I=0,F=E.columns.length;I<F;I++){var _=E.columns[I];$+=K(_,C+1,E["__id"],H);H=_["__id"]}E["__leafcount"]=$;return $}var D=-1;if(I.rownumbers){var J=A.enabledGroup()?false:I.frozen&&I.frozenRownumbers,C={isrownumber:true,issystem:true,width:I.rownumbersColWidth,frozen:J};K(C,1,-1,D);D=C["__id"]}if(A.enabledDetail()){var E=A.enabledGroup()?false:I.frozen&&I.frozenDetail,C={isdetail:true,issystem:true,width:I.detailColWidth,frozen:E};K(C,1,-1,D);D=C["__id"]}if(A.enabledCheckbox()){var _=A.enabledGroup()?false:I.frozen&&I.frozenCheckbox,C={ischeckbox:true,issystem:true,width:I.detailColWidth,frozen:_};K(C,1,-1,D);D=C["__id"]}for(var G=0,F=I.columns.length;G<F;G++){C=I.columns[G];K(C,1,-1,D);D=C["__id"]}for(var H in A._columns){C=A._columns[H];if(C["__leafcount"]>1)C["__colSpan"]=C["__leafcount"];if(C["__leaf"]&&C["__level"]!=A._columnMaxLevel)C["__rowSpan"]=A._columnMaxLevel-C["__level"]+1}A.columns=A.getColumns();$(A.columns).each(function(_,$){$.columnname=$.name;$.columnindex=_;$.type=$.type||"string";$.islast=_==A.columns.length-1;$.isSort=$.isSort==false?false:true;$.frozen=$.frozen?true:false;$._width=A._getColumnWidth($);$._hide=$.hide?true:false})},_getColumnWidth:function(E){var A=this,D=this.options;if(E._width)return E._width;var B=E.width||D.columnWidth;if(!B||B=="auto"){var _=0,C=0;$(A.columns).each(function(F,B){var $=B.width||D.columnWidth,E=(!$||$=="auto")?true:false;if(E)_++;else C+=(parseFloat(A._getColumnWidth(B))+1)});B=parseFloat((A.grid.width()-C)/_)-1}if(typeof(B)=="string"&&B.indexOf("%")>0)E._width=B=parseInt(parseInt(B)*0.01*(A.grid.width()-A.columns.length));if(E.minWidth&&B<E.minWidth)B=E.minWidth;if(E.maxWidth&&B>E.maxWidth)B=E.maxWidth;return B},_createHeaderCell:function(D){var _=this,C=this.options,F=$("<td class='l-grid-hd-cell'><div class='l-grid-hd-cell-inner'><span class='l-grid-hd-cell-text'></span></div></td>");F.attr("id",D["__domid"]);if(!D["__leaf"])F.addClass("l-grid-hd-cell-mul");if(D.columnindex==_.columns.length-1)F.addClass("l-grid-hd-cell-last");if(D.isrownumber){F.addClass("l-grid-hd-cell-rownumbers");F.html("<div class='l-grid-hd-cell-inner'></div>")}if(D.ischeckbox){F.addClass("l-grid-hd-cell-checkbox");F.html("<div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text l-grid-hd-cell-btn-checkbox'></div></div>")}if(D.isdetail){F.addClass("l-grid-hd-cell-detail");F.html("<div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text l-grid-hd-cell-btn-detail'></div></div>")}if(D.heightAlign)$(".l-grid-hd-cell-inner:first",F).css("textAlign",D.heightAlign);if(D["__colSpan"])F.attr("colSpan",D["__colSpan"]);if(D["__rowSpan"]){F.attr("rowSpan",D["__rowSpan"]);F.height(C.headerRowHeight*D["__rowSpan"]);var A=(C.headerRowHeight*D["__rowSpan"]-C.headerRowHeight)/2-5;$(".l-grid-hd-cell-inner:first",F).css("paddingTop",A)}else F.height(C.headerRowHeight);if(D["__leaf"]){F.width(D["_width"]);F.attr("columnindex",D["__leafindex"])}var B=F.height();if(!D["__rowSpan"]&&B>10)$(">div:first",F).height(B);if(D._hide)F.hide();if(D.name)F.attr({columnname:D.name});var E="";if(D.display&&D.display!="")E=D.display;else if(D.headerRender)E=D.headerRender(D);else E="&nbsp;";$(".l-grid-hd-cell-text:first",F).html(E);if(!D.issystem&&D["__leaf"]&&D.resizable!==false&&$.fn.ligerResizable&&C.allowAdjustColWidth)_.colResizable[D["__id"]]=F.ligerResizable({handles:"e",onStartResize:function(A,$){this.proxy.hide();_.draggingline.css({height:_.body.height(),top:0,left:$.pageX-_.grid.offset().left+parseInt(_.body[0].scrollLeft)}).show()},onResize:function(B,A){_.colresizing=true;_.draggingline.css({left:A.pageX-_.grid.offset().left+parseInt(_.body[0].scrollLeft)});$("body").add(F).css("cursor","e-resize")},onStopResize:function(A){_.colresizing=false;$("body").add(F).css("cursor","default");_.draggingline.hide();_.setColumnWidth(D,parseInt(D._width)+A.diffX);return false}});return F},_initBuildGridHeader:function(){var _=this,D=this.options;_.gridtablewidth=0;_.f.gridtablewidth=0;if(_.colResizable){for(var H in _.colResizable)_.colResizable[H].destroy();_.colResizable=null}_.colResizable={};$("tbody:first",_.gridheader).html("");$("tbody:first",_.f.gridheader).html("");for(var A=1;A<=_._columnMaxLevel;A++){var E=_.getColumns(A),C=A==_._columnMaxLevel,B=$("<tr class='l-grid-hd-row'></tr>"),F=$("<tr class='l-grid-hd-row'></tr>");if(!C)B.add(F).addClass("l-grid-hd-mul");$("tbody:first",_.gridheader).append(B);$("tbody:first",_.f.gridheader).append(F);$(E).each(function(C,A){(A.frozen?F:B).append(_._createHeaderCell(A));if(A["__leaf"]){var $=A["_width"];if(!A.frozen)_.gridtablewidth+=(parseInt($)?parseInt($):0)+1;else _.f.gridtablewidth+=(parseInt($)?parseInt($):0)+1}})}if(_._columnMaxLevel>0){var G=D.headerRowHeight*_._columnMaxLevel;_.gridheader.add(_.f.gridheader).height(G);if(D.rownumbers&&D.frozenRownumbers)_.f.gridheader.find("td:first").height(G)}_._updateFrozenWidth();$("div:first",_.gridheader).width(_.gridtablewidth+40)},_initBuildPopup:function(){var _=this,A=this.options;$(":checkbox",_.popup).unbind();$("tbody tr",_.popup).remove();$(_.columns).each(function(D,B){if(B.issystem)return;if(B.isAllowHide==false)return;var A="checked=\"checked\"";if(B._hide)A="";var C=B.display;$("tbody",_.popup).append("<tr><td class=\"l-column-left\"><input type=\"checkbox\" "+A+" class=\"l-checkbox\" columnindex=\""+D+"\"/></td><td class=\"l-column-right\">"+C+"</td></tr>")});if($.fn.ligerCheckBox)$("input:checkbox",_.popup).ligerCheckBox({onBeforeClick:function(B){if(!B.checked)return true;if($("input:checked",_.popup).length<=A.minColToggle)return false;return true}});if(A.allowHideColumn){$("tr",_.popup).hover(function(){$(this).addClass("l-popup-row-over")},function(){$(this).removeClass("l-popup-row-over")});var B=function(){if($("input:checked",_.popup).length+1<=A.minColToggle)return false;_.toggleCol(parseInt($(this).attr("columnindex")),this.checked,true)};if($.fn.ligerCheckBox)$(":checkbox",_.popup).bind("change",B);else $(":checkbox",_.popup).bind("click",B)}},_initHeight:function(){var $=this,_=this.options;if(_.height=="auto"){$.gridbody.height("auto");$.f.gridbody.height("auto")}if(_.width)$.grid.width(_.width);$._onResize.call($)},_initFootbar:function(){var _=this,C=this.options;if(C.usePager){var B="",A=-1;$(C.pageSizeOptions).each(function(D,$){var _="";if(C.pageSize==$)A=D;B+="<option value='"+$+"' "+_+" >"+$+"</option>"});$(".l-bar-selectpagesize",_.toolbar).append("<select name='rp'>"+B+"</select>");if(A!=-1)$(".l-bar-selectpagesize select",_.toolbar)[0].selectedIndex=A;if(C.switchPageSizeApplyComboBox&&$.fn.ligerComboBox)$(".l-bar-selectpagesize select",_.toolbar).ligerComboBox({onBeforeSelect:function(){if(C.url&&_.isDataChanged&&!confirm(C.isContinueByDataChanged))return false;return true},width:45})}else _.toolbar.hide()},_searchData:function(B,D){var _=this,A=this.options,$=new Array();for(var C=0;C<B.length;C++)if(D(B[C],C))$[$.length]=B[C];return $},_clearGrid:function(){var _=this,B=this.options;for(var C in _.rows){var A=$(_.getRowObj(_.rows[C]));if(_.enabledFrozen())A=A.add(_.getRowObj(_.rows[C],true));A.unbind()}_.gridbody.html("");_.f.gridbody.html("");_.recordNumber=0;_.records={};_.rows=[];_.selected=[];_.totalNumber=0;_.editorcounter=0},_fillGridBody:function(G,I){var _=this,F=this.options,H=["<div class=\"l-grid-body-inner\"><table class=\"l-grid-body-table\" cellpadding=0 cellspacing=0><tbody>"];if(_.enabledGroup()){var J=[],A=[];_.groups=A;for(var C in G){var E=G[C],B=E[F.groupColumnName],D=$.inArray(B,J);if(D==-1){J.push(B);D=J.length-1;A.push([])}A[D].push(E)}$(A).each(function(B,$){if(A.length==1)H.push("<tr class=\"l-grid-grouprow l-grid-grouprow-last l-grid-grouprow-first\"");if(B==A.length-1)H.push("<tr class=\"l-grid-grouprow l-grid-grouprow-last\"");else if(B==0)H.push("<tr class=\"l-grid-grouprow l-grid-grouprow-first\"");else H.push("<tr class=\"l-grid-grouprow\"");H.push(" groupindex\"="+B+"\" >");H.push("<td colSpan=\""+_.columns.length+"\" class=\"l-grid-grouprow-cell\">");H.push("<span class=\"l-grid-group-togglebtn\">&nbsp;&nbsp;&nbsp;&nbsp;</span>");if(F.groupRender)H.push(F.groupRender(J[B],$,F.groupColumnDisplay));else H.push(F.groupColumnDisplay+":"+J[B]);H.push("</td>");H.push("</tr>");H.push(_._getHtmlFromData($,I));if(_.isTotalSummary())H.push(_._getTotalSummaryHtml($,"l-grid-totalsummary-group",I))})}else H.push(_._getHtmlFromData(G,I));H.push("</tbody></table></div>");(I?_.f.gridbody:_.gridbody).html(H.join(""));if(!_.enabledGroup())_._bulidTotalSummary(I);$("> div:first",_.gridbody).width(_.gridtablewidth);_._onResize()},_showData:function(){var _=this,B=this.options;_.changedCells={};var C=_.currentData[B.root];if(B.usePager){if(B.dataAction=="server"&&_.data&&_.data[B.record])B.total=_.data[B.record];else if(_.filteredData&&_.filteredData[B.root])B.total=_.filteredData[B.root].length;else if(_.data&&_.data[B.root])B.total=_.data[B.root].length;else if(C)B.total=C.length;B.page=B.newPage;if(!B.total)B.total=0;if(!B.page)B.page=1;B.pageCount=Math.ceil(B.total/B.pageSize);if(!B.pageCount)B.pageCount=1;_._buildPager()}$(".l-bar-btnloading:first",_.toolbar).removeClass("l-bar-btnloading");if(_.trigger("beforeShowData",[_.currentData])==false)return;_._clearGrid();_.isDataChanged=false;if(!C||!C.length){_.gridview.addClass("l-grid-empty");$("<div></div>").addClass("l-grid-body-inner").appendTo(_.gridbody).css({width:_.gridheader.find(">div:first").width(),height:_.gridbody.height()});_._onResize.ligerDefer(_,50);return}else _.gridview.removeClass("l-grid-empty");$(".l-bar-btnload:first span",_.toolbar).removeClass("l-disabled");_._updateGridData();if(_.enabledFrozen())_._fillGridBody(_.rows,true);_._fillGridBody(_.rows,false);_.trigger("SysGridHeightChanged");if(B.totalRender){$(".l-panel-bar-total",_.element).remove();$(".l-panel-bar",_.element).before("<div class=\"l-panel-bar-total\">"+B.totalRender(_.data,_.filteredData)+"</div>")}if(B.mouseoverRowCssClass)for(var D in _.rows){var A=$(_.getRowObj(_.rows[D]));if(_.enabledFrozen())A=A.add(_.getRowObj(_.rows[D],true));A.bind("mouseover.gridrow",function(){_._onRowOver(this,true)}).bind("mouseout.gridrow",function(){_._onRowOver(this,false)})}_._fixHeight();_.gridbody.trigger("scroll.grid");_.trigger("afterShowData",[_.currentData])},_fixHeight:function(){var _=this,C=this.options;if(C.fixedCellHeight||!C.frozen)return;var F,H;for(var I in _.columns){var D=_.columns[I];if(F&&H)break;if(D.frozen&&!F){F=D;continue}if(!D.frozen&&!H){H=D;continue}}if(!F||!H)return;for(var G in _.records){var E=_.getCellObj(G,F),B=_.getCellObj(G,H),A=Math.max($(E).height(),($(B).height()));$(E).add(B).height(A)}},_getRowDomId:function(_,$){return this.id+"|"+($?"1":"2")+"|"+_["__id"]},_getCellDomId:function(_,$){return this._getRowDomId(_,$.frozen)+"|"+$["__id"]},_getHtmlFromData:function(C,F){if(!C)return"";var _=this,B=this.options,E=[];for(var I=0,D=C.length;I<D;I++){var A=C[I],G=A["__id"];if(!A)continue;E.push("<tr");E.push(" id=\""+_._getRowDomId(A,F)+"\"");E.push(" class=\"l-grid-row");if(!F&&_.enabledCheckbox()&&B.isChecked&&B.isChecked(A)){_.select(A);E.push(" l-selected")}else if(_.isSelected(A))E.push(" l-selected");else if(B.isSelected&&B.isSelected(A)){_.select(A);E.push(" l-selected")}if(A["__index"]%2==1&&B.alternatingRow)E.push(" l-grid-row-alt");E.push("\" ");if(B.rowAttrRender)E.push(B.rowAttrRender(A,G));if(B.tree&&_.collapsedRows&&_.collapsedRows.length){var H=function(){var B=_.getParent(A);while(B){if($.inArray(B,_.collapsedRows)!=-1)return true;B=_.getParent(B)}return false};if(H())E.push(" style=\"display:none;\" ")}E.push(">");$(_.columns).each(function(D,C){if(F!=C.frozen)return;E.push("<td");E.push(" id=\""+_._getCellDomId(A,this)+"\"");if(this.isrownumber){E.push(" class=\"l-grid-row-cell l-grid-row-cell-rownumbers\" style=\"width:"+this.width+"px\"><div class=\"l-grid-row-cell-inner\"");if(B.fixedCellHeight)E.push(" style = \"height:"+B.rowHeight+"px;\" ");else E.push(" style = \"min-height:"+B.rowHeight+"px;\" ");E.push(">"+(parseInt(A["__index"])+1)+"</div></td>");return}if(this.ischeckbox){E.push(" class=\"l-grid-row-cell l-grid-row-cell-checkbox\" style=\"width:"+this.width+"px\"><div class=\"l-grid-row-cell-inner\"");if(B.fixedCellHeight)E.push(" style = \"height:"+B.rowHeight+"px;\" ");else E.push(" style = \"min-height:"+B.rowHeight+"px;\" ");E.push(">");E.push("<span class=\"l-grid-row-cell-btn-checkbox\"></span>");E.push("</div></td>");return}else if(this.isdetail){E.push(" class=\"l-grid-row-cell l-grid-row-cell-detail\" style=\"width:"+this.width+"px\"><div class=\"l-grid-row-cell-inner\"");if(B.fixedCellHeight)E.push(" style = \"height:"+B.rowHeight+"px;\" ");else E.push(" style = \"min-height:"+B.rowHeight+"px;\" ");E.push(">");if(!B.isShowDetailToggle||B.isShowDetailToggle(A))E.push("<span class=\"l-grid-row-cell-detailbtn\"></span>");E.push("</div></td>");return}var $=this._width;E.push(" class=\"l-grid-row-cell ");if(_.changedCells[G+"_"+this["__id"]])E.push("l-grid-row-cell-edited ");if(this.islast)E.push("l-grid-row-cell-last ");E.push("\"");E.push(" style = \"");E.push("width:"+$+"px; ");if(C._hide)E.push("display:none;");E.push(" \">");E.push(_._getCellHtml(A,C));E.push("</td>")});E.push("</tr>")}return E.join("")},_getCellHtml:function(D,B){var _=this,A=this.options;if(B.isrownumber)return"<div class=\"l-grid-row-cell-inner\">"+(parseInt(D["__index"])+1)+"</div>";var C=[];C.push("<div class=\"l-grid-row-cell-inner\"");C.push(" style = \"width:"+parseInt(B._width-8)+"px;");if(A.fixedCellHeight)C.push("height:"+A.rowHeight+"px;");C.push("min-height:"+A.rowHeight+"px; ");if(B.align)C.push("text-align:"+B.align+";");var $=_._getCellContent(D,B);C.push("\">"+$+"</div>");return C.join("")},_setValueByName:function(B,_,A){if(!B||!_)return null;if(_.indexOf(".")==-1)B[_]=A;else{try{new Function("data,value","data."+_+"=value;")(B,A)}catch($){}}},_getValueByName:function(A,_){if(!A||!_)return null;if(_.indexOf(".")==-1)return A[_];else{try{return new Function("data","return data."+_+";")(A)}catch($){return null}}},_getCellContent:function(E,D){var _=this,B=this.options;if(!E||!D)return"";if(D.isrownumber)return parseInt(E["__index"])+1;var G=E["__id"],F=E["__index"],C=_._getValueByName(E,D.name),A=_._getValueByName(E,D.textField),$="";if(D.render)$=D.render.call(_,E,F,C,D);else if(B.formatters[D.type])$=B.formatters[D.type].call(_,C,D);else if(A!=null)$=A.toString();else if(C!=null)$=C.toString();if(B.tree&&(B.tree.columnName!=null&&B.tree.columnName==D.name||B.tree.columnId!=null&&B.tree.columnId==D.id))$=_._getTreeCellHtml($,E);return $||""},_getTreeCellHtml:function(D,G){var B=G["__level"],A=this,C=this.options,E=$.inArray(G,A.collapsedRows||[])==-1,F=C.tree.isParent(G),_="";B=parseInt(B)||1;for(var H=1;H<B;H++)_+="<div class='l-grid-tree-space'></div>";if(E&&F)_+="<div class='l-grid-tree-space l-grid-tree-link l-grid-tree-link-open'></div>";else if(F)_+="<div class='l-grid-tree-space l-grid-tree-link l-grid-tree-link-close'></div>";else _+="<div class='l-grid-tree-space'></div>";_+="<span class='l-grid-tree-content'>"+D+"</span>";return _},_applyEditor:function(Z){var J=this,V=this.options,L=Z,N=L.id.split("|"),A=N[N.length-1],X=J._columns[A],Q=$(L).parent(),F=J.getRow(Q[0]),a=F["__id"],P=F["__index"];if(!X||!X.editor)return;var _=X.name,G=X.columnindex;if(X.editor.type&&V.editors[X.editor.type]){var B=J._getValueByName(F,_),K={record:F,value:B,column:X,rowindex:P};if(X.textField)K.text=J._getValueByName(F,X.textField);if(J.trigger("beforeEdit",[K])==false)return false;J.lastEditRow=F;var S=V.editors[X.editor.type],R=$(L),H=$(L).offset(),O=$(L).width(),C=$(L).height(),U=$("<div class='l-grid-editor'></div>").appendTo(J.grid),D=0,I=0,W=R.position(),T=J.gridbody.position(),Y=J.gridview2.position(),E=V.toolbar?J.topbar.parent().outerHeight():0+V.title?J.header.outerHeight():0,D=W.left+T.left+Y.left,I=W.top+T.top+Y.top+E;R.html("");J.setCellEditing(F,X,true);U.css({left:D,top:$.browser.safari?I+2:I+1}).show();if(X.textField)K.text=J._getValueByName(F,X.textField);var M=J._createEditor(S,U,K,O,C-1);J.editor={editing:true,editor:S,input:M,editParm:K,container:U};J.unbind("sysEndEdit");J.bind("sysEndEdit",function(){var _=S.getValue(M,K);if(_!=B){$(L).addClass("l-grid-row-cell-edited");J.changedCells[a+"_"+X["__id"]]=true;K.value=_;if(X.textField&&S.getText)K.text=S.getText(M,K);if(S.getSelected)K.selected=S.getSelected(M,K);if(X.editor.onChange)X.editor.onChange(K);if(J._checkEditAndUpdateCell(K))if(X.editor.onChanged)X.editor.onChanged(K)}})}},_checkEditAndUpdateCell:function(_){var $=this,A=this.options;if($.trigger("beforeSubmitEdit",[_])==false)return false;var B=_.column;if(_.text&&B.textField)$._setValueByName(_.record,B.textField,_.text);$.updateCell(B,_.value,_.record);if(B.render||$.enabledTotal())$.reRender({column:B});$.reRender({rowdata:_.record});return true},_getCurrentPageData:function(_){var $=this,A=this.options,B={};B[A.root]=[];if(!_||!_[A.root]||!_[A.root].length){B[A.record]=0;return B}B[A.record]=_[A.root].length;if(!A.newPage)A.newPage=1;for(i=(A.newPage-1)*A.pageSize;i<_[A.root].length&&i<A.newPage*A.pageSize;i++)B[A.root].push(_[A.root][i]);return B},_compareData:function(A,E,C,_){var $=this,B=this.options,D=A[C],F=E[C];if(D==null&&F!=null)return 1;else if(D==null&&F==null)return 0;else if(D!=null&&F==null)return-1;if(B.sorters[_])return B.sorters[_].call($,D,F);else return D<F?-1:D>F?1:0},_getTotalCellContent:function(K,D){var _=this,I=this.options,F=[];if(K.totalSummary){var C=function($){for(var _=0;_<L.length;_++)if(L[_].toLowerCase()==$.toLowerCase())return true;return false},E=0,B=0,M=0,A=parseFloat(D[0][K.name]),$=parseFloat(D[0][K.name]);for(var H=0;H<D.length;H++){B+=1;var J=D[H][K.name];if(typeof(J)=="string")J=J.replace(/\$|\,/g,"");J=parseFloat(J);if(!J)continue;E+=J;if(J>A)A=J;if(J<$)$=J}M=E*1/D.length;if(K.totalSummary.render){var G=K.totalSummary.render({sum:E,count:B,avg:M,min:$,max:A},K,_.data);F.push(G)}else if(K.totalSummary.type){var L=K.totalSummary.type.split(",");if(C("sum"))F.push("<div>Sum="+E.toFixed(2)+"</div>");if(C("count"))F.push("<div>Count="+B+"</div>");if(C("max"))F.push("<div>Max="+A.toFixed(2)+"</div>");if(C("min"))F.push("<div>Min="+$.toFixed(2)+"</div>");if(C("avg"))F.push("<div>Avg="+M.toFixed(2)+"</div>")}}return F.join("")},_getTotalSummaryHtml:function(B,C,D){var _=this,A=this.options,E=[];if(C)E.push("<tr class=\"l-grid-totalsummary "+C+"\">");else E.push("<tr class=\"l-grid-totalsummary\">");$(_.columns).each(function(A,$){if(this.frozen!=D)return;if(this.isrownumber){E.push("<td class=\"l-grid-totalsummary-cell l-grid-totalsummary-cell-rownumbers\" style=\"width:"+this.width+"px\"><div>&nbsp;</div></td>");return}if(this.ischeckbox){E.push("<td class=\"l-grid-totalsummary-cell l-grid-totalsummary-cell-checkbox\" style=\"width:"+this.width+"px\"><div>&nbsp;</div></td>");return}else if(this.isdetail){E.push("<td class=\"l-grid-totalsummary-cell l-grid-totalsummary-cell-detail\" style=\"width:"+this.width+"px\"><div>&nbsp;</div></td>");return}E.push("<td class=\"l-grid-totalsummary-cell");if(this.islast)E.push(" l-grid-totalsummary-cell-last");E.push("\" ");E.push("id=\""+_.id+"|total"+_.totalNumber+"|"+$.__id+"\" ");E.push("width=\""+this._width+"\" ");columnname=this.columnname;if(columnname)E.push("columnname=\""+columnname+"\" ");E.push("columnindex=\""+A+"\" ");E.push("><div class=\"l-grid-totalsummary-cell-inner\"");if($.align)E.push(" style=\"text-Align:"+$.align+";\"");E.push(">");E.push(_._getTotalCellContent($,B));E.push("</div></td>")});E.push("</tr>");if(!D)_.totalNumber++;return E.join("")},_bulidTotalSummary:function(C){var _=this,A=this.options;if(!_.isTotalSummary())return false;if(!_.currentData||_.currentData[A.root].length==0)return false;var B=$(_._getTotalSummaryHtml(_.currentData[A.root],null,C));$("tbody:first",C?_.f.gridbody:_.gridbody).append(B);if(C)_.totalRow1=B;else _.totalRow2=B},updateTotalSummary:function(){var _=this,A=this.options;if(!_.isTotalSummary())return;if(!_.currentData||_.currentData[A.root].length==0)return;var B=$(_._getTotalSummaryHtml(_.currentData[A.root],null,false));if(_.totalRow2)_.totalRow2.html(B.html())},_buildPager:function(){var _=this,A=this.options;$(".pcontrol input",_.toolbar).val(A.page);if(!A.pageCount)A.pageCount=1;$(".pcontrol span",_.toolbar).html(A.pageCount);var B=parseInt((A.page-1)*A.pageSize)+1,C=parseInt(B)+parseInt(A.pageSize)-1;if(!A.total)A.total=0;if(A.total<C)C=A.total;if(!A.total)B=C=0;if(B<0)B=0;if(C<0)C=0;var D=A.pageStatMessage;D=D.replace(/{from}/,B);D=D.replace(/{to}/,C);D=D.replace(/{total}/,A.total);D=D.replace(/{pagesize}/,A.pageSize);$(".l-bar-text",_.toolbar).html(D);if(!A.total)$(".l-bar-btnfirst span,.l-bar-btnprev span,.l-bar-btnnext span,.l-bar-btnlast span",_.toolbar).addClass("l-disabled");if(A.page==1){$(".l-bar-btnfirst span",_.toolbar).addClass("l-disabled");$(".l-bar-btnprev span",_.toolbar).addClass("l-disabled")}else if(A.page>A.pageCount&&A.pageCount>0){$(".l-bar-btnfirst span",_.toolbar).removeClass("l-disabled");$(".l-bar-btnprev span",_.toolbar).removeClass("l-disabled")}if(A.page==A.pageCount){$(".l-bar-btnlast span",_.toolbar).addClass("l-disabled");$(".l-bar-btnnext span",_.toolbar).addClass("l-disabled")}else if(A.page<A.pageCount&&A.pageCount>0){$(".l-bar-btnlast span",_.toolbar).removeClass("l-disabled");$(".l-bar-btnnext span",_.toolbar).removeClass("l-disabled")}},_getRowIdByDomId:function(_){var $=_.split("|"),A=$[2];return A},_getRowByDomId:function($){return this.records[this._getRowIdByDomId($)]},_isEditing:function($){return $.hasClass("l-box-dateeditor")||$.hasClass("l-box-select")},_getSrcElementByEvent:function(B){var A=this,F=(B.target||B.srcElement),D=$(F).parents().add(F),H=function(_){for(var B=0,A=D.length;B<A;B++)if(typeof _=="string"){if($(D[B]).hasClass(_))return D[B]}else if(typeof _=="object")if(D[B]==_)return D[B];return null};if(H("l-grid-editor"))return{editing:true,editor:H("l-grid-editor")};if(D.index(this.element)==-1)if(A._isEditing(D))return{editing:true};else return{out:true};var _=false;if(D.hasClass("l-grid-detailpanel")&&A.detailrows)for(var I=0,E=A.detailrows.length;I<E;I++)if(D.index(A.detailrows[I])!=-1){_=true;break}var C={grid:H("l-panel"),indetail:_,frozen:H(A.gridview1[0])?true:false,header:H("l-panel-header"),gridheader:H("l-grid-header"),gridbody:H("l-grid-body"),total:H("l-panel-bar-total"),popup:H("l-grid-popup"),toolbar:H("l-panel-bar")};if(C.gridheader){C.hrow=H("l-grid-hd-row");C.hcell=H("l-grid-hd-cell");C.hcelltext=H("l-grid-hd-cell-text");C.checkboxall=H("l-grid-hd-cell-checkbox");if(C.hcell){var G=C.hcell.id.split("|")[2];C.column=A._columns[G]}}if(C.gridbody){C.row=H("l-grid-row");C.cell=H("l-grid-row-cell");C.checkbox=H("l-grid-row-cell-btn-checkbox");C.groupbtn=H("l-grid-group-togglebtn");C.grouprow=H("l-grid-grouprow");C.detailbtn=H("l-grid-row-cell-detailbtn");C.detailrow=H("l-grid-detailpanel");C.totalrow=H("l-grid-totalsummary");C.totalcell=H("l-grid-totalsummary-cell");C.rownumberscell=$(C.cell).hasClass("l-grid-row-cell-rownumbers")?C.cell:null;C.detailcell=$(C.cell).hasClass("l-grid-row-cell-detail")?C.cell:null;C.checkboxcell=$(C.cell).hasClass("l-grid-row-cell-checkbox")?C.cell:null;C.treelink=H("l-grid-tree-link");C.editor=H("l-grid-editor");if(C.row)C.data=this._getRowByDomId(C.row.id);if(C.cell)C.editing=$(C.cell).hasClass("l-grid-row-cell-editing");if(C.editor)C.editing=true;if(C.editing)C.out=false}if(C.toolbar){C.first=H("l-bar-btnfirst");C.last=H("l-bar-btnlast");C.next=H("l-bar-btnnext");C.prev=H("l-bar-btnprev");C.load=H("l-bar-btnload");C.button=H("l-bar-button")}return C},_setEvent:function(){var _=this,A=this.options;_.grid.bind("mousedown.grid",function($){_._onMouseDown.call(_,$)});_.grid.bind("dblclick.grid",function($){_._onDblClick.call(_,$)});_.grid.bind("contextmenu.grid",function($){return _._onContextmenu.call(_,$)});$(document).bind("mouseup.grid",function($){_._onMouseUp.call(_,$)});$(document).bind("click.grid",function($){_._onClick.call(_,$)});$(window).bind("resize.grid",function($){_._onResize.call(_)});$(document).bind("keydown.grid",function($){if($.ctrlKey)_.ctrlKey=true});$(document).bind("keyup.grid",function($){delete _.ctrlKey});_.gridbody.bind("scroll.grid",function(){var A=_.gridbody.scrollLeft(),$=_.gridbody.scrollTop();if(A!=null)_.gridheader[0].scrollLeft=A;if($!=null)_.f.gridbody[0].scrollTop=$;_.endEdit();_.trigger("SysGridHeightChanged")});$("select",_.toolbar).change(function(){if(_.isDataChanged&&A.dataAction!="local"&&!confirm(A.isContinueByDataChanged))return false;A.newPage=1;A.pageSize=this.value;_.loadData(A.where)});$("span.pcontrol :text",_.toolbar).blur(function($){_.changePage("input")});$("div.l-bar-button",_.toolbar).hover(function(){$(this).addClass("l-bar-button-over")},function(){$(this).removeClass("l-bar-button-over")});if($.fn.ligerDrag&&A.colDraggable){_.colDroptip=$("<div class='l-drag-coldroptip' style='display:none'><div class='l-drop-move-up'></div><div class='l-drop-move-down'></div></div>").appendTo("body");_.gridheader.add(_.f.gridheader).ligerDrag({revert:true,animate:false,proxyX:0,proxyY:0,proxy:function(E,B){var D=_._getSrcElementByEvent(B);if(D.hcell&&D.column){var A=$(".l-grid-hd-cell-text:first",D.hcell).html(),C=$("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div></div>").appendTo("body");C.append(A);return C}},onRevert:function(){return false},onRendered:function(){this.set("cursor","default");_.children[this.id]=this},onStartDrag:function(C,A){if(A.button==2)return false;if(_.colresizing)return false;this.set("cursor","default");var D=_._getSrcElementByEvent(A);if(!D.hcell||!D.column||D.column.issystem||D.hcelltext)return false;if($(D.hcell).css("cursor").indexOf("resize")!=-1)return false;this.draggingColumn=D.column;_.coldragging=true;var B=_.grid.offset();this.validRange={top:B.top,bottom:B.top+_.gridheader.height(),left:B.left-10,right:B.left+_.grid.width()+10}},onDrag:function(P,E){this.set("cursor","default");var Q=this.draggingColumn;if(!Q)return false;if(_.colresizing)return false;if(_.colDropIn==null)_.colDropIn=-1;var I=E.pageX,J=E.pageY,H=false,O=_.grid.offset(),C=this.validRange;if(I<C.left||I>C.right||J>C.bottom||J<C.top){_.colDropIn=-1;_.colDroptip.hide();this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no");return}for(var L in _._columns){var D=_._columns[L];if(Q==D){H=true;continue}if(D.issystem)continue;var M=D["__level"]==Q["__level"],K=!M?false:H?true:false;if(Q.frozen!=D.frozen)K=D.frozen?false:true;if(_.colDropIn!=-1&&_.colDropIn!=L)continue;var G=document.getElementById(D["__domid"]),R=$(G).offset(),F={top:R.top,bottom:R.top+$(G).height(),left:R.left-10,right:R.left+10};if(K){var B=$(G).width();F.left+=B;F.right+=B}if(I>F.left&&I<F.right&&J>F.top&&J<F.bottom){var N=A.headerRowHeight;if(D["__rowSpan"])N*=D["__rowSpan"];_.colDroptip.css({left:F.left+5,top:F.top-9,height:N+9*2}).show();_.colDropIn=L;_.colDropDir=K?"right":"left";this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no").addClass("l-drop-yes");break}else if(_.colDropIn!=-1){_.colDropIn=-1;_.colDroptip.hide();this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no")}}},onStopDrag:function(B,$){var A=this.draggingColumn;_.coldragging=false;if(_.colDropIn!=-1){_.changeCol.ligerDefer(_,0,[A,_.colDropIn,_.colDropDir=="right"]);_.colDropIn=-1}_.colDroptip.hide();this.set("cursor","default")}})}if($.fn.ligerDrag&&A.rowDraggable){_.rowDroptip=$("<div class='l-drag-rowdroptip' style='display:none'></div>").appendTo("body");_.gridbody.add(_.f.gridbody).ligerDrag({revert:true,animate:false,proxyX:0,proxyY:0,proxy:function(F,C){var E=_._getSrcElementByEvent(C);if(E.row){var B=A.draggingMessage.replace(/{count}/,F.draggingRows?F.draggingRows.length:1);if(A.rowDraggingRender)B=A.rowDraggingRender(F.draggingRows,F,_);var D=$("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div>"+B+"</div>").appendTo("body");return D}},onRevert:function(){return false},onRendered:function(){this.set("cursor","default");_.children[this.id]=this},onStartDrag:function(C,$){if($.button==2)return false;if(_.colresizing)return false;if(!_.columns.length)return false;this.set("cursor","default");var D=_._getSrcElementByEvent($);if(!D.cell||!D.data||D.checkbox)return false;var A=D.cell.id.split("|"),B=_._columns[A[A.length-1]];if(D.rownumberscell||D.detailcell||D.checkboxcell||B==_.columns[0]){if(_.enabledCheckbox()){this.draggingRows=_.getSelecteds();if(!this.draggingRows||!this.draggingRows.length)return false}else this.draggingRows=[D.data];this.draggingRow=D.data;this.set("cursor","move");_.rowdragging=true;this.validRange={top:_.gridbody.offset().top,bottom:_.gridbody.offset().top+_.gridbody.height(),left:_.grid.offset().left-10,right:_.grid.offset().left+_.grid.width()+10}}else return false},onDrag:function(N,C){var P=this.draggingRow;if(!P)return false;var I=this.draggingRows?this.draggingRows:[P];if(_.colresizing)return false;if(_.rowDropIn==null)_.rowDropIn=-1;var F=C.pageX,J=C.pageY,E=false,B=this.validRange;if(F<B.left||F>B.right||J>B.bottom||J<B.top){_.rowDropIn=-1;_.rowDroptip.hide();this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no");return}for(var K in _.rows){var G=_.rows[K],Q=G["__id"];if(P==G)E=true;if($.inArray(G,I)!=-1)continue;var L=E?true:false;if(_.rowDropIn!=-1&&_.rowDropIn!=Q)continue;var M=_.getRowObj(Q),O=$(M).offset(),D={top:O.top-4,bottom:O.top+$(M).height()+4,left:_.grid.offset().left,right:_.grid.offset().left+_.grid.width()};if(F>D.left&&F<D.right&&J>D.top&&J<D.bottom){var H=O.top;if(L)H+=$(M).height();_.rowDroptip.css({left:D.left,top:H,width:D.right-D.left}).show();_.rowDropIn=Q;_.rowDropDir=L?"bottom":"top";if(A.tree&&J>D.top+5&&J<D.bottom-5){this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add");_.rowDroptip.hide();_.rowDropInParent=true}else{this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes");_.rowDroptip.show();_.rowDropInParent=false}break}else if(_.rowDropIn!=-1){_.rowDropIn=-1;_.rowDropInParent=false;_.rowDroptip.hide();this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no")}}},onStopDrag:function(D,C){var H=this.draggingRows;_.rowdragging=false;for(var G=0;G<H.length;G++){var E=H[G].children;if(E)H=$.grep(H,function(_,B){var A=$.inArray(_,E)==-1;return A})}if(_.rowDropIn!=-1){if(A.tree){var F,B;if(_.rowDropInParent)B=_.getRow(_.rowDropIn);else{F=_.getRow(_.rowDropIn);B=_.getParent(F)}_.appendRange(H,B,F,_.rowDropDir!="bottom");_.trigger("rowDragDrop",{rows:H,parent:B,near:F,after:_.rowDropDir=="bottom"})}else{_.moveRange(H,_.rowDropIn,_.rowDropDir=="bottom");_.trigger("rowDragDrop",{rows:H,parent:B,near:_.getRow(_.rowDropIn),after:_.rowDropDir=="bottom"})}_.rowDropIn=-1}_.rowDroptip.hide();this.set("cursor","default")}})}},_onRowOver:function(B,A){if(l.draggable.dragging)return;var _=this,C=this.options,D=_.getRow(B),E=A?"addClass":"removeClass";if(_.enabledFrozen())$(_.getRowObj(D,true))[E](C.mouseoverRowCssClass);$(_.getRowObj(D,false))[E](C.mouseoverRowCssClass)},_onMouseUp:function(_){var $=this,A=this.options;if(l.draggable.dragging){var B=$._getSrcElementByEvent(_);if(B.hcell&&B.column)$.trigger("dragdrop",[{type:"header",column:B.column,cell:B.hcell},_]);else if(B.row)$.trigger("dragdrop",[{type:"row",record:B.data,row:B.row},_])}},_onMouseDown:function(_){var $=this,A=this.options},_onContextmenu:function(A){var _=this,B=this.options,D=_._getSrcElementByEvent(A);if(D.row){if(B.whenRClickToSelect)_.select(D.data);if(_.hasBind("contextmenu"))return _.trigger("contextmenu",[{data:D.data,rowindex:D.data["__index"],row:D.row},A])}else if(D.hcell){if(!B.allowHideColumn)return true;var E=$(D.hcell).attr("columnindex");if(E==undefined)return true;var C=(A.pageX-_.body.offset().left+parseInt(_.body[0].scrollLeft));if(E==_.columns.length-1)C-=50;_.popup.css({left:C,top:_.gridheader.height()+1});_.popup.toggle();return false}},_onDblClick:function(_){var $=this,A=this.options,B=$._getSrcElementByEvent(_);if(B.row)$.trigger("dblClickRow",[B.data,B.data["__id"],B.row])},_onClick:function(L){var W=(L.target||L.srcElement),K=this,U=this.options,I=K._getSrcElementByEvent(L);if(I.out){if(K.editor.editing&&!$.ligerui.win.masking)K.endEdit();if(U.allowHideColumn)K.popup.hide();return}if(I.indetail||I.editing)return;if(K.editor.editing)K.endEdit();if(U.allowHideColumn)if(!I.popup)K.popup.hide();if(I.checkboxall){var O=$(I.hrow),B=O.hasClass("l-checked");if(K.trigger("beforeCheckAllRow",[!B,K.element])==false)return false;if(B)O.removeClass("l-checked");else O.addClass("l-checked");K.selected=[];for(var X in K.records)if(B)K.unselect(K.records[X]);else K.select(K.records[X]);K.trigger("checkAllRow",[!B,K.element])}else if(I.hcelltext){var Q=$(I.hcelltext).parent().parent();if(!U.enabledSort||!I.column)return;if(I.column.isSort==false)return;if(U.url&&U.dataAction!="local"&&K.isDataChanged&&!confirm(U.isContinueByDataChanged))return;var _=$(".l-grid-hd-cell-sort:first",Q),H=I.column.name;if(!H)return;if(_.length>0){if(_.hasClass("l-grid-hd-cell-sort-asc")){_.removeClass("l-grid-hd-cell-sort-asc").addClass("l-grid-hd-cell-sort-desc");Q.removeClass("l-grid-hd-cell-asc").addClass("l-grid-hd-cell-desc");K.trigger("ChangeSort",[H,"desc"]);K.changeSort(H,"desc")}else if(_.hasClass("l-grid-hd-cell-sort-desc")){_.removeClass("l-grid-hd-cell-sort-desc").addClass("l-grid-hd-cell-sort-asc");Q.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc");K.trigger("ChangeSort",[H,"asc"]);K.changeSort(H,"asc")}}else{Q.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc");$(I.hcelltext).after("<span class='l-grid-hd-cell-sort l-grid-hd-cell-sort-asc'>&nbsp;&nbsp;</span>");K.trigger("ChangeSort",[H,"asc"]);K.changeSort(H,"asc")}$(".l-grid-hd-cell-sort",K.gridheader).add($(".l-grid-hd-cell-sort",K.f.gridheader)).not($(".l-grid-hd-cell-sort:first",Q)).remove()}else if(I.detailbtn&&U.detail){var T=I.data,O=$([K.getRowObj(T,false)]);if(K.enabledFrozen())O=O.add(K.getRowObj(T,true));X=T["__id"];if($(I.detailbtn).hasClass("l-open")){if(U.detail.onCollapse)U.detail.onCollapse(T,$(".l-grid-detailpanel-inner:first",R)[0]);O.next("tr.l-grid-detailpanel").hide();$(I.detailbtn).removeClass("l-open")}else{var R=O.next("tr.l-grid-detailpanel");if(R.length>0){R.show();if(U.detail.onExtend)U.detail.onExtend(T,$(".l-grid-detailpanel-inner:first",R)[0]);$(I.detailbtn).addClass("l-open");K.trigger("SysGridHeightChanged");return}$(I.detailbtn).addClass("l-open");var S=0;for(var P=0;P<K.columns.length;P++)if(K.columns[P].frozen)S++;var G=$("<tr class='l-grid-detailpanel'><td><div class='l-grid-detailpanel-inner' style='display:none'></div></td></tr>"),E=$("<tr class='l-grid-detailpanel'><td><div class='l-grid-detailpanel-inner' style='display:none'></div></td></tr>");G.find("div:first").width(K.gridheader.find("div:first").width()-50);G.attr("id",K.id+"|detail|"+X);K.detailrows=K.detailrows||[];K.detailrows.push(G[0]);K.detailrows.push(E[0]);var A=$("div:first",G);A.parent().attr("colSpan",K.columns.length-S);O.eq(0).after(G);if(S>0){E.find("td:first").attr("colSpan",S);O.eq(1).after(E)}if(U.detail.onShowDetail){U.detail.onShowDetail(T,A[0],function(){K.trigger("SysGridHeightChanged")});$("div:first",E).add(A).show().height(U.detail.height||U.detailHeight)}else if(U.detail.render){A.append(U.detail.render());A.show()}K.trigger("SysGridHeightChanged")}}else if(I.groupbtn){var F=$(I.grouprow),V=true;if($(I.groupbtn).hasClass("l-grid-group-togglebtn-close")){$(I.groupbtn).removeClass("l-grid-group-togglebtn-close");if(F.hasClass("l-grid-grouprow-last"))$("td:first",F).width("auto")}else{V=false;$(I.groupbtn).addClass("l-grid-group-togglebtn-close");if(F.hasClass("l-grid-grouprow-last"))$("td:first",F).width(K.gridtablewidth)}var N=F.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel");while(true){if(N.length==0)break;if(V){N.show();if(N.hasClass("l-grid-detailpanel")&&!N.prev().find("td.l-grid-row-cell-detail:first span.l-grid-row-cell-detailbtn:first").hasClass("l-open"))N.hide()}else N.hide();N=N.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel")}K.trigger(V?"groupExtend":"groupCollapse");K.trigger("SysGridHeightChanged")}else if(I.treelink)K.toggle(I.data);else if(I.row&&K.enabledCheckbox()){var J=U.selectRowButtonOnly?true:false;if(U.enabledEdit)J=true;if(I.checkbox||!J){O=$(I.row),B=O.hasClass("l-selected");if(K.trigger("beforeCheckRow",[!B,I.data,I.data["__id"],I.row])==false)return false;var D=B?"unselect":"select";K[D](I.data);if(U.tree&&U.autoCheckChildren){var C=K.getChildren(I.data,true);for(var P=0,M=C.length;P<M;P++)K[D](C[P])}K.trigger("checkRow",[!B,I.data,I.data["__id"],I.row])}if(!I.checkbox&&I.cell&&U.enabledEdit&&U.clickToEdit)K._applyEditor(I.cell)}else if(I.row&&!K.enabledCheckbox()){if(I.cell&&U.enabledEdit&&U.clickToEdit)K._applyEditor(I.cell);if($(I.row).hasClass("l-selected")){if(!U.allowUnSelectRow){$(I.row).addClass("l-selected-again");return}K.unselect(I.data)}else K.select(I.data)}else if(I.toolbar)if(I.first){if(K.trigger("toFirst",[K.element])==false)return false;K.changePage("first")}else if(I.prev){if(K.trigger("toPrev",[K.element])==false)return false;K.changePage("prev")}else if(I.next){if(K.trigger("toNext",[K.element])==false)return false;K.changePage("next")}else if(I.last){if(K.trigger("toLast",[K.element])==false)return false;K.changePage("last")}else if(I.load){if($("span",I.load).hasClass("l-disabled"))return false;if(K.trigger("reload",[K.element])==false)return false;if(U.url&&K.isDataChanged&&!confirm(U.isContinueByDataChanged))return false;K.loadData(U.where)}},select:function(C){var A=this,D=this.options,F=A.getRow(C),G=F["__id"],B=A.getRowObj(G),_=A.getRowObj(G,true);if(!A.enabledCheckbox()&&!A.ctrlKey){for(var H in A.selected){var E=A.selected[H];if(E["__id"]in A.records){$(A.getRowObj(E)).removeClass("l-selected l-selected-again");if(A.enabledFrozen())$(A.getRowObj(E,true)).removeClass("l-selected l-selected-again")}}A.selected=[]}if(B)$(B).addClass("l-selected");if(_)$(_).addClass("l-selected");A.selected[A.selected.length]=F;A.trigger("selectRow",[F,G,B])},unselect:function(C){var A=this,D=this.options,E=A.getRow(C),F=E["__id"],B=A.getRowObj(F),_=A.getRowObj(F,true);$(B).removeClass("l-selected l-selected-again");if(A.enabledFrozen())$(_).removeClass("l-selected l-selected-again");A._removeSelected(E);A.trigger("unSelectRow",[E,F,B])},isSelected:function(_){var $=this,A=this.options,B=$.getRow(_);for(var C in $.selected)if($.selected[C]==B)return true;return false},arrayToTree:function(B,G,D){var $=this,J=this.options,A="children";if(J.tree)A=J.tree.childrenName;if(!B||!B.length)return[];var I=[],L={},K=B.length;for(var F=0;F<K;F++){var C=B[F],M=_(C[G]);L[M]=C}for(F=0;F<K;F++){var H=B[F],M=_(H[D]),E=L[M];if(!E){I.push(H);continue}E[A]=E[A]||[];E[A].push(H)}return I;function _($){if(typeof($)=="string")$=$.replace(/[.]/g,"").toLowerCase();return $}},_onResize:function(){var _=this,A=this.options;if(A.height&&A.height!="auto"){var D=$(window).height(),G=0,C=null;if(typeof(A.height)=="string"&&A.height.indexOf("%")>0){var B=_.grid.parent();if(A.inWindow){C=D;C-=parseInt($("body").css("paddingTop"));C-=parseInt($("body").css("paddingBottom"))}else C=B.height();G=C*parseFloat(A.height)*0.01;if(A.inWindow||B[0].tagName.toLowerCase()=="body")G-=(_.grid.offset().top-parseInt($("body").css("paddingTop")))}else G=parseInt(A.height);G+=A.heightDiff;_.windowHeight=D;_._setHeight(G)}else _._updateHorizontalScrollStatus.ligerDefer(_,10);if(_.enabledFrozen()){var F=_.gridview1.width(),E=_.gridview.width();_.gridview2.css({width:E-F})}_.trigger("SysGridHeightChanged")}});$.ligerui.controls.Grid.prototype.enabledTotal=$.ligerui.controls.Grid.prototype.isTotalSummary;$.ligerui.controls.Grid.prototype.add=$.ligerui.controls.Grid.prototype.addRow;$.ligerui.controls.Grid.prototype.update=$.ligerui.controls.Grid.prototype.updateRow;$.ligerui.controls.Grid.prototype.append=$.ligerui.controls.Grid.prototype.appendRow;$.ligerui.controls.Grid.prototype.getSelected=$.ligerui.controls.Grid.prototype.getSelectedRow;$.ligerui.controls.Grid.prototype.getSelecteds=$.ligerui.controls.Grid.prototype.getSelectedRows;$.ligerui.controls.Grid.prototype.getCheckedRows=$.ligerui.controls.Grid.prototype.getSelectedRows;$.ligerui.controls.Grid.prototype.getCheckedRowObjs=$.ligerui.controls.Grid.prototype.getSelectedRowObjs;$.ligerui.controls.Grid.prototype.setOptions=$.ligerui.controls.Grid.prototype.set;$.ligerui.controls.Grid.prototype.reload=$.ligerui.controls.Grid.prototype.loadData;$.ligerui.controls.Grid.prototype.refreshSize=$.ligerui.controls.Grid.prototype._onResize;function removeArrItem($,_){for(var A=$.length-1;A>=0;A--)if(_($[A]))$.splice(A,1)}})(jQuery);(function($){$.fn.ligerLayout=function(_){return $.ligerui.run.call(this,"ligerLayout",arguments)};$.fn.ligerGetLayoutManager=function(){return $.ligerui.run.call(this,"ligerGetLayoutManager",arguments)};$.ligerDefaults.Layout={topHeight:50,bottomHeight:50,leftWidth:110,centerWidth:300,rightWidth:170,InWindow:true,heightDiff:0,height:"100%",onHeightChanged:null,isLeftCollapse:false,isRightCollapse:false,allowLeftCollapse:true,allowRightCollapse:true,allowLeftResize:true,allowRightResize:true,allowTopResize:true,allowBottomResize:true,space:3,onEndResize:null,minLeftWidth:80,minRightWidth:80};$.ligerMethos.Layout={};$.ligerui.controls.Layout=function(_,A){$.ligerui.controls.Layout.base.constructor.call(this,_,A)};$.ligerui.controls.Layout.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"Layout"},__idPrev:function(){return"Layout"},_extendMethods:function(){return $.ligerMethos.Layout},_render:function(){var _=this,B=this.options;_.layout=$(this.element);_.layout.addClass("l-layout");_.width=_.layout.width();if($("> div[position=top]",_.layout).length>0){_.top=$("> div[position=top]",_.layout).wrap("<div class=\"l-layout-top\" style=\"top:0px;\"></div>").parent();_.top.content=$("> div[position=top]",_.top);if(!_.top.content.hasClass("l-layout-content"))_.top.content.addClass("l-layout-content");_.topHeight=B.topHeight;if(_.topHeight)_.top.height(_.topHeight)}if($("> div[position=bottom]",_.layout).length>0){_.bottom=$("> div[position=bottom]",_.layout).wrap("<div class=\"l-layout-bottom\"></div>").parent();_.bottom.content=$("> div[position=bottom]",_.bottom);if(!_.bottom.content.hasClass("l-layout-content"))_.bottom.content.addClass("l-layout-content");_.bottomHeight=B.bottomHeight;if(_.bottomHeight)_.bottom.height(_.bottomHeight);var E=_.bottom.content.attr("title");if(E){_.bottom.header=$("<div class=\"l-layout-header\"></div>");_.bottom.prepend(_.bottom.header);_.bottom.header.html(E);_.bottom.content.attr("title","")}}if($("> div[position=left]",_.layout).length>0){_.left=$("> div[position=left]",_.layout).wrap("<div class=\"l-layout-left\" style=\"left:0px;\"></div>").parent();_.left.header=$("<div class=\"l-layout-header\"><div class=\"l-layout-header-toggle\"></div><div class=\"l-layout-header-inner\"></div></div>");_.left.prepend(_.left.header);_.left.header.toggle=$(".l-layout-header-toggle",_.left.header);_.left.content=$("> div[position=left]",_.left);if(!_.left.content.hasClass("l-layout-content"))_.left.content.addClass("l-layout-content");if(!B.allowLeftCollapse)$(".l-layout-header-toggle",_.left.header).remove();var A=_.left.content.attr("title");if(A){_.left.content.attr("title","");$(".l-layout-header-inner",_.left.header).html(A)}_.leftWidth=B.leftWidth;if(_.leftWidth)_.left.width(_.leftWidth)}if($("> div[position=center]",_.layout).length>0){_.center=$("> div[position=center]",_.layout).wrap("<div class=\"l-layout-center\" ></div>").parent();_.center.content=$("> div[position=center]",_.center);_.center.content.addClass("l-layout-content");var C=_.center.content.attr("title");if(C){_.center.content.attr("title","");_.center.header=$("<div class=\"l-layout-header\"></div>");_.center.prepend(_.center.header);_.center.header.html(C)}_.centerWidth=B.centerWidth;if(_.centerWidth)_.center.width(_.centerWidth)}if($("> div[position=right]",_.layout).length>0){_.right=$("> div[position=right]",_.layout).wrap("<div class=\"l-layout-right\"></div>").parent();_.right.header=$("<div class=\"l-layout-header\"><div class=\"l-layout-header-toggle\"></div><div class=\"l-layout-header-inner\"></div></div>");_.right.prepend(_.right.header);_.right.header.toggle=$(".l-layout-header-toggle",_.right.header);if(!B.allowRightCollapse)$(".l-layout-header-toggle",_.right.header).remove();_.right.content=$("> div[position=right]",_.right);if(!_.right.content.hasClass("l-layout-content"))_.right.content.addClass("l-layout-content");var D=_.right.content.attr("title");if(D){_.right.content.attr("title","");$(".l-layout-header-inner",_.right.header).html(D)}_.rightWidth=B.rightWidth;if(_.rightWidth)_.right.width(_.rightWidth)}_.layout.lock=$("<div class='l-layout-lock'></div>");_.layout.append(_.layout.lock);_._addDropHandle();_.isLeftCollapse=B.isLeftCollapse;_.isRightCollapse=B.isRightCollapse;_.leftCollapse=$("<div class=\"l-layout-collapse-left\" style=\"display: none; \"><div class=\"l-layout-collapse-left-toggle\"></div></div>");_.rightCollapse=$("<div class=\"l-layout-collapse-right\" style=\"display: none; \"><div class=\"l-layout-collapse-right-toggle\"></div></div>");_.layout.append(_.leftCollapse).append(_.rightCollapse);_.leftCollapse.toggle=$("> .l-layout-collapse-left-toggle",_.leftCollapse);_.rightCollapse.toggle=$("> .l-layout-collapse-right-toggle",_.rightCollapse);_._setCollapse();_._bulid();$(window).resize(function(){_._onResize()});_.set(B);_.mask.height(_.layout.height())},setLeftCollapse:function(_){var $=this,A=this.options;if(!$.left)return false;$.isLeftCollapse=_;if($.isLeftCollapse){$.leftCollapse.show();$.leftDropHandle&&$.leftDropHandle.hide();$.left.hide()}else{$.leftCollapse.hide();$.leftDropHandle&&$.leftDropHandle.show();$.left.show()}$._onResize()},setRightCollapse:function(_){var $=this,A=this.options;if(!$.right)return false;$.isRightCollapse=_;$._onResize();if($.isRightCollapse){$.rightCollapse.show();$.rightDropHandle&&$.rightDropHandle.hide();$.right.hide()}else{$.rightCollapse.hide();$.rightDropHandle&&$.rightDropHandle.show();$.right.show()}$._onResize()},_bulid:function(){var _=this,A=this.options;$("> .l-layout-left .l-layout-header,> .l-layout-right .l-layout-header",_.layout).hover(function(){$(this).addClass("l-layout-header-over")},function(){$(this).removeClass("l-layout-header-over")});$(".l-layout-header-toggle",_.layout).hover(function(){$(this).addClass("l-layout-header-toggle-over")},function(){$(this).removeClass("l-layout-header-toggle-over")});$(".l-layout-header-toggle",_.left).click(function(){_.setLeftCollapse(true)});$(".l-layout-header-toggle",_.right).click(function(){_.setRightCollapse(true)});_.middleTop=0;if(_.top){_.middleTop+=_.top.height();_.middleTop+=parseInt(_.top.css("borderTopWidth"));_.middleTop+=parseInt(_.top.css("borderBottomWidth"));_.middleTop+=A.space}if(_.left){_.left.css({top:_.middleTop});_.leftCollapse.css({top:_.middleTop})}if(_.center)_.center.css({top:_.middleTop});if(_.right){_.right.css({top:_.middleTop});_.rightCollapse.css({top:_.middleTop})}if(_.left)_.left.css({left:0});_._onResize();_._onResize()},_setCollapse:function(){var _=this,A=this.options;_.leftCollapse.hover(function(){$(this).addClass("l-layout-collapse-left-over")},function(){$(this).removeClass("l-layout-collapse-left-over")});_.leftCollapse.toggle.hover(function(){$(this).addClass("l-layout-collapse-left-toggle-over")},function(){$(this).removeClass("l-layout-collapse-left-toggle-over")});_.rightCollapse.hover(function(){$(this).addClass("l-layout-collapse-right-over")},function(){$(this).removeClass("l-layout-collapse-right-over")});_.rightCollapse.toggle.hover(function(){$(this).addClass("l-layout-collapse-right-toggle-over")},function(){$(this).removeClass("l-layout-collapse-right-toggle-over")});_.leftCollapse.toggle.click(function(){_.setLeftCollapse(false)});_.rightCollapse.toggle.click(function(){_.setRightCollapse(false)});if(_.left&&_.isLeftCollapse){_.leftCollapse.show();_.leftDropHandle&&_.leftDropHandle.hide();_.left.hide()}if(_.right&&_.isRightCollapse){_.rightCollapse.show();_.rightDropHandle&&_.rightDropHandle.hide();_.right.hide()}},_addDropHandle:function(){var _=this,A=this.options;if(_.left&&A.allowLeftResize){_.leftDropHandle=$("<div class='l-layout-drophandle-left'></div>");_.layout.append(_.leftDropHandle);_.leftDropHandle&&_.leftDropHandle.show();_.leftDropHandle.mousedown(function($){_._start("leftresize",$)})}if(_.right&&A.allowRightResize){_.rightDropHandle=$("<div class='l-layout-drophandle-right'></div>");_.layout.append(_.rightDropHandle);_.rightDropHandle&&_.rightDropHandle.show();_.rightDropHandle.mousedown(function($){_._start("rightresize",$)})}if(_.top&&A.allowTopResize){_.topDropHandle=$("<div class='l-layout-drophandle-top'></div>");_.layout.append(_.topDropHandle);_.topDropHandle.show();_.topDropHandle.mousedown(function($){_._start("topresize",$)})}if(_.bottom&&A.allowBottomResize){_.bottomDropHandle=$("<div class='l-layout-drophandle-bottom'></div>");_.layout.append(_.bottomDropHandle);_.bottomDropHandle.show();_.bottomDropHandle.mousedown(function($){_._start("bottomresize",$)})}_.draggingxline=$("<div class='l-layout-dragging-xline'></div>");_.draggingyline=$("<div class='l-layout-dragging-yline'></div>");_.mask=$("<div class='l-dragging-mask'></div>");_.layout.append(_.draggingxline).append(_.draggingyline).append(_.mask)},_setDropHandlePosition:function(){var $=this,_=this.options;if($.leftDropHandle)$.leftDropHandle.css({left:$.left.width()+parseInt($.left.css("left")),height:$.middleHeight,top:$.middleTop});if($.rightDropHandle)$.rightDropHandle.css({left:parseInt($.right.css("left"))-_.space,height:$.middleHeight,top:$.middleTop});if($.topDropHandle)$.topDropHandle.css({top:$.top.height()+parseInt($.top.css("top")),width:$.top.width()});if($.bottomDropHandle)$.bottomDropHandle.css({top:parseInt($.bottom.css("top"))-_.space,width:$.bottom.width()})},_onResize:function(){var _=this,B=this.options,E=_.layout.height(),G=0,D=$(window).height(),C=null;if(typeof(B.height)=="string"&&B.height.indexOf("%")>0){var F=_.layout.parent();if(B.InWindow||F[0].tagName.toLowerCase()=="body"){C=D;C-=parseInt($("body").css("paddingTop"));C-=parseInt($("body").css("paddingBottom"))}else C=F.height();G=C*parseFloat(B.height)*0.01;if(B.InWindow||F[0].tagName.toLowerCase()=="body")G-=(_.layout.offset().top-parseInt($("body").css("paddingTop")))}else G=parseInt(B.height);G+=B.heightDiff;_.layout.height(G);_.layoutHeight=_.layout.height();_.middleWidth=_.layout.width();_.middleHeight=_.layout.height();if(_.top){_.middleHeight-=_.top.height();_.middleHeight-=parseInt(_.top.css("borderTopWidth"));_.middleHeight-=parseInt(_.top.css("borderBottomWidth"));_.middleHeight-=B.space}if(_.bottom){_.middleHeight-=_.bottom.height();_.middleHeight-=parseInt(_.bottom.css("borderTopWidth"));_.middleHeight-=parseInt(_.bottom.css("borderBottomWidth"));_.middleHeight-=B.space}_.middleHeight-=2;if(_.hasBind("heightChanged")&&_.layoutHeight!=E)_.trigger("heightChanged",[{layoutHeight:_.layoutHeight,diff:_.layoutHeight-E,middleHeight:_.middleHeight}]);if(_.center){_.centerWidth=_.middleWidth;if(_.left)if(_.isLeftCollapse){_.centerWidth-=_.leftCollapse.width();_.centerWidth-=parseInt(_.leftCollapse.css("borderLeftWidth"));_.centerWidth-=parseInt(_.leftCollapse.css("borderRightWidth"));_.centerWidth-=parseInt(_.leftCollapse.css("left"));_.centerWidth-=B.space}else{_.centerWidth-=_.leftWidth;_.centerWidth-=parseInt(_.left.css("borderLeftWidth"));_.centerWidth-=parseInt(_.left.css("borderRightWidth"));_.centerWidth-=parseInt(_.left.css("left"));_.centerWidth-=B.space}if(_.right)if(_.isRightCollapse){_.centerWidth-=_.rightCollapse.width();_.centerWidth-=parseInt(_.rightCollapse.css("borderLeftWidth"));_.centerWidth-=parseInt(_.rightCollapse.css("borderRightWidth"));_.centerWidth-=parseInt(_.rightCollapse.css("right"));_.centerWidth-=B.space}else{_.centerWidth-=_.rightWidth;_.centerWidth-=parseInt(_.right.css("borderLeftWidth"));_.centerWidth-=parseInt(_.right.css("borderRightWidth"));_.centerWidth-=B.space}_.centerLeft=0;if(_.left)if(_.isLeftCollapse){_.centerLeft+=_.leftCollapse.width();_.centerLeft+=parseInt(_.leftCollapse.css("borderLeftWidth"));_.centerLeft+=parseInt(_.leftCollapse.css("borderRightWidth"));_.centerLeft+=parseInt(_.leftCollapse.css("left"));_.centerLeft+=B.space}else{_.centerLeft+=_.left.width();_.centerLeft+=parseInt(_.left.css("borderLeftWidth"));_.centerLeft+=parseInt(_.left.css("borderRightWidth"));_.centerLeft+=B.space}_.center.css({left:_.centerLeft});_.center.width(_.centerWidth);_.center.height(_.middleHeight);var A=_.middleHeight;if(_.center.header)A-=_.center.header.height();_.center.content.height(A)}if(_.left){_.leftCollapse.height(_.middleHeight);_.left.height(_.middleHeight)}if(_.right){_.rightCollapse.height(_.middleHeight);_.right.height(_.middleHeight);_.rightLeft=0;if(_.left)if(_.isLeftCollapse){_.rightLeft+=_.leftCollapse.width();_.rightLeft+=parseInt(_.leftCollapse.css("borderLeftWidth"));_.rightLeft+=parseInt(_.leftCollapse.css("borderRightWidth"));_.rightLeft+=B.space}else{_.rightLeft+=_.left.width();_.rightLeft+=parseInt(_.left.css("borderLeftWidth"));_.rightLeft+=parseInt(_.left.css("borderRightWidth"));_.rightLeft+=parseInt(_.left.css("left"));_.rightLeft+=B.space}if(_.center){_.rightLeft+=_.center.width();_.rightLeft+=parseInt(_.center.css("borderLeftWidth"));_.rightLeft+=parseInt(_.center.css("borderRightWidth"));_.rightLeft+=B.space}_.right.css({left:_.rightLeft})}if(_.bottom){_.bottomTop=_.layoutHeight-_.bottom.height()-2;_.bottom.css({top:_.bottomTop})}_._setDropHandlePosition()},_start:function(C,A){var _=this,B=this.options;_.dragtype=C;if(C=="leftresize"||C=="rightresize"){_.xresize={startX:A.pageX};_.draggingyline.css({left:A.pageX-_.layout.offset().left,height:_.middleHeight,top:_.middleTop}).show();$("body").css("cursor","col-resize");_.mask.height(_.layout.height()).removeClass("l-layout-ymask").addClass("l-layout-xmask").show()}else if(C=="topresize"||C=="bottomresize"){_.yresize={startY:A.pageY};_.draggingxline.css({top:A.pageY-_.layout.offset().top,width:_.layout.width()}).show();$("body").css("cursor","row-resize");_.mask.height(_.layout.height()).removeClass("l-layout-xmask").addClass("l-layout-ymask").show()}else return;_.layout.lock.width(_.layout.width());_.layout.lock.height(_.layout.height());_.layout.lock.show();if($.browser.msie||$.browser.safari)$("body").bind("selectstart",function(){return false});$(document).bind("mouseup",function(){_._stop.apply(_,arguments)});$(document).bind("mousemove",function(){_._drag.apply(_,arguments)})},_drag:function(A){var _=this,B=this.options;if(_.xresize){_.xresize.diff=A.pageX-_.xresize.startX;_.draggingyline.css({left:A.pageX-_.layout.offset().left});$("body").css("cursor","col-resize")}else if(_.yresize){_.yresize.diff=A.pageY-_.yresize.startY;_.draggingxline.css({top:A.pageY-_.layout.offset().top});$("body").css("cursor","row-resize")}},_stop:function(A){var _=this,C=this.options,B;if(_.xresize&&_.xresize.diff!=undefined){B=_.xresize.diff;if(_.dragtype=="leftresize"){if(C.minLeftWidth)if(_.leftWidth+_.xresize.diff<C.minLeftWidth)return;_.leftWidth+=_.xresize.diff;_.left.width(_.leftWidth);if(_.center)_.center.width(_.center.width()-_.xresize.diff).css({left:parseInt(_.center.css("left"))+_.xresize.diff});else if(_.right)_.right.width(_.left.width()-_.xresize.diff).css({left:parseInt(_.right.css("left"))+_.xresize.diff})}else if(_.dragtype=="rightresize"){if(C.minRightWidth)if(_.rightWidth-_.xresize.diff<C.minRightWidth)return;_.rightWidth-=_.xresize.diff;_.right.width(_.rightWidth).css({left:parseInt(_.right.css("left"))+_.xresize.diff});if(_.center)_.center.width(_.center.width()+_.xresize.diff);else if(_.left)_.left.width(_.left.width()+_.xresize.diff)}}else if(_.yresize&&_.yresize.diff!=undefined){B=_.yresize.diff;if(_.dragtype=="topresize"){_.top.height(_.top.height()+_.yresize.diff);_.middleTop+=_.yresize.diff;_.middleHeight-=_.yresize.diff;if(_.left){_.left.css({top:_.middleTop}).height(_.middleHeight);_.leftCollapse.css({top:_.middleTop}).height(_.middleHeight)}if(_.center)_.center.css({top:_.middleTop}).height(_.middleHeight);if(_.right){_.right.css({top:_.middleTop}).height(_.middleHeight);_.rightCollapse.css({top:_.middleTop}).height(_.middleHeight)}}else if(_.dragtype=="bottomresize"){_.bottom.height(_.bottom.height()-_.yresize.diff);_.middleHeight+=_.yresize.diff;_.bottomTop+=_.yresize.diff;_.bottom.css({top:_.bottomTop});if(_.left){_.left.height(_.middleHeight);_.leftCollapse.height(_.middleHeight)}if(_.center)_.center.height(_.middleHeight);if(_.right){_.right.height(_.middleHeight);_.rightCollapse.height(_.middleHeight)}}}_.trigger("endResize",[{direction:_.dragtype?_.dragtype.replace(/resize/,""):"",diff:B},A]);_._setDropHandlePosition();_.draggingxline.hide();_.draggingyline.hide();_.mask.hide();_.xresize=_.yresize=_.dragtype=false;_.layout.lock.hide();if($.browser.msie||$.browser.safari)$("body").unbind("selectstart");$(document).unbind("mousemove",_._drag);$(document).unbind("mouseup",_._stop);$("body").css("cursor","")}})})(jQuery);(function($){$.fn.ligerListBox=function(_){return $.ligerui.run.call(this,"ligerListBox",arguments)};$.ligerDefaults.ListBox={isMultiSelect:false,isShowCheckBox:false,columns:null,width:150,height:100,onSelect:false,onSelected:null,valueField:"id",textField:"text",valueFieldID:null,split:";",data:null,parms:null,url:null,onSuccess:null,onError:null,render:null,css:null,value:null,valueFieldCssClass:null};$.ligerMethos.ListBox=$.ligerMethos.ListBox||{};$.ligerui.controls.ListBox=function(_,A){$.ligerui.controls.ListBox.base.constructor.call(this,_,A)};$.ligerui.controls.ListBox.ligerExtend($.ligerui.controls.Input,{__getType:function(){return"ListBox"},_extendMethods:function(){return $.ligerMethos.ListBox},_init:function(){$.ligerui.controls.ListBox.base._init.call(this)},_render:function(){var _=this,A=this.options;_.data=A.data;_.valueField=null;if(A.valueFieldID){_.valueField=$("#"+A.valueFieldID+":input,[name="+A.valueFieldID+"]:input");if(_.valueField.length==0)_.valueField=$("<input type=\"hidden\"/>");_.valueField[0].id=_.valueField[0].name=A.valueFieldID}else{_.valueField=$("<input type=\"hidden\"/>");_.valueField[0].id=_.valueField[0].name=_.id+"_val"}if(_.valueField[0].name==null)_.valueField[0].name=_.valueField[0].id;if(A.valueFieldCssClass)_.valueField.addClass(A.valueFieldCssClass);_.valueField.attr("data-ligerid",_.id);_.selectBox=$(this.element);_.selectBox.html("<div class=\"l-listbox-inner\"><table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" class=\"l-listbox-table\"></table></div>").addClass("l-listbox").append(_.valueField);_.selectBox.table=$("table:first",_.selectBox);_.set(A);_._addClickEven()},destroy:function(){if(this.selectBox)this.selectBox.remove();this.options=null;$.ligerui.remove(this)},clear:function(){this._changeValue("");this.trigger("clear")},_setIsShowCheckBox:function(_){if(_)$("table",this.selectBox).addClass("l-table-checkbox");else $("table",this.selectBox).addClass("l-table-nocheckbox")},_setCss:function($){if($)this.selectBox.addClass($)},_setDisabled:function($){if($)this.selectBox.addClass("l-text-disabled");else this.selectBox.removeClass("l-text-disabled")},_setWidth:function($){this.selectBox.width($)},_setHeight:function($){this.selectBox.height($)},findTextByValue:function(D){var A=this,C=this.options;if(D==null)return"";var _="",B=function($){var _=D.toString().split(C.split);for(var A=0;A<_.length;A++)if(_[A]==$)return true;return false};$(A.data).each(function(E,A){var $=A[C.valueField],D=A[C.textField];if(B($))_+=D+C.split});if(_.length>0)_=_.substr(0,_.length-1);return _},getDataByValue:function(A){var $=this,_=this.options;for(var C=0,B=$.data.length;C<B;C++)if($.data[C][_.valueField]==A)return $.data[C];return null},indexOf:function(A){var $=this,_=this.options;if(!$.data)return-1;var C=typeof(A)=="object";for(var D=0,B=$.data.length;D<B;D++)if(C){if($.data[D]==A)return D}else if($.data[D][_.valueField]&&$.data[D][_.valueField].toString()==A.toString())return D;return-1},removeItems:function(A){var _=this;if(!_.data)return;$(A).each(function(B,A){var $=_.indexOf(A);if($==-1)return;_.data.splice($,1)});_.refresh()},removeItem:function(_){if(!this.data)return;var $=this.indexOf(_);if($==-1)return;this.data.splice($,1);this.refresh()},insertItem:function(A,_){var $=this;if(!$.data)$.data=[];$.data.splice(_,0,A);$.refresh()},addItems:function(A){var _=this;if(!_.data)_.data=[];$(A).each(function(A,$){_.data.push($)});_.refresh()},addItem:function(_){var $=this;if(!$.data)$.data=[];$.data.push(_);$.refresh()},getSelectedItems:function(){var _=this,B=this.options;if(!_.data)return null;var C=_.getValue();if(!C)return null;var A=[];$(C.split(B.split)).each(function(){var $=_.indexOf(this.toString());if($!=-1)A.push(_.data[$])});return A},_setValue:function(A){var $=this,_=this.options;_.value=A;this._dataInit()},setValue:function($){this._setValue($)},_setUrl:function(B){if(!B)return;var _=this,A=this.options;$.ajax({type:"post",url:B,data:A.parms,cache:false,dataType:"json",success:function($){_.setData($);_.trigger("success",[$])},error:function(A,$){_.trigger("error",[A,$])}})},setUrl:function($){return this._setUrl($)},setParm:function(A,B){if(!A)return;var $=this,_=$.get("parms");if(!_)_={};_[A]=B;$.set("parms",_)},clearContent:function(){var _=this,A=this.options;$("table",_.selectBox).html("")},_setColumns:function(A){var $=this,_=this.options;_.columns=A;$.refresh()},_setData:function($){this.setData($)},setData:function(A){var $=this,_=this.options;if(!A||!A.length)return;$.data=A;$.refresh();$.updateStyle()},refresh:function(){var A=this,J=this.options,D=this.data;this.clearContent();if(!D)return;if(J.columns){A.selectBox.table.headrow=$("<tr class='l-table-headerow'><td width='18px' class='l-checkboxrow'></td></tr>");A.selectBox.table.append(A.selectBox.table.headrow);A.selectBox.table.addClass("l-listbox-grid");for(var E=0;E<J.columns.length;E++){var I=$("<td columnindex='"+E+"' columnname='"+J.columns[E].name+"'>"+J.columns[E].header+"</td>");if(J.columns[E].width)I.width(J.columns[E].width);A.selectBox.table.headrow.append(I)}}var K=[];for(var G=0;G<D.length;G++){var _=D[G][J.valueField],F=D[G][J.textField],H=" value='"+_+"' index='"+G+"'";if(!J.columns){K.push("<tr "+H+">");K.push("<td style='width:18px;' class='l-checkboxrow'><input type='checkbox'"+H+"/></td>");var B=F;if(J.render)B=J.render({data:D[G],value:_,text:F});K.push("<td align='left'>"+B+"</td></tr>")}else{K.push("<tr "+H+"><td style='width:18px;' class='l-checkboxrow'><input type='checkbox' "+H+"/></td>");for(E=0;E<J.columns.length;E++){var C=J.columns[E].name;K.push("<td>"+D[G][C]+"</td>")}K.push("</tr>")}}A.selectBox.table.append(K.join(""))},_getValue:function(){return $(this.valueField).val()},getValue:function(){return this._getValue()},updateStyle:function(){this._dataInit()},selectAll:function(){var _=this,B=this.options,A=[];$("tr",_.selectBox).each(function(){var _=$(this);A.push(_.attr("value"))});$("tr",_.selectBox).addClass("l-selected").find(":checkbox").each(function(){this.checked=true});_.valueField.val(A.join(B.split))},_dataInit:function(){var _=this,B=this.options,C=B.value;if(C!=null)_._changeValue(C);else if(_.valueField.val()!="")B.value=_.valueField.val();var A=(C||"").toString().split(B.split);$("tr.l-selected",_.selectBox).removeClass("l-selected").find(":checkbox").each(function(){this.checked=false});$(A).each(function(B,A){$("tr[value='"+A+"']",_.selectBox).addClass("l-selected").find(":checkbox").each(function(){this.checked=true})})},_changeValue:function(_){var $=this,A=this.options;$.valueField.val(_);$.selectedValue=_},_updateValue:function(){var _=this,B=this.options,A=[];$("tr",_.selectBox).each(function(){var _=$(this);if(_.hasClass("l-selected"))A.push(_.attr("value"))});_._changeValue(A.join(B.split))},_addClickEven:function(){var _=this,A=this.options;_.selectBox.click(function(C){var F=(C.target||C.srcElement),G=$(F).parents("tr:first");if(!G.length)return;var E=G.attr("value"),B=_.findTextByValue(E),D=_.getDataByValue(E);if(_.hasBind("select"))if(_.trigger("select",[E,B,D])==false)return false;if(!A.isMultiSelect)$("tr.l-selected",_.selectBox).not(G).removeClass("l-selected").find(":checkbox").each(function(){this.checked=false});if(G.hasClass("l-selected"))G.removeClass("l-selected");else G.addClass("l-selected");G.find(":checkbox").each(function(){this.checked=G.hasClass("l-selected")});_._updateValue();_.trigger("selected",[E,B,D])})}})})(jQuery);(function($){$.ligerMenu=function(_){return $.ligerui.run.call(null,"ligerMenu",arguments)};$.ligerDefaults.Menu={width:120,top:0,left:0,items:null,shadow:true};$.ligerMethos.Menu={};$.ligerui.controls.Menu=function(_){$.ligerui.controls.Menu.base.constructor.call(this,null,_)};$.ligerui.controls.Menu.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"Menu"},__idPrev:function(){return"Menu"},_extendMethods:function(){return $.ligerMethos.Menu},_render:function(){var _=this,A=this.options;_.menuItemCount=0;_.menus={};_.menu=_.createMenu();_.element=_.menu[0];_.menu.css({top:A.top,left:A.left,width:A.width});A.items&&$(A.items).each(function(A,$){_.addItem($)});$(document).bind("click.menu",function(){for(var A in _.menus){var $=_.menus[A];if(!$)return;$.hide();if($.shadow)$.shadow.hide()}});_.set(A)},show:function(B,A){var $=this,_=this.options;if(A==undefined)A=$.menu;if(B&&B.left!=undefined)A.css({left:B.left});if(B&&B.top!=undefined)A.css({top:B.top});A.show();$.updateShadow(A)},updateShadow:function(A){var $=this,_=this.options;if(!_.shadow)return;A.shadow.css({left:A.css("left"),top:A.css("top"),width:A.outerWidth(),height:A.outerHeight()});if(A.is(":visible"))A.shadow.show();else A.shadow.hide()},hide:function(A){var $=this,_=this.options;if(A==undefined)A=$.menu;$.hideAllSubMenu(A);A.hide();$.updateShadow(A)},toggle:function(){var $=this,_=this.options;$.menu.toggle();$.updateShadow($.menu)},removeItem:function(B){var _=this,A=this.options;$("> .l-menu-item[menuitemid="+B+"]",_.menu.items).remove()},setEnabled:function(B){var _=this,A=this.options;$("> .l-menu-item[menuitemid="+B+"]",_.menu.items).removeClass("l-menu-item-disable")},setDisabled:function(B){var _=this,A=this.options;$("> .l-menu-item[menuitemid="+B+"]",_.menu.items).addClass("l-menu-item-disable")},isEnable:function(B){var _=this,A=this.options;return!$("> .l-menu-item[menuitemid="+B+"]",_.menu.items).hasClass("l-menu-item-disable")},getItemCount:function(){var _=this,A=this.options;return $("> .l-menu-item",_.menu.items).length},addItem:function(F,E){var _=this,D=this.options;if(!F)return;if(E==undefined)E=_.menu;if(F.line){E.items.append("<div class=\"l-menu-item-line\"></div>");return}var A=$("<div class=\"l-menu-item\"><div class=\"l-menu-item-text\"></div> </div>"),B=$("> .l-menu-item",E.items).length;E.items.append(A);A.attr("ligeruimenutemid",++_.menuItemCount);F.id&&A.attr("menuitemid",F.id);F.text&&$(">.l-menu-item-text:first",A).html(F.text);F.icon&&A.prepend("<div class=\"l-menu-item-icon l-icon-"+F.icon+"\"></div>");F.img&&A.prepend("<div class=\"l-menu-item-icon\"><img style=\"width:16px;height:16px;margin:2px;\" src=\""+F.img+"\" /></div>");if(F.disable||F.disabled)A.addClass("l-menu-item-disable");if(F.children){A.append("<div class=\"l-menu-item-arrow\"></div>");var C=_.createMenu(A.attr("ligeruimenutemid"));_.menus[A.attr("ligeruimenutemid")]=C;C.width(D.width);C.hover(null,function(){if(!C.showedSubMenu)_.hide(C)});$(F.children).each(function(){_.addItem(this,C)})}F.click&&A.click(function(){if($(this).hasClass("l-menu-item-disable"))return;F.click(F,B)});F.dblclick&&A.dblclick(function(){if($(this).hasClass("l-menu-item-disable"))return;F.dblclick(F,B)});var G=$("> .l-menu-over:first",E);A.hover(function(){if($(this).hasClass("l-menu-item-disable"))return;var B=$(this).offset().top,C=B-E.offset().top;G.css({top:C});_.hideAllSubMenu(E);if(F.children){var A=$(this).attr("ligeruimenutemid");if(!A)return;if(_.menus[A]){_.show({top:B,left:$(this).offset().left+$(this).width()-5},_.menus[A]);E.showedSubMenu=true}}},function(){if($(this).hasClass("l-menu-item-disable"))return;var _=$(this).attr("ligeruimenutemid");if(F.children){_=$(this).attr("ligeruimenutemid");if(!_)return}})},hideAllSubMenu:function(B){var _=this,A=this.options;if(B==undefined)B=_.menu;$("> .l-menu-item",B.items).each(function(){if($("> .l-menu-item-arrow",this).length>0){var A=$(this).attr("ligeruimenutemid");if(!A)return;_.menus[A]&&_.hide(_.menus[A])}});B.showedSubMenu=false},createMenu:function(C){var _=this,B=this.options,A=$("<div class=\"l-menu\" style=\"display:none\"><div class=\"l-menu-yline\"></div><div class=\"l-menu-over\"><div class=\"l-menu-over-l\"></div> <div class=\"l-menu-over-r\"></div></div><div class=\"l-menu-inner\"></div></div>");C&&A.attr("ligeruiparentmenuitemid",C);A.items=$("> .l-menu-inner:first",A);A.appendTo("body");if(B.shadow){A.shadow=$("<div class=\"l-menu-shadow\"></div>").insertAfter(A);_.updateShadow(A)}A.hover(null,function(){if(!A.showedSubMenu)$("> .l-menu-over:first",A).css({top:-24})});if(C)_.menus[C]=A;else _.menus[0]=A;return A}});$.ligerui.controls.Menu.prototype.setEnable=$.ligerui.controls.Menu.prototype.setEnabled;$.ligerui.controls.Menu.prototype.setDisable=$.ligerui.controls.Menu.prototype.setDisabled})(jQuery);(function($){$.fn.ligerMenuBar=function(_){return $.ligerui.run.call(this,"ligerMenuBar",arguments)};$.fn.ligerGetMenuBarManager=function(){return $.ligerui.run.call(this,"ligerGetMenuBarManager",arguments)};$.ligerDefaults.MenuBar={};$.ligerMethos.MenuBar={};$.ligerui.controls.MenuBar=function(_,A){$.ligerui.controls.MenuBar.base.constructor.call(this,_,A)};$.ligerui.controls.MenuBar.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"MenuBar"},__idPrev:function(){return"MenuBar"},_extendMethods:function(){return $.ligerMethos.MenuBar},_render:function(){var _=this,A=this.options;_.menubar=$(this.element);if(!_.menubar.hasClass("l-menubar"))_.menubar.addClass("l-menubar");if(A&&A.items)$(A.items).each(function(A,$){_.addItem($)});$(document).click(function(){$(".l-panel-btn-selected",_.menubar).removeClass("l-panel-btn-selected")});_.set(A)},addItem:function(D){var _=this,C=this.options,A=$("<div class=\"l-menubar-item l-panel-btn\"><span></span><div class=\"l-panel-btn-l\"></div><div class=\"l-panel-btn-r\"></div><div class=\"l-menubar-item-down\"></div></div>");_.menubar.append(A);D.id&&A.attr("menubarid",D.id);D.text&&$("span:first",A).html(D.text);D.disable&&A.addClass("l-menubar-item-disable");D.click&&A.click(function(){D.click(D)});if(D.menu){var B=$.ligerMenu(D.menu);A.hover(function(){_.actionMenu&&_.actionMenu.hide();var A=$(this).offset().left,C=$(this).offset().top+$(this).height();B.show({top:C,left:A});_.actionMenu=B;$(this).addClass("l-panel-btn-over l-panel-btn-selected").siblings(".l-menubar-item").removeClass("l-panel-btn-selected")},function(){$(this).removeClass("l-panel-btn-over")})}else{A.hover(function(){$(this).addClass("l-panel-btn-over")},function(){$(this).removeClass("l-panel-btn-over")});$(".l-menubar-item-down",A).remove()}}})})(jQuery);(function($){$.ligerMessageBox=function(_){return $.ligerui.run.call(null,"ligerMessageBox",arguments,{isStatic:true})};$.ligerDefaults.MessageBox={isDrag:true};$.ligerMethos.MessageBox={};$.ligerui.controls.MessageBox=function(_){$.ligerui.controls.MessageBox.base.constructor.call(this,null,_)};$.ligerui.controls.MessageBox.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"MessageBox"},__idPrev:function(){return"MessageBox"},_extendMethods:function(){return $.ligerMethos.MessageBox},_render:function(){var B=this,E=this.options,C="";C+="<div class=\"l-messagebox\">";C+="        <div class=\"l-messagebox-lt\"></div><div class=\"l-messagebox-rt\"></div>";C+="        <div class=\"l-messagebox-l\"></div><div class=\"l-messagebox-r\"></div> ";C+="        <div class=\"l-messagebox-image\"></div>";C+="        <div class=\"l-messagebox-title\">";C+="            <div class=\"l-messagebox-title-inner\"></div>";C+="            <div class=\"l-messagebox-close\"></div>";C+="        </div>";C+="        <div class=\"l-messagebox-content\">";C+="        </div>";C+="        <div class=\"l-messagebox-buttons\"><div class=\"l-messagebox-buttons-inner\">";C+="        </div></div>";C+="    </div>";B.messageBox=$(C);$("body").append(B.messageBox);B.messageBox.close=function(){B._removeWindowMask();B.messageBox.remove()};E.width&&B.messageBox.width(E.width);E.title&&$(".l-messagebox-title-inner",B.messageBox).html(E.title);E.content&&$(".l-messagebox-content",B.messageBox).html(E.content);if(E.buttons){$(E.buttons).each(function(C,A){var _=$("<div class=\"l-messagebox-btn\"><div class=\"l-messagebox-btn-l\"></div><div class=\"l-messagebox-btn-r\"></div><div class=\"l-messagebox-btn-inner\"></div></div>");$(".l-messagebox-btn-inner",_).html(A.text);$(".l-messagebox-buttons-inner",B.messageBox).append(_);A.width&&_.width(A.width);A.onclick&&_.click(function(){A.onclick(A,C,B.messageBox)})});$(".l-messagebox-buttons-inner",B.messageBox).append("<div class='l-clear'></div>")}var A=B.messageBox.width(),_=0;$(".l-messagebox-buttons-inner .l-messagebox-btn",B.messageBox).each(function(){_+=$(this).width()});$(".l-messagebox-buttons-inner",B.messageBox).css({marginLeft:parseInt((A-_)*0.5)});B._applyWindowMask();B._applyDrag();B._setImage();var F=0,G=0,D=E.width||B.messageBox.width();if(E.left!=null)F=E.left;else E.left=F=0.5*($(window).width()-D);if(E.top!=null)G=E.top;else E.top=G=0.5*($(window).height()-B.messageBox.height())+$(window).scrollTop()-10;if(F<0)E.left=F=0;if(G<0)E.top=G=0;B.messageBox.css({left:F,top:G});$(".l-messagebox-btn",B.messageBox).hover(function(){$(this).addClass("l-messagebox-btn-over")},function(){$(this).removeClass("l-messagebox-btn-over")});$(".l-messagebox-close",B.messageBox).hover(function(){$(this).addClass("l-messagebox-close-over")},function(){$(this).removeClass("l-messagebox-close-over")}).click(function(){B.messageBox.close()});B.set(E)},close:function(){var $=this,_=this.options;this.g._removeWindowMask();this.messageBox.remove()},_applyWindowMask:function(){var _=this,A=this.options;$(".l-window-mask").remove();$("<div class='l-window-mask' style='display: block;'></div>").appendTo($("body"))},_removeWindowMask:function(){var _=this,A=this.options;$(".l-window-mask").remove()},_applyDrag:function(){var _=this,A=this.options;if(A.isDrag&&$.fn.ligerDrag)_.messageBox.ligerDrag({handler:".l-messagebox-title-inner",animate:false})},_setImage:function(){var _=this,A=this.options;if(A.type)if(A.type=="success"||A.type=="donne"){$(".l-messagebox-image",_.messageBox).addClass("l-messagebox-image-donne").show();$(".l-messagebox-content",_.messageBox).css({paddingLeft:64,paddingBottom:30})}else if(A.type=="error"){$(".l-messagebox-image",_.messageBox).addClass("l-messagebox-image-error").show();$(".l-messagebox-content",_.messageBox).css({paddingLeft:64,paddingBottom:30})}else if(A.type=="warn"){$(".l-messagebox-image",_.messageBox).addClass("l-messagebox-image-warn").show();$(".l-messagebox-content",_.messageBox).css({paddingLeft:64,paddingBottom:30})}else if(A.type=="question"){$(".l-messagebox-image",_.messageBox).addClass("l-messagebox-image-question").show();$(".l-messagebox-content",_.messageBox).css({paddingLeft:64,paddingBottom:40})}}});$.ligerMessageBox.show=function(_){return $.ligerMessageBox(_)};$.ligerMessageBox.alert=function(A,_,D,C){A=A||"";_=_||A;var B=function(_,$,A){A.close();if(C)C(_,$,A)};p={title:A,content:_,buttons:[{text:"\u786e\u5b9a",onclick:B}]};if(D)p.type=D;return $.ligerMessageBox(p)};$.ligerMessageBox.confirm=function(A,_,B){var C=function(_,$,A){A.close();if(B)B($==0)};p={type:"question",title:A,content:_,buttons:[{text:"\u662f",onclick:C},{text:"\u5426",onclick:C}]};return $.ligerMessageBox(p)};$.ligerMessageBox.success=function(A,_,B){return $.ligerMessageBox.alert(A,_,"success",B)};$.ligerMessageBox.error=function(A,_,B){return $.ligerMessageBox.alert(A,_,"error",B)};$.ligerMessageBox.warn=function(A,_,B){return $.ligerMessageBox.alert(A,_,"warn",B)};$.ligerMessageBox.question=function(A,_){return $.ligerMessageBox.alert(A,_,"question")}})(jQuery);(function($){$.fn.ligerPopupEdit=function(_){return $.ligerui.run.call(this,"ligerPopupEdit",arguments)};$.fn.ligerGetPopupEditManager=function(){return $.ligerui.run.call(this,"ligerGetPopupEditManager",arguments)};$.ligerDefaults.PopupEdit={valueFieldID:null,css:null,onButtonClick:null,nullText:null,disabled:false,cancelable:true,width:200,heigth:null,render:null,split:";",grid:null,condition:null,valueField:"id",textField:"text",parms:null,onSelect:null,onSelected:null,valueFieldCssClass:null};$.ligerMethos.PopupEdit=$.ligerMethos.PopupEdit||{};$.ligerui.controls.PopupEdit=function(_,A){$.ligerui.controls.PopupEdit.base.constructor.call(this,_,A)};$.ligerui.controls.PopupEdit.ligerExtend($.ligerui.controls.Input,{__getType:function(){return"PopupEdit"},_extendMethods:function(){return $.ligerMethos.PopupEdit},_init:function(){$.ligerui.controls.PopupEdit.base._init.call(this)},_render:function(){var _=this,A=this.options;_.inputText=null;if(this.element.tagName.toLowerCase()=="input"){this.element.readOnly=true;_.inputText=$(this.element);_.textFieldID=this.element.id}if(_.inputText[0].name==undefined)_.inputText[0].name=_.textFieldID;_.valueField=null;if(A.valueFieldID){_.valueField=$("#"+A.valueFieldID+":input");if(_.valueField.length==0)_.valueField=$("<input type=\"hidden\"/>");_.valueField[0].id=_.valueField[0].name=A.valueFieldID}else{_.valueField=$("<input type=\"hidden\"/>");_.valueField[0].id=_.valueField[0].name=_.textFieldID+"_val"}if(_.valueField[0].name==undefined)_.valueField[0].name=_.valueField[0].id;if(A.valueFieldCssClass)_.valueField.addClass(A.valueFieldCssClass);_.link=$("<div class=\"l-trigger\"><div class=\"l-trigger-icon\"></div></div>");_.wrapper=_.inputText.wrap("<div class=\"l-text l-text-popup\"></div>").parent();_.wrapper.append("<div class=\"l-text-l\"></div><div class=\"l-text-r\"></div>");_.wrapper.append(_.link);_.wrapper.append(_.valueField);_.inputText.addClass("l-text-field");_.link.hover(function(){if(A.disabled)return;this.className="l-trigger-hover"},function(){if(A.disabled)return;this.className="l-trigger"}).mousedown(function(){if(A.disabled)return;this.className="l-trigger-pressed"}).mouseup(function(){if(A.disabled)return;this.className="l-trigger-hover"}).click(function(){if(A.disabled)return;if(_.trigger("buttonClick")==false)return false});_.inputText.click(function(){if(A.disabled)return}).blur(function(){if(A.disabled)return;_.wrapper.removeClass("l-text-focus")}).focus(function(){if(A.disabled)return;_.wrapper.addClass("l-text-focus")});_.wrapper.hover(function(){if(A.disabled)return;_.wrapper.addClass("l-text-over")},function(){if(A.disabled)return;_.wrapper.removeClass("l-text-over")});_.set(A)},destroy:function(){if(this.wrapper)this.wrapper.remove();this.options=null;$.ligerui.remove(this)},clear:function(){var $=this,_=this.options;$.inputText.val("");$.valueField.val("")},_setCss:function($){if($)this.wrapper.addClass($)},_setCancelable:function(B){var _=this,A=this.options;if(!B&&_.unselect){_.unselect.remove();_.unselect=null}if(!B&&!_.unselect)return;_.unselect=$("<div class=\"l-trigger l-trigger-cancel\"><div class=\"l-trigger-icon\"></div></div>").hide();_.wrapper.hover(function(){_.unselect.show()},function(){_.unselect.hide()});if(!A.disabled&&A.cancelable)_.wrapper.append(_.unselect);_.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){_.clear()})},_setDisabled:function($){if($)this.wrapper.addClass("l-text-disabled");else this.wrapper.removeClass("l-text-disabled")},_setWidth:function(_){var $=this;if(_>20){$.wrapper.css({width:_});$.inputText.css({width:_-20})}},_setHeight:function(_){var $=this;if(_>10){$.wrapper.height(_);$.inputText.height(_-2)}},_getText:function(){return $(this.inputText).val()},_getValue:function(){return $(this.valueField).val()},getValue:function(){return this._getValue()},getText:function(){return this._getText()},setValue:function(B,_){var $=this,A=this.options;if(arguments.length>=2){$.setValue(B);$.setText(_);return}$.valueField.val(B)},setText:function(_){var $=this,A=this.options;if(A.render)$.inputText.val(A.render(_));else $.inputText.val(_)},addValue:function(H,D){var B=this,G=this.options;if(!H)return;var A=B.getValue(),E=B.getText();if(!A){B.setValue(H);B.setText(D)}else{var F=[],_=[],C=A.split(G.split),H=H.split(G.split),D=D.split(G.split);for(var J=0,I=H.length;J<I;J++)if($.inArray(H[J],C)==-1){F.push(H[J]);_.push(D[J])}if(F.length){B.setValue(A+G.split+F.join(G.split));B.setText(E+G.split+_.join(G.split))}}},removeValue:function(H,D){var B=this,G=this.options;if(!H)return;var A=B.getValue(),F=B.getText();if(!A)return;var _=A.split(G.split),E=F.split(G.split),H=H.split(G.split);for(var J=0,C=-1,I=H.length;J<I;J++)if((C=$.inArray(H[J],_))!=-1){_.splice(C,1);E.splice(C,1)}B.setValue(_.join(G.split));B.setText(E.join(G.split))},_setGrid:function(C){if(!C)return;var _=this,B=this.options,A=$.extend({parms:B.parms},B.grid);this.bind("buttonClick",function(){if(!_.popupFn){var C={grid:A,condition:B.condition,valueField:B.valueField,textField:B.textField,split:B.split,onSelect:function($){if(_.trigger("select",$)==false)return;if(B.grid.checkbox){_.addValue($.value,$.text);_.removeValue($.remvoeValue,$.remvoeText)}else{_.setValue($.value);_.setText($.text)}_.trigger("selected",$)},selectInit:function(C){var A=_.getValue();if(!A)return false;if(!B.valueField||!C[B.valueField])return false;return $.inArray(C[B.valueField].toString(),A.split(B.split))!=-1}};_.popupFn=$.ligerui.getPopupFn(C)}_.popupFn()})}});$.ligerui.getPopupFn=function(C){C=$.extend({title:"\u9009\u62e9\u6570\u636e",width:700,height:320,top:null,left:null,split:";",valueField:null,textField:null,grid:null,condition:null,onSelect:function($){},selectInit:function($){return false}},C);if(!C.grid)return;var F,D,B,_=[];return function(){E();return false};function E(){function J($){$=$||C.height;$-=H.height();return $}if(F){D._showData();F.show();D.refreshSize();_=D.selected.concat();return}var K=$("<div></div>"),H=$("<div></div>"),I=$("<div></div>");K.append(H).append(I);if(C.condition){var G=$.extend({labelWidth:60,space:20},C.condition);B=H.ligerForm(G)}else H.remove();var E=$.extend({columnWidth:120,alternatingRow:false,frozen:true,rownumbers:true},C.grid,{width:"100%",height:J(),isChecked:C.selectInit,isSelected:C.selectInit,inWindow:false});D=I.ligerGrid(E);if(C.condition){var L=$("<li style=\"margin-right:9px\"><div></div></li>");$("ul:first",H).append(L).after("<div class=\"l-clear\"></div>");$("div",L).ligerButton({text:"\u641c\u7d22",click:function(){var _=$.ligerui.getConditions(H);D.setParm("condition",$.ligerui.toJSON(_));D.reload()}})}F=$.ligerDialog.open({title:C.title,width:C.width,height:"auto",top:C.top,left:C.left,target:K,isResize:true,cls:"l-selectorwin",onContentHeightChange:function($){D.set("height",J($));return false},onStopResize:function(){D.refreshSize()},buttons:[{text:"\u9009\u62e9",onclick:function($,_){A();_.hide()}},{text:"\u53d6\u6d88",onclick:function($,_){_.hide()}}]});D.refreshSize()}function A(){var B=D.selected||[],H=[],A=[],G=[];$(B).each(function(E,B){C.valueField&&H.push(B[C.valueField]);C.textField&&A.push(B[C.textField]);var _=$.extend(true,{},this);D.formatRecord(_,true);G.push(_)});var J=[];$(_).each(function(){if($.inArray(this,B)==-1&&$.inArray(this,D.rows)!=-1)J.push(this)});var E=[],F=[],I=[];$(J).each(function(B,A){C.valueField&&E.push(A[C.valueField]);C.textField&&F.push(A[C.textField]);var _=$.extend(true,{},this);D.formatRecord(_,true);I.push(_)});C.onSelect({value:H.join(C.split),text:A.join(C.split),data:G,remvoeValue:E.join(C.split),remvoeText:F.join(C.split),removeData:I})}}})(jQuery);(function($){$.fn.ligerRadio=function(){return $.ligerui.run.call(this,"ligerRadio",arguments)};$.fn.ligerGetRadioManager=function(){return $.ligerui.run.call(this,"ligerGetRadioManager",arguments)};$.ligerDefaults.Radio={disabled:false};$.ligerMethos.Radio={};$.ligerui.controls.Radio=function(_,A){$.ligerui.controls.Radio.base.constructor.call(this,_,A)};$.ligerui.controls.Radio.ligerExtend($.ligerui.controls.Input,{__getType:function(){return"Radio"},__idPrev:function(){return"Radio"},_extendMethods:function(){return $.ligerMethos.Radio},_render:function(){var _=this,A=this.options;_.input=$(this.element);_.link=$("<a href=\"javascript:void(0)\" class=\"l-radio\"></a>");_.wrapper=_.input.addClass("l-hidden").wrap("<div class=\"l-radio-wrapper\"></div>").parent();_.wrapper.prepend(_.link);_.input.change(function(){if(this.checked)_.link.addClass("l-radio-checked");else _.link.removeClass("l-radio-checked");return true});_.link.click(function(){_._doclick()});_.wrapper.hover(function(){if(!A.disabled)$(this).addClass("l-over")},function(){$(this).removeClass("l-over")});this.element.checked&&_.link.addClass("l-radio-checked");if(this.element.id)$("label[for="+this.element.id+"]").click(function(){_._doclick()});_.set(A)},setValue:function(A){var $=this,_=this.options;if(!A){$.input[0].checked=false;$.link.removeClass("l-radio-checked")}else{$.input[0].checked=true;$.link.addClass("l-radio-checked")}},getValue:function(){return this.input[0].checked},setEnabled:function(){this.input.attr("disabled",false);this.wrapper.removeClass("l-disabled");this.options.disabled=false},setDisabled:function(){this.input.attr("disabled",true);this.wrapper.addClass("l-disabled");this.options.disabled=true},updateStyle:function(){if(this.input.attr("disabled")){this.wrapper.addClass("l-disabled");this.options.disabled=true}if(this.input[0].checked)this.link.addClass("l-checkbox-checked");else this.link.removeClass("l-checkbox-checked")},_doclick:function(){var _=this,B=this.options;if(_.input.attr("disabled"))return false;_.input.trigger("click").trigger("change");var A;if(_.input[0].form)A=_.input[0].form;else A=document;$("input:radio[name="+_.input[0].name+"]",A).not(_.input).trigger("change");return false}})})(jQuery);(function($){$.fn.ligerRadioList=function(_){return $.ligerui.run.call(this,"ligerRadioList",arguments)};$.ligerDefaults.RadioList={rowSize:3,valueField:"id",textField:"text",valueFieldID:null,name:null,data:null,parms:null,url:null,onSuccess:null,onError:null,css:null,value:null,valueFieldCssClass:null};$.ligerMethos.RadioList=$.ligerMethos.RadioList||{};$.ligerui.controls.RadioList=function(_,A){$.ligerui.controls.RadioList.base.constructor.call(this,_,A)};$.ligerui.controls.RadioList.ligerExtend($.ligerui.controls.Input,{__getType:function(){return"RadioList"},_extendMethods:function(){return $.ligerMethos.RadioList},_init:function(){$.ligerui.controls.RadioList.base._init.call(this)},_render:function(){var _=this,A=this.options;_.data=A.data;_.valueField=null;if(A.valueFieldID){_.valueField=$("#"+A.valueFieldID+":input,[name="+A.valueFieldID+"]:input");if(_.valueField.length==0)_.valueField=$("<input type=\"hidden\"/>");_.valueField[0].id=_.valueField[0].name=A.valueFieldID}else{_.valueField=$("<input type=\"hidden\"/>");_.valueField[0].id=_.valueField[0].name=_.id+"_val"}if(_.valueField[0].name==null)_.valueField[0].name=_.valueField[0].id;if(A.valueFieldCssClass)_.valueField.addClass(A.valueFieldCssClass);_.valueField.attr("data-ligerid",_.id);_.radioList=$(this.element);_.radioList.html("<div class=\"l-radiolist-inner\"><table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" class=\"l-radiolist-table\"></table></div>").addClass("l-radiolist").append(_.valueField);_.radioList.table=$("table:first",_.radioList);A.value=_.valueField.val()||A.value;_.set(A);_._addClickEven()},destroy:function(){if(this.radioList)this.radioList.remove();this.options=null;$.ligerui.remove(this)},clear:function(){this._changeValue("");this.trigger("clear")},_setCss:function($){if($)this.radioList.addClass($)},_setDisabled:function(_){if(_){this.radioList.addClass("l-radiolist-disabled");$("input:radio",this.radioList).attr("disabled",true)}else{this.radioList.removeClass("l-radiolist-disabled");$("input:radio",this.radioList).removeAttr("disabled")}},_setWidth:function($){this.radioList.width($)},_setHeight:function($){this.radioList.height($)},indexOf:function(A){var $=this,_=this.options;if(!$.data)return-1;for(var C=0,B=$.data.length;C<B;C++)if(typeof(A)=="object"){if($.data[C]==A)return C}else if($.data[C][_.valueField].toString()==A.toString())return C;return-1},removeItems:function(A){var _=this;if(!_.data)return;$(A).each(function(B,A){var $=_.indexOf(A);if($==-1)return;_.data.splice($,1)});_.refresh()},removeItem:function(_){if(!this.data)return;var $=this.indexOf(_);if($==-1)return;this.data.splice($,1);this.refresh()},insertItem:function(A,_){var $=this;if(!$.data)$.data=[];$.data.splice(_,0,A);$.refresh()},addItems:function(A){var _=this;if(!_.data)_.data=[];$(A).each(function(A,$){_.data.push($)});_.refresh()},addItem:function(_){var $=this;if(!$.data)$.data=[];$.data.push(_);$.refresh()},_setValue:function(A){var $=this,_=this.options;_.value=A;this._dataInit()},setValue:function($){this._setValue($)},_setUrl:function(B){if(!B)return;var _=this,A=this.options;$.ajax({type:"post",url:B,data:A.parms,cache:false,dataType:"json",success:function($){_.setData($);_.trigger("success",[$])},error:function(A,$){_.trigger("error",[A,$])}})},setUrl:function($){return this._setUrl($)},setParm:function(A,B){if(!A)return;var $=this,_=$.get("parms");if(!_)_={};_[A]=B;$.set("parms",_)},clearContent:function(){var _=this,A=this.options;$("table",_.radioList).html("")},_setData:function($){this.setData($)},setData:function(A){var $=this,_=this.options;if(!A||!A.length)return;$.data=A;$.refresh();$.updateStyle()},refresh:function(){var _=this,G=this.options,A=this.data;this.clearContent();if(!A)return;var J=[],I=G.rowSize,E=false,H=G.name||_.id;for(var C=0;C<A.length;C++){var $=A[C][G.valueField],B=A[C][G.textField],D=_.id+"-"+C,F=C%I==0;if(F){if(E)J.push("</tr>");J.push("<tr>");E=true}J.push("<td><input type='radio' name='"+H+"' value='"+$+"' id='"+D+"'/><label for='"+D+"'>"+B+"</label></td>")}if(E)J.push("</tr>");_.radioList.table.append(J.join(""))},_getValue:function(){var _=this,B=this.options,A=B.name||_.id;return $("input:radio[name=\""+A+"\"]:checked").val()},getValue:function(){return this._getValue()},updateStyle:function(){this._dataInit()},_dataInit:function(){var $=this,_=this.options,A=$.valueField.val()||$._getValue()||_.value;$._changeValue(A)},_changeValue:function(A){var _=this,C=this.options,B=C.name||_.id;$("input:radio[name='"+B+"']",_.radioList).each(function(){this.checked=this.value==A});_.valueField.val(A);_.selectedValue=A},_addClickEven:function(){var $=this,_=this.options;$.radioList.click(function(_){var A=$.getValue();if(A)$.valueField.val(A)})}})})(jQuery);(function($){$.fn.ligerResizable=function(_){return $.ligerui.run.call(this,"ligerResizable",arguments,{idAttrName:"ligeruiresizableid",hasElement:false,propertyToElemnt:"target"})};$.fn.ligerGetResizableManager=function(){return $.ligerui.run.call(this,"ligerGetResizableManager",arguments,{idAttrName:"ligeruiresizableid",hasElement:false,propertyToElemnt:"target"})};$.ligerDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2000,maxHeight:2000,minWidth:20,minHeight:20,scope:3,animate:false,onStartResize:function($){},onResize:function($){},onStopResize:function($){},onEndResize:null};$.ligerui.controls.Resizable=function(_){$.ligerui.controls.Resizable.base.constructor.call(this,null,_)};$.ligerui.controls.Resizable.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"Resizable"},__idPrev:function(){return"Resizable"},_render:function(){var _=this,A=this.options;_.target=$(A.target);_.set(A);_.target.mousemove(function(B){if(A.disabled)return;_.dir=_._getDir(B);if(_.dir)_.target.css("cursor",_.dir+"-resize");else if(_.target.css("cursor").indexOf("-resize")>0)_.target.css("cursor","default");if(A.target.ligeruidragid){var C=$.ligerui.get(A.target.ligeruidragid);if(C&&_.dir)C.set("disabled",true);else if(C)C.set("disabled",false)}}).mousedown(function($){if(A.disabled)return;if(_.dir)_._start($)})},_rendered:function(){this.options.target.ligeruiresizableid=this.id},_getDir:function(C){var _=this,F=this.options,D="",I=_.target.offset(),E=_.target.width(),B=_.target.height(),A=F.scope,G=C.pageX||C.screenX,H=C.pageY||C.screenY;if(H>=I.top&&H<I.top+A)D+="n";else if(H<=I.top+B&&H>I.top+B-A)D+="s";if(G>=I.left&&G<I.left+A)D+="w";else if(G<=I.left+E&&G>I.left+E-A)D+="e";if(F.handles=="all"||D=="")return D;if($.inArray(D,_.handles)!=-1)return D;return""},_setHandles:function($){if(!$)return;this.handles=$.replace(/(\s*)/g,"").split(",")},_createProxy:function(){var _=this;_.proxy=$("<div class=\"l-resizable\"></div>");_.proxy.width(_.target.width()).height(_.target.height());_.proxy.attr("resizableid",_.id).appendTo("body")},_removeProxy:function(){var $=this;if($.proxy){$.proxy.remove();$.proxy=null}},_start:function(A){var _=this,B=this.options;_._createProxy();_.proxy.css({left:_.target.offset().left,top:_.target.offset().top,position:"absolute"});_.current={dir:_.dir,left:_.target.offset().left,top:_.target.offset().top,startX:A.pageX||A.screenX,startY:A.pageY||A.clientY,width:_.target.width(),height:_.target.height()};$(document).bind("selectstart.resizable",function(){return false});$(document).bind("mouseup.resizable",function(){_._stop.apply(_,arguments)});$(document).bind("mousemove.resizable",function(){_._drag.apply(_,arguments)});_.proxy.show();_.trigger("startResize",[_.current,A])},changeBy:{t:["n","ne","nw"],l:["w","sw","nw"],w:["w","sw","nw","e","ne","se"],h:["n","ne","nw","s","se","sw"]},_drag:function(_){var $=this,A=this.options;if(!$.current)return;if(!$.proxy)return;$.proxy.css("cursor",$.current.dir==""?"default":$.current.dir+"-resize");var B=_.pageX||_.screenX,C=_.pageY||_.screenY;$.current.diffX=B-$.current.startX;$.current.diffY=C-$.current.startY;$._applyResize($.proxy);$.trigger("resize",[$.current,_])},_stop:function(A){var _=this,B=this.options;if(_.hasBind("stopResize")){if(_.trigger("stopResize",[_.current,A])!=false)_._applyResize()}else _._applyResize();_._removeProxy();_.trigger("endResize",[_.current,A]);$(document).unbind("selectstart.resizable");$(document).unbind("mousemove.resizable");$(document).unbind("mouseup.resizable")},_applyResize:function(D){var _=this,B=this.options,C={left:_.current.left,top:_.current.top,width:_.current.width,height:_.current.height},A=false;if(!D){D=_.target;A=true;if(!isNaN(parseInt(_.target.css("top"))))C.top=parseInt(_.target.css("top"));else C.top=0;if(!isNaN(parseInt(_.target.css("left"))))C.left=parseInt(_.target.css("left"));else C.left=0}if($.inArray(_.current.dir,_.changeBy.l)>-1){C.left+=_.current.diffX;_.current.diffLeft=_.current.diffX}else if(A)delete C.left;if($.inArray(_.current.dir,_.changeBy.t)>-1){C.top+=_.current.diffY;_.current.diffTop=_.current.diffY}else if(A)delete C.top;if($.inArray(_.current.dir,_.changeBy.w)>-1){C.width+=(_.current.dir.indexOf("w")==-1?1:-1)*_.current.diffX;_.current.newWidth=C.width}else if(A)delete C.width;if($.inArray(_.current.dir,_.changeBy.h)>-1){C.height+=(_.current.dir.indexOf("n")==-1?1:-1)*_.current.diffY;_.current.newHeight=C.height}else if(A)delete C.height;if(A&&B.animate)D.animate(C);else D.css(C)}})})(jQuery);(function($){$.fn.ligerSpinner=function(){return $.ligerui.run.call(this,"ligerSpinner",arguments)};$.fn.ligerGetSpinnerManager=function(){return $.ligerui.run.call(this,"ligerGetSpinnerManager",arguments)};$.ligerDefaults.Spinner={type:"float",isNegative:true,decimalplace:2,step:0.1,interval:50,onChangeValue:false,minValue:null,maxValue:null,disabled:false,readonly:false};$.ligerMethos.Spinner={};$.ligerui.controls.Spinner=function(_,A){$.ligerui.controls.Spinner.base.constructor.call(this,_,A)};$.ligerui.controls.Spinner.ligerExtend($.ligerui.controls.Input,{__getType:function(){return"Spinner"},__idPrev:function(){return"Spinner"},_extendMethods:function(){return $.ligerMethos.Spinner},_init:function(){$.ligerui.controls.Spinner.base._init.call(this);var _=this.options;if(_.type=="float"){_.step=0.1;_.interval=50}else if(_.type=="int"){_.step=1;_.interval=100}else if(_.type=="time"){_.step=1;_.interval=100}else{_.type="int";_.step=1;_.interval=100}},_render:function(){var _=this,A=this.options;_.interval=null;_.inputText=null;_.value=null;_.textFieldID="";if(this.element.tagName.toLowerCase()=="input"&&this.element.type&&this.element.type=="text"){_.inputText=$(this.element);if(this.element.id)_.textFieldID=this.element.id}else{_.inputText=$("<input type=\"text\"/>");_.inputText.appendTo($(this.element))}if(_.textFieldID==""&&A.textFieldID)_.textFieldID=A.textFieldID;_.link=$("<div class=\"l-trigger\"><div class=\"l-spinner-up\"><div class=\"l-spinner-icon\"></div></div><div class=\"l-spinner-split\"></div><div class=\"l-spinner-down\"><div class=\"l-spinner-icon\"></div></div></div>");_.wrapper=_.inputText.wrap("<div class=\"l-text\"></div>").parent();_.wrapper.append("<div class=\"l-text-l\"></div><div class=\"l-text-r\"></div>");_.wrapper.append(_.link).after(_.selectBox).after(_.valueField);_.link.up=$(".l-spinner-up",_.link);_.link.down=$(".l-spinner-down",_.link);_.inputText.addClass("l-text-field");if(A.disabled)_.wrapper.addClass("l-text-disabled");if(!_._isVerify(_.inputText.val())){_.value=_._getDefaultValue();_._showValue(_.value)}_.link.up.hover(function(){if(!A.disabled)$(this).addClass("l-spinner-up-over")},function(){clearInterval(_.interval);$(document).unbind("selectstart.spinner");$(this).removeClass("l-spinner-up-over")}).mousedown(function(){if(!A.disabled){_._uping.call(_);_.interval=setInterval(function(){_._uping.call(_)},A.interval);$(document).bind("selectstart.spinner",function(){return false})}}).mouseup(function(){clearInterval(_.interval);_.inputText.trigger("change").focus();$(document).unbind("selectstart.spinner")});_.link.down.hover(function(){if(!A.disabled)$(this).addClass("l-spinner-down-over")},function(){clearInterval(_.interval);$(document).unbind("selectstart.spinner");$(this).removeClass("l-spinner-down-over")}).mousedown(function(){if(!A.disabled){_.interval=setInterval(function(){_._downing.call(_)},A.interval);$(document).bind("selectstart.spinner",function(){return false})}}).mouseup(function(){clearInterval(_.interval);_.inputText.trigger("change").focus();$(document).unbind("selectstart.spinner")});_.inputText.change(function(){var $=_.inputText.val();_.value=_._getVerifyValue($);_.trigger("changeValue",[_.value]);_._showValue(_.value)}).blur(function(){_.wrapper.removeClass("l-text-focus")}).focus(function(){_.wrapper.addClass("l-text-focus")});_.wrapper.hover(function(){if(!A.disabled)_.wrapper.addClass("l-text-over")},function(){_.wrapper.removeClass("l-text-over")});_.set(A)},_setWidth:function(_){var $=this;if(_>20){$.wrapper.css({width:_});$.inputText.css({width:_-20})}},_setHeight:function(_){var $=this;if(_>10){$.wrapper.height(_);$.inputText.height(_-2);$.link.height(_-4)}},_setDisabled:function($){if($)this.wrapper.addClass("l-text-disabled");else this.wrapper.removeClass("l-text-disabled")},_showValue:function(A){var $=this,_=this.options;if(!A||A=="NaN")A=0;if(_.type=="float")A=parseFloat(A).toFixed(_.decimalplace);this.inputText.val(A)},_setValue:function($){this._showValue($)},setValue:function($){this._showValue($)},getValue:function(){return this.inputText.val()},_round:function(_,B){var $=this,C=this.options,A=1;for(;B>0;A*=10,B--);for(;B<0;A/=10,B++);return Math.round(_*A)/A},_isInt:function(_){var $=this,A=this.options,B=A.isNegative?/^-?\d+$/:/^\d+$/;if(!B.test(_))return false;if(parseFloat(_)!=_)return false;return true},_isFloat:function(_){var $=this,A=this.options,B=A.isNegative?/^-?\d+(\.\d+)?$/:/^\d+(\.\d+)?$/;if(!B.test(_))return false;if(parseFloat(_)!=_)return false;return true},_isTime:function(_){var $=this,B=this.options,A=_.match(/^(\d{1,2}):(\d{1,2})$/);if(A==null)return false;if(A[1]>24||A[2]>60)return false;return true},_isVerify:function(_){var $=this,A=this.options;if(A.type=="float"){if(!$._isFloat(_))return false;var B=parseFloat(_);if(A.minValue!=undefined&&A.minValue>B)return false;if(A.maxValue!=undefined&&A.maxValue<B)return false;return true}else if(A.type=="int"){if(!$._isInt(_))return false;B=parseInt(_);if(A.minValue!=undefined&&A.minValue>B)return false;if(A.maxValue!=undefined&&A.maxValue<B)return false;return true}else if(A.type=="time")return $._isTime(_);return false},_getVerifyValue:function(B){var _=this,A=this.options,$=null;if(A.type=="float")$=_._round(B,A.decimalplace);else if(A.type=="int")$=parseInt(B);else if(A.type=="time")$=B;if(!_._isVerify($))return _.value;else return $},_isOverValue:function(A){var $=this,_=this.options;if(_.minValue!=null&&_.minValue>A)return true;if(_.maxValue!=null&&_.maxValue<A)return true;return false},_getDefaultValue:function(){var $=this,_=this.options;if(_.type=="float"||_.type=="int")return 0;else if(_.type=="time")return"00:00"},_addValue:function(_){var $=this,A=this.options,B=$.inputText.val();B=parseFloat(B)+_;if($._isOverValue(B))return;$._showValue(B);$.inputText.trigger("change")},_addTime:function($){var _=this,B=this.options,C=_.inputText.val(),A=C.match(/^(\d{1,2}):(\d{1,2})$/);newminute=parseInt(A[2])+$;if(newminute<10)newminute="0"+newminute;C=A[1]+":"+newminute;if(_._isOverValue(C))return;_._showValue(C);_.inputText.trigger("change")},_uping:function(){var $=this,_=this.options;if(_.type=="float"||_.type=="int")$._addValue(_.step);else if(_.type=="time")$._addTime(_.step)},_downing:function(){var $=this,_=this.options;if(_.type=="float"||_.type=="int")$._addValue(-1*_.step);else if(_.type=="time")$._addTime(-1*_.step)},_isDateTime:function(C){var $=this,B=this.options,A=C.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(A==null)return false;var _=new Date(A[1],A[3]-1,A[4]);if(_=="NaN")return false;return(_.getFullYear()==A[1]&&(_.getMonth()+1)==A[3]&&_.getDate()==A[4])},_isLongDateTime:function(D){var $=this,C=this.options,B=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/,A=D.match(B);if(A==null)return false;var _=new Date(A[1],A[3]-1,A[4],A[5],A[6]);if(_=="NaN")return false;return(_.getFullYear()==A[1]&&(_.getMonth()+1)==A[3]&&_.getDate()==A[4]&&_.getHours()==A[5]&&_.getMinutes()==A[6])}})})(jQuery);(function($){$.fn.ligerTab=function(_){return $.ligerui.run.call(this,"ligerTab",arguments)};$.fn.ligerGetTabManager=function(){return $.ligerui.run.call(this,"ligerGetTabManager",arguments)};$.ligerDefaults.Tab={height:null,heightDiff:0,changeHeightOnResize:false,contextmenu:true,dblClickToClose:false,dragToMove:false,onBeforeOverrideTabItem:null,onAfterOverrideTabItem:null,onBeforeRemoveTabItem:null,onAfterRemoveTabItem:null,onBeforeAddTabItem:null,onAfterAddTabItem:null,onBeforeSelectTabItem:null,onAfterSelectTabItem:null,onCloseOther:null,onCloseAll:null,onClose:null,onReload:null};$.ligerDefaults.TabString={closeMessage:"\u5173\u95ed\u5f53\u524d\u9875",closeOtherMessage:"\u5173\u95ed\u5176\u4ed6",closeAllMessage:"\u5173\u95ed\u6240\u6709",reloadMessage:"\u5237\u65b0"};$.ligerMethos.Tab={};$.ligerui.controls.Tab=function(_,A){$.ligerui.controls.Tab.base.constructor.call(this,_,A)};$.ligerui.controls.Tab.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"Tab"},__idPrev:function(){return"Tab"},_extendMethods:function(){return $.ligerMethos.Tab},_render:function(){var _=this,A=this.options;if(A.height)_.makeFullHeight=true;_.tab=$(this.element);_.tab.addClass("l-tab");if(A.contextmenu&&$.ligerMenu)_.tab.menu=$.ligerMenu({width:100,items:[{text:A.closeMessage,id:"close",click:function(){_._menuItemClick.apply(_,arguments)}},{text:A.closeOtherMessage,id:"closeother",click:function(){_._menuItemClick.apply(_,arguments)}},{text:A.closeAllMessage,id:"closeall",click:function(){_._menuItemClick.apply(_,arguments)}},{text:A.reloadMessage,id:"reload",click:function(){_._menuItemClick.apply(_,arguments)}}]});_.tab.content=$("<div class=\"l-tab-content\"></div>");$("> div",_.tab).appendTo(_.tab.content);_.tab.content.appendTo(_.tab);_.tab.links=$("<div class=\"l-tab-links\"><ul style=\"left: 0px; \"></ul></div>");_.tab.links.prependTo(_.tab);_.tab.links.ul=$("ul",_.tab.links);var B=$("> div[lselected=true]",_.tab.content),C=B.length>0;_.selectedTabId=B.attr("tabid");$("> div",_.tab.content).each(function(I,G){var A=$("<li class=\"\"><a></a><div class=\"l-tab-links-item-left\"></div><div class=\"l-tab-links-item-right\"></div></li>"),E=$(this);if(E.attr("title")){$("> a",A).html(E.attr("title"));E.attr("title","")}var H=E.attr("tabid");if(H==undefined){H=_.getNewTabid();E.attr("tabid",H);if(E.attr("lselected"))_.selectedTabId=H}A.attr("tabid",H);if(!C&&I==0)_.selectedTabId=H;var B=E.attr("showClose");if(B)A.append("<div class='l-tab-links-item-close'></div>");$("> ul",_.tab.links).append(A);if(!E.hasClass("l-tab-content-item"))E.addClass("l-tab-content-item");if(E.find("iframe").length>0){var D=$("iframe:first",E);if(D[0].readyState!="complete"){if(E.find(".l-tab-loading:first").length==0)E.prepend("<div class='l-tab-loading' style='display:block;'></div>");var F=$(".l-tab-loading:first",E);D.bind("load.tab",function(){F.hide()})}}});_.selectTabItem(_.selectedTabId);if(A.height)if(typeof(A.height)=="string"&&A.height.indexOf("%")>0){_.onResize();if(A.changeHeightOnResize)$(window).resize(function(){_.onResize.call(_)})}else _.setHeight(A.height);if(_.makeFullHeight)_.setContentHeight();$("li",_.tab.links).each(function(){_._addTabItemEvent($(this))});_.tab.bind("dblclick.tab",function(B){if(!A.dblClickToClose)return;_.dblclicking=true;var E=(B.target||B.srcElement),C=E.tagName.toLowerCase();if(C=="a"){var F=$(E).parent().attr("tabid"),D=$(E).parent().find("div.l-tab-links-item-close").length?true:false;if(D)_.removeTabItem(F)}_.dblclicking=false});_.set(A)},_applyDrag:function(A){var _=this,C=this.options;_.droptip=_.droptip||$("<div class='l-tab-drag-droptip' style='display:none'><div class='l-drop-move-up'></div><div class='l-drop-move-down'></div></div>").appendTo("body");var B=$(A).ligerDrag({revert:true,animate:false,proxy:function(){var A=$(this).find("a").html();_.dragproxy=$("<div class='l-tab-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div></div>").appendTo("body");_.dragproxy.append(A);return _.dragproxy},onRendered:function(){this.set("cursor","pointer")},onStartDrag:function(B,_){if(!$(A).hasClass("l-selected"))return false;if(_.button==2)return false;var C=_.srcElement||_.target;if($(C).hasClass("l-tab-links-item-close"))return false},onDrag:function(C,B){if(_.dropIn==null)_.dropIn=-1;var D=_.tab.links.ul.find(">li"),A=D.index(C.target);D.each(function(I,E){if(A==I)return;var C=I>A;if(_.dropIn!=-1&&_.dropIn!=I)return;var G=$(this).offset(),D={top:G.top,bottom:G.top+$(this).height(),left:G.left-10,right:G.left+10};if(C){D.left+=$(this).width();D.right+=$(this).width()}var F=B.pageX||B.screenX,H=B.pageY||B.screenY;if(F>D.left&&F<D.right&&H>D.top&&H<D.bottom){_.droptip.css({left:D.left+5,top:D.top-9}).show();_.dropIn=I;_.dragproxy.find(".l-drop-icon").removeClass("l-drop-no").addClass("l-drop-yes")}else{_.dropIn=-1;_.droptip.hide();_.dragproxy.find(".l-drop-icon").removeClass("l-drop-yes").addClass("l-drop-no")}})},onStopDrag:function(C,B){if(_.dropIn>-1){var A=_.tab.links.ul.find(">li:eq("+_.dropIn+")").attr("tabid"),D=$(C.target).attr("tabid");setTimeout(function(){_.moveTabItem(D,A)},0);_.dropIn=-1;_.dragproxy.remove()}_.droptip.hide();this.set("cursor","default")}});return B},_setDragToMove:function(B){if(!$.fn.ligerDrag)return;var _=this,A=this.options;if(B){if(_.drags)return;_.drags=_.drags||[];_.tab.links.ul.find(">li").each(function(){_.drags.push(_._applyDrag(this))})}},moveTabItem:function(A,C){var _=this,E=_.tab.links.ul.find(">li[tabid="+A+"]"),$=_.tab.links.ul.find(">li[tabid="+C+"]"),B=_.tab.links.ul.find(">li").index(E),D=_.tab.links.ul.find(">li").index($);if(B<D)$.after(E);else $.before(E)},setTabButton:function(){var _=this,A=this.options,C=0;$("li",_.tab.links.ul).each(function(){C+=$(this).width()+2});var B=_.tab.width();if(C>B){_.tab.links.append("<div class=\"l-tab-links-left\"></div><div class=\"l-tab-links-right\"></div>");_.setTabButtonEven();return true}else{_.tab.links.ul.animate({left:0});$(".l-tab-links-left,.l-tab-links-right",_.tab.links).remove();return false}},setTabButtonEven:function(){var _=this,A=this.options;$(".l-tab-links-left",_.tab.links).hover(function(){$(this).addClass("l-tab-links-left-over")},function(){$(this).removeClass("l-tab-links-left-over")}).click(function(){_.moveToPrevTabItem()});$(".l-tab-links-right",_.tab.links).hover(function(){$(this).addClass("l-tab-links-right-over")},function(){$(this).removeClass("l-tab-links-right-over")}).click(function(){_.moveToNextTabItem()})},moveToPrevTabItem:function(){var _=this,A=this.options,B=$(".l-tab-links-left",_.tab.links).width(),D=new Array();$("li",_.tab.links).each(function(C,_){var A=-1*B;if(C>0)A=parseInt(D[C-1])+$(this).prev().width()+2;D.push(A)});var C=-1*parseInt(_.tab.links.ul.css("left"));for(var E=0;E<D.length-1;E++)if(D[E]<C&&D[E+1]>=C){_.tab.links.ul.animate({left:-1*parseInt(D[E])});return}},moveToNextTabItem:function(){var _=this,A=this.options,C=$(".l-tab-links-right",_.tab).width(),J=0,H=$("li",_.tab.links.ul);H.each(function(){J+=$(this).width()+2});var B=_.tab.width(),G=new Array();for(var I=H.length-1;I>=0;I--){var F=J-B+C+2;if(I!=H.length-1)F=parseInt(G[H.length-2-I])-$(H[I+1]).width()-2;G.push(F)}var E=-1*parseInt(_.tab.links.ul.css("left"));for(var D=1;D<G.length;D++)if(G[D]<=E&&G[D-1]>E){_.tab.links.ul.animate({left:-1*parseInt(G[D-1])});return}},getTabItemCount:function(){var _=this,A=this.options;return $("li",_.tab.links.ul).length},getSelectedTabItemID:function(){var _=this,A=this.options;return $("li.l-selected",_.tab.links.ul).attr("tabid")},removeSelectedTabItem:function(){var $=this,_=this.options;$.removeTabItem($.getSelectedTabItemID())},overrideSelectedTabItem:function(A){var $=this,_=this.options;$.overrideTabItem($.getSelectedTabItemID(),A)},overrideTabItem:function(D,K){var _=this,I=this.options;if(_.trigger("beforeOverrideTabItem",[D])==false)return false;var L=K.tabid;if(L==undefined)L=_.getNewTabid();var E=K.url,G=K.content,J=K.target,B=K.text,A=K.showClose,H=K.height;if(_.isTabItemExist(L))return;var F=$("li[tabid="+D+"]",_.tab.links.ul),C=$(".l-tab-content-item[tabid="+D+"]",_.tab.content);if(!F||!C)return;F.attr("tabid",L);C.attr("tabid",L);if($("iframe",C).length==0&&E)C.html("<iframe frameborder='0'></iframe>");else if(G)C.html(G);$("iframe",C).attr("name",L);if(A==undefined)A=true;if(A==false)$(".l-tab-links-item-close",F).remove();else if($(".l-tab-links-item-close",F).length==0)F.append("<div class='l-tab-links-item-close'></div>");if(B==undefined)B=L;if(H)C.height(H);$("a",F).text(B);$("iframe",C).attr("src",E);_.trigger("afterOverrideTabItem",[D])},setHeader:function(A,_){$("li[tabid="+A+"] a",this.tab.links.ul).text(_)},selectTabItem:function(B){var _=this,A=this.options;if(_.trigger("beforeSelectTabItem",[B])==false)return false;_.selectedTabId=B;$("> .l-tab-content-item[tabid="+B+"]",_.tab.content).show().siblings().hide();$("li[tabid="+B+"]",_.tab.links.ul).addClass("l-selected").siblings().removeClass("l-selected");_.trigger("afterSelectTabItem",[B])},moveToLastTabItem:function(){var _=this,A=this.options,D=0;$("li",_.tab.links.ul).each(function(){D+=$(this).width()+2});var C=_.tab.width();if(D>C){var B=$(".l-tab-links-right",_.tab.links).width();_.tab.links.ul.animate({left:-1*(D-C+B+2)})}},isTabItemExist:function(B){var _=this,A=this.options;return $("li[tabid="+B+"]",_.tab.links.ul).length>0},addTabItem:function(L){var _=this,J=this.options;if(_.trigger("beforeAddTabItem",[M])==false)return false;var M=L.tabid;if(M==undefined)M=_.getNewTabid();var E=L.url,G=L.content,C=L.text,A=L.showClose,I=L.height;if(_.isTabItemExist(M)){_.selectTabItem(M);return}var F=$("<li><a></a><div class='l-tab-links-item-left'></div><div class='l-tab-links-item-right'></div><div class='l-tab-links-item-close'></div></li>"),D=$("<div class='l-tab-content-item'><div class='l-tab-loading' style='display:block;'></div><iframe frameborder='0'></iframe></div>"),K=$("div:first",D),H=$("iframe:first",D);if(_.makeFullHeight){var B=_.tab.height()-_.tab.links.height();D.height(B)}F.attr("tabid",M);D.attr("tabid",M);if(E)H.attr("name",M).attr("id",M).attr("src",E).bind("load.tab",function(){K.hide();if(L.callback)L.callback()});else{H.remove();K.remove()}if(G)D.html(G);else if(L.target)D.append(L.target);if(A==undefined)A=true;if(A==false)$(".l-tab-links-item-close",F).remove();if(C==undefined)C=M;if(I)D.height(I);$("a",F).text(C);_.tab.links.ul.append(F);_.tab.content.append(D);_.selectTabItem(M);if(_.setTabButton())_.moveToLastTabItem();_._addTabItemEvent(F);if(J.dragToMove&&$.fn.ligerDrag){_.drags=_.drags||[];F.each(function(){_.drags.push(_._applyDrag(this))})}_.trigger("afterAddTabItem",[M])},_addTabItemEvent:function(B){var _=this,A=this.options;B.click(function(){var A=$(this).attr("tabid");_.selectTabItem(A)});_.tab.menu&&_._addTabItemContextMenuEven(B);$(".l-tab-links-item-close",B).hover(function(){$(this).addClass("l-tab-links-item-close-over")},function(){$(this).removeClass("l-tab-links-item-close-over")}).click(function(){var A=$(this).parent().attr("tabid");_.removeTabItem(A)})},removeTabItem:function(F){var A=this,C=this.options;if(A.trigger("beforeRemoveTabItem",[F])==false)return false;var E=$("li[tabid="+F+"]",A.tab.links.ul).hasClass("l-selected");if(E){$(".l-tab-content-item[tabid="+F+"]",A.tab.content).prev().show();$("li[tabid="+F+"]",A.tab.links.ul).prev().addClass("l-selected").siblings().removeClass("l-selected")}var D=$(".l-tab-content-item[tabid="+F+"]",A.tab.content),_=$("iframe",D);if(_.length){var B=_[0];B.src="about:blank";B.contentWindow.document.write("");$.browser.msie&&CollectGarbage();_.remove()}D.remove();$("li[tabid="+F+"]",A.tab.links.ul).remove();A.setTabButton();A.trigger("afterRemoveTabItem",[F])},addHeight:function(A){var _=this,B=this.options,$=_.tab.height()+A;_.setHeight($)},setHeight:function(_){var $=this,A=this.options;$.tab.height(_);$.setContentHeight()},setContentHeight:function(){var _=this,B=this.options,A=_.tab.height()-_.tab.links.height();_.tab.content.height(A);$("> .l-tab-content-item",_.tab.content).height(A)},getNewTabid:function(){var $=this,_=this.options;$.getnewidcount=$.getnewidcount||0;return"tabitem"+(++$.getnewidcount)},getTabidList:function(D,_){var B=this,C=this.options,A=[];$("> li",B.tab.links.ul).each(function(){if($(this).attr("tabid")&&$(this).attr("tabid")!=D&&(!_||$(".l-tab-links-item-close",this).length>0))A.push($(this).attr("tabid"))});return A},removeOther:function(D,C){var A=this,B=this.options,_=A.getTabidList(D,true);$(_).each(function(){A.removeTabItem(this)})},reload:function(F){var _=this,C=this.options,B=$(".l-tab-content-item[tabid="+F+"]"),D=$(".l-tab-loading:first",B),A=$("iframe:first",B),E=$(A).attr("src");D.show();A.attr("src",E).unbind("load.tab").bind("load.tab",function(){D.hide()})},removeAll:function(C){var A=this,B=this.options,_=A.getTabidList(null,true);$(_).each(function(){A.removeTabItem(this)})},onResize:function(){var _=this,A=this.options;if(!A.height||typeof(A.height)!="string"||A.height.indexOf("%")==-1)return false;if(_.tab.parent()[0].tagName.toLowerCase()=="body"){var B=$(window).height();B-=parseInt(_.tab.parent().css("paddingTop"));B-=parseInt(_.tab.parent().css("paddingBottom"));_.height=A.heightDiff+B*parseFloat(_.height)*0.01}else _.height=A.heightDiff+(_.tab.parent().height()*parseFloat(A.height)*0.01);_.tab.height(_.height);_.setContentHeight()},_menuItemClick:function(A){var $=this,_=this.options;if(!A.id||!$.actionTabid)return;switch(A.id){case"close":if($.trigger("close")==false)return;$.removeTabItem($.actionTabid);$.actionTabid=null;break;case"closeother":if($.trigger("closeother")==false)return;$.removeOther($.actionTabid);break;case"closeall":if($.trigger("closeall")==false)return;$.removeAll();$.actionTabid=null;break;case"reload":if($.trigger("reload")==false)return;$.selectTabItem($.actionTabid);$.reload($.actionTabid);break}},_addTabItemContextMenuEven:function(B){var _=this,A=this.options;B.bind("contextmenu",function(A){if(!_.tab.menu)return;_.actionTabid=B.attr("tabid");_.tab.menu.show({top:A.pageY,left:A.pageX});if($(".l-tab-links-item-close",this).length==0)_.tab.menu.setDisabled("close");else _.tab.menu.setEnabled("close");return false})}})})(jQuery);(function($){$.fn.ligerTextBox=function(){return $.ligerui.run.call(this,"ligerTextBox",arguments)};$.fn.ligerGetTextBoxManager=function(){return $.ligerui.run.call(this,"ligerGetTextBoxManager",arguments)};$.ligerDefaults.TextBox={onChangeValue:null,onMouseOver:null,onMouseOut:null,onBlur:null,onFocus:null,width:null,disabled:false,value:null,nullText:null,digits:false,number:false,currency:false,readonly:false};$.ligerui.controls.TextBox=function(_,A){$.ligerui.controls.TextBox.base.constructor.call(this,_,A)};$.ligerui.controls.TextBox.ligerExtend($.ligerui.controls.Input,{__getType:function(){return"TextBox"},__idPrev:function(){return"TextBox"},_init:function(){$.ligerui.controls.TextBox.base._init.call(this);var _=this,A=this.options;if(!A.width)A.width=$(_.element).width();if($(this.element).attr("readonly"))A.readonly=true;else if(A.readonly)$(this.element).attr("readonly",true)},_render:function(){var _=this,A=this.options;_.inputText=$(this.element);_.wrapper=_.inputText.wrap("<div class=\"l-text\"></div>").parent();_.wrapper.append("<div class=\"l-text-l\"></div><div class=\"l-text-r\"></div>");if(!_.inputText.hasClass("l-text-field"))_.inputText.addClass("l-text-field");this._setEvent();if(A.digits||A.number||A.currency)_.inputText.addClass("l-text-field-number");_.set(A);_.checkValue()},destroy:function(){var $=this;if($.wrapper)$.wrapper.remove();$.options=null;liger.remove(this)},_getValue:function(){return this.inputText.val()},_setNullText:function(){this.checkNotNull()},checkValue:function(){var B=this,D=this.options,A=B.inputText.val()||"";if(D.currency)A=A.replace(/\$|\,/g,"");var C=D.number||D.currency,$=D.digits;if(C&&!/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(A)||$&&!/^\d+$/.test(A)){B.inputText.val(B.value||0);D.currency&&B.inputText.val(_(B.value));return}B.value=A;D.currency&&B.inputText.val(_(B.value))},checkNotNull:function(){var $=this,_=this.options;if(_.nullText&&!_.disabled)if(!$.inputText.val())$.inputText.addClass("l-text-field-null").val(_.nullText)},_setEvent:function(){var _=this,A=this.options;_.inputText.bind("blur.textBox",function(){_.trigger("blur");_.checkNotNull();_.checkValue();_.wrapper.removeClass("l-text-focus")}).bind("focus.textBox",function(){_.trigger("focus");if(A.nullText)if($(this).hasClass("l-text-field-null"))$(this).removeClass("l-text-field-null").val("");_.wrapper.addClass("l-text-focus")}).change(function(){_.trigger("changeValue",[this.value])});_.wrapper.hover(function(){_.trigger("mouseOver");_.wrapper.addClass("l-text-over")},function(){_.trigger("mouseOut");_.wrapper.removeClass("l-text-over")})},_setDisabled:function(A){var $=this,_=this.options;if(A){this.inputText.attr("readonly","readonly");this.wrapper.addClass("l-text-disabled")}else if(!_.readonly){this.inputText.removeAttr("readonly");this.wrapper.removeClass("l-text-disabled")}},_setWidth:function($){if($>20){this.wrapper.css({width:$});this.inputText.css({width:$-4})}},_setHeight:function($){if($>10){this.wrapper.height($);this.inputText.height($-2)}},_setValue:function($){if($!=null)this.inputText.val($)},_setLabel:function(B){var _=this,A=this.options;if(!_.labelwrapper){_.labelwrapper=_.wrapper.wrap("<div class=\"l-labeltext\"></div>").parent();var C=$("<div class=\"l-text-label\" style=\"float:left;\">"+B+":&nbsp</div>");_.labelwrapper.prepend(C);_.wrapper.css("float","left");if(!A.labelWidth)A.labelWidth=C.width();else _._setLabelWidth(A.labelWidth);C.height(_.wrapper.height());if(A.labelAlign)_._setLabelAlign(A.labelAlign);_.labelwrapper.append("<br style=\"clear:both;\" />");_.labelwrapper.width(A.labelWidth+A.width+2)}else _.labelwrapper.find(".l-text-label").html(B+":&nbsp")},_setLabelWidth:function(A){var $=this,_=this.options;if(!$.labelwrapper)return;$.labelwrapper.find(".l-text-label").width(A)},_setLabelAlign:function(A){var $=this,_=this.options;if(!$.labelwrapper)return;$.labelwrapper.find(".l-text-label").css("text-align",A)},updateStyle:function(){var $=this,_=this.options;if($.inputText.attr("readonly")){$.wrapper.addClass("l-text-readonly");_.disabled=true}else{$.wrapper.removeClass("l-text-readonly");_.disabled=false}if($.inputText.attr("disabled")){$.wrapper.addClass("l-text-disabled");_.disabled=true}else{$.wrapper.removeClass("l-text-disabled");_.disabled=false}if($.inputText.hasClass("l-text-field-null")&&$.inputText.val()!=_.nullText)$.inputText.removeClass("l-text-field-null");$.checkValue()}});function _($){if(!$)return"0.00";$=$.toString().replace(/\$|\,/g,"");if(isNaN($))$="0.00";sign=($==($=Math.abs($)));$=Math.floor($*100+0.50000000001);cents=$%100;$=Math.floor($/100).toString();if(cents<10)cents="0"+cents;for(var _=0;_<Math.floor(($.length-(1+_))/3);_++)$=$.substring(0,$.length-(4*_+3))+","+$.substring($.length-(4*_+3));return""+(((sign)?"":"-")+""+$+"."+cents)}})(jQuery);(function($){$.ligerTip=function(_){return $.ligerui.run.call(null,"ligerTip",arguments)};$.fn.ligerTip=function(_){this.each(function(){var A=$.extend({},$.ligerDefaults.ElementTip,_||{});A.target=A.target||this;if(A.auto||_==undefined){if(!A.content){A.content=this.title;if(A.removeTitle)$(this).removeAttr("title")}A.content=A.content||this.title;$(this).bind("mouseover.tip",function(){A.x=$(this).offset().left+$(this).width()+(A.distanceX||0);A.y=$(this).offset().top+(A.distanceY||0);$.ligerTip(A)}).bind("mouseout.tip",function(){var _=$.ligerui.managers[this.ligeruitipid];if(_)_.remove()})}else{if(A.target.ligeruitipid)return;A.x=$(this).offset().left+$(this).width()+(A.distanceX||0);A.y=$(this).offset().top+(A.distanceY||0);A.x=A.x||0;A.y=A.y||0;$.ligerTip(A)}});return $.ligerui.get(this,"ligeruitipid")};$.fn.ligerHideTip=function(_){return this.each(function(){var B=_||{};if(B.isLabel==undefined)B.isLabel=this.tagName.toLowerCase()=="label"&&$(this).attr("for")!=null;var C=this;if(B.isLabel){var D=$("#"+$(this).attr("for"));if(D.length==0)return;C=D[0]}var A=$.ligerui.managers[C.ligeruitipid];if(A)A.remove()}).unbind("mouseover.tip").unbind("mouseout.tip")};$.fn.ligerGetTipManager=function(){return $.ligerui.get(this)};$.ligerDefaults=$.ligerDefaults||{};$.ligerDefaults.HideTip={};$.ligerDefaults.Tip={content:null,callback:null,width:150,height:null,x:0,y:0,appendIdTo:null,target:null,auto:null,removeTitle:true};$.ligerDefaults.ElementTip={distanceX:1,distanceY:-3,auto:null,removeTitle:true};$.ligerMethos.Tip={};$.ligerui.controls.Tip=function(_){$.ligerui.controls.Tip.base.constructor.call(this,null,_)};$.ligerui.controls.Tip.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"Tip"},__idPrev:function(){return"Tip"},_extendMethods:function(){return $.ligerMethos.Tip},_render:function(){var _=this,A=this.options,B=$("<div class=\"l-verify-tip\"><div class=\"l-verify-tip-corner\"></div><div class=\"l-verify-tip-content\"></div></div>");_.tip=B;_.tip.attr("id",_.id);if(A.content){$("> .l-verify-tip-content:first",B).html(A.content);B.appendTo("body")}else return;B.css({left:A.x,top:A.y}).show();A.width&&$("> .l-verify-tip-content:first",B).width(A.width-8);A.height&&$("> .l-verify-tip-content:first",B).width(A.height);eee=A.appendIdTo;if(A.appendIdTo)A.appendIdTo.attr("ligerTipId",_.id);if(A.target){$(A.target).attr("ligerTipId",_.id);A.target.ligeruitipid=_.id}A.callback&&A.callback(B);_.set(A)},_setContent:function(_){$("> .l-verify-tip-content:first",this.tip).html(_)},remove:function(){if(this.options.appendIdTo)this.options.appendIdTo.removeAttr("ligerTipId");if(this.options.target){$(this.options.target).removeAttr("ligerTipId");this.options.target.ligeruitipid=null}this.tip.remove()}})})(jQuery);(function($){$.fn.ligerToolBar=function(_){return $.ligerui.run.call(this,"ligerToolBar",arguments)};$.fn.ligerGetToolBarManager=function(){return $.ligerui.run.call(this,"ligerGetToolBarManager",arguments)};$.ligerDefaults.ToolBar={};$.ligerMethos.ToolBar={};$.ligerui.controls.ToolBar=function(_,A){$.ligerui.controls.ToolBar.base.constructor.call(this,_,A)};$.ligerui.controls.ToolBar.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"ToolBar"},__idPrev:function(){return"ToolBar"},_extendMethods:function(){return $.ligerMethos.ToolBar},_render:function(){var _=this,A=this.options;_.toolbarItemCount=0;_.toolBar=$(this.element);_.toolBar.addClass("l-toolbar");_.set(A)},_setItems:function(A){var _=this;_.toolBar.html("");$(A).each(function(A,$){_.addItem($)})},removeItem:function(B){var _=this,A=this.options;$("> .l-toolbar-item[toolbarid="+B+"]",_.toolBar).remove()},setEnabled:function(B){var _=this,A=this.options;$("> .l-toolbar-item[toolbarid="+B+"]",_.toolBar).removeClass("l-toolbar-item-disable")},setDisabled:function(B){var _=this,A=this.options;$("> .l-toolbar-item[toolbarid="+B+"]",_.toolBar).addClass("l-toolbar-item-disable")},isEnable:function(B){var _=this,A=this.options;return!$("> .l-toolbar-item[toolbarid="+B+"]",_.toolBar).hasClass("l-toolbar-item-disable")},addItem:function(C){var _=this,B=this.options;if(C.line){_.toolBar.append("<div class=\"l-bar-separator\"></div>");return}var A=$("<div class=\"l-toolbar-item l-panel-btn\"><span></span><div class=\"l-panel-btn-l\"></div><div class=\"l-panel-btn-r\"></div></div>");_.toolBar.append(A);if(!C.id)C.id="item-"+(++_.toolbarItemCount);A.attr("toolbarid",C.id);if(C.img){A.append("<img src='"+C.img+"' />");A.addClass("l-toolbar-item-hasicon")}else if(C.icon){A.append("<div class='l-icon l-icon-"+C.icon+"'></div>");A.addClass("l-toolbar-item-hasicon")}else if(C.color){A.append("<div class='l-toolbar-item-color' style='background:"+C.color+"'></div>");A.addClass("l-toolbar-item-hasicon")}C.text&&$("span:first",A).html(C.text);C.disable&&A.addClass("l-toolbar-item-disable");C.click&&A.click(function(){if($(this).hasClass("l-toolbar-item-disable"))return;C.click(C)});if(C.menu){C.menu=$.ligerMenu(C.menu);A.hover(function(){if($(this).hasClass("l-toolbar-item-disable"))return;_.actionMenu&&_.actionMenu.hide();var A=$(this).offset().left,B=$(this).offset().top+$(this).height();C.menu.show({top:B,left:A});_.actionMenu=C.menu;$(this).addClass("l-panel-btn-over")},function(){if($(this).hasClass("l-toolbar-item-disable"))return;$(this).removeClass("l-panel-btn-over")})}else A.hover(function(){if($(this).hasClass("l-toolbar-item-disable"))return;$(this).addClass("l-panel-btn-over")},function(){if($(this).hasClass("l-toolbar-item-disable"))return;$(this).removeClass("l-panel-btn-over")})}});$.ligerui.controls.ToolBar.prototype.setEnable=$.ligerui.controls.ToolBar.prototype.setEnabled;$.ligerui.controls.ToolBar.prototype.setDisable=$.ligerui.controls.ToolBar.prototype.setDisabled})(jQuery);(function($){$.fn.ligerTree=function(_){return $.ligerui.run.call(this,"ligerTree",arguments)};$.fn.ligerGetTreeManager=function(){return $.ligerui.run.call(this,"ligerGetTreeManager",arguments)};$.ligerDefaults.Tree={url:null,data:null,checkbox:true,autoCheckboxEven:true,parentIcon:"folder",childIcon:"leaf",textFieldName:"text",attribute:["id","url"],treeLine:true,nodeWidth:90,statusName:"__status",isLeaf:null,single:false,needCancel:true,onBeforeExpand:function(){},onContextmenu:function(){},onExpand:function(){},onBeforeCollapse:function(){},onCollapse:function(){},onBeforeSelect:function(){},onSelect:function(){},onBeforeCancelSelect:function(){},onCancelselect:function(){},onCheck:function(){},onSuccess:function(){},onError:function(){},onClick:function(){},idFieldName:"id",parentIDFieldName:null,topParentIDValue:0,onBeforeAppend:function(){},onAppend:function(){},onAfterAppend:function(){},slide:true,iconFieldName:"icon",nodeDraggable:false,nodeDraggingRender:null,btnClickToToggleOnly:true,ajaxType:"post",render:null,selectable:null,isExpand:null,delay:null};$.ligerui.controls.Tree=function(_,A){$.ligerui.controls.Tree.base.constructor.call(this,_,A)};$.ligerui.controls.Tree.ligerExtend($.ligerui.core.UIComponent,{_init:function(){$.ligerui.controls.Tree.base._init.call(this);var _=this,A=this.options;if(A.single)A.autoCheckboxEven=false},_render:function(){var _=this,A=this.options;_.set(A,true);_.tree=$(_.element);_.tree.addClass("l-tree");_.toggleNodeCallbacks=[];_.sysAttribute=["isexpand","ischecked","href","style","delay"];_.loading=$("<div class='l-tree-loading'></div>");_.tree.after(_.loading);_.data=[];_.maxOutlineLevel=1;_.treedataindex=0;_._applyTree();_._setTreeEven();_.set(A,false)},_setTreeLine:function($){if($)this.tree.removeClass("l-tree-noline");else this.tree.addClass("l-tree-noline")},_setParms:function(){var _=this,A=this.options;if($.isFunction(A.parms))A.parms=A.parms()},_setUrl:function(A){var $=this,_=this.options;if(A){$.clear();$.loadData(null,A)}},_setData:function($){if($){this.clear();this.append(null,$)}},setData:function($){this.set("data",$)},getData:function(){return this.data},hasChildren:function($){if(this.options.isLeaf)return!this.options.isLeaf($);return $.children?true:false},getParent:function(A,D){var _=this;A=_.getNodeDom(A);var B=_.getParentTreeItem(A,D);if(!B)return null;var C=$(B).attr("treedataindex");return _._getDataNodeByTreeDataIndex(C)},getParentTreeItem:function(A,B){var _=this;A=_.getNodeDom(A);var C=$(A);if(C.parent().hasClass("l-tree"))return null;if(B==undefined){if(C.parent().parent("li").length==0)return null;return C.parent().parent("li")[0]}var D=parseInt(C.attr("outlinelevel")),E=C;for(var F=D-1;F>=B;F--)E=E.parent().parent("li");return E[0]},getChecked:function(){var _=this,B=this.options;if(!this.options.checkbox)return null;var A=[];$(".l-checkbox-checked",_.tree).parent().parent("li").each(function(){var B=parseInt($(this).attr("treedataindex"));A.push({target:this,data:_._getDataNodeByTreeDataIndex(_.data,B)})});return A},getSelected:function(){var _=this,C=this.options,B={};B.target=$(".l-selected",_.tree).parent("li")[0];if(B.target){var A=parseInt($(B.target).attr("treedataindex"));B.data=_._getDataNodeByTreeDataIndex(_.data,A);return B}return null},upgrade:function(A){var _=this,B=this.options;$(".l-note",A).each(function(){$(this).removeClass("l-note").addClass("l-expandable-open")});$(".l-note-last",A).each(function(){$(this).removeClass("l-note-last").addClass("l-expandable-open")});$("."+_._getChildNodeClassName(),A).each(function(){$(this).removeClass(_._getChildNodeClassName()).addClass(_._getParentNodeClassName(true))})},demotion:function(B){var _=this,C=this.options;if(!B&&B[0].tagName.toLowerCase()!="li")return;var A=$(B).hasClass("l-last");$(".l-expandable-open",B).each(function(){$(this).removeClass("l-expandable-open").addClass(A?"l-note-last":"l-note")});$(".l-expandable-close",B).each(function(){$(this).removeClass("l-expandable-close").addClass(A?"l-note-last":"l-note")});$("."+_._getParentNodeClassName(true),B).each(function(){$(this).removeClass(_._getParentNodeClassName(true)).addClass(_._getChildNodeClassName())})},collapseAll:function(){var _=this,A=this.options;$(".l-expandable-open",_.tree).click()},expandAll:function(){var _=this,A=this.options;$(".l-expandable-close",_.tree).click()},loadData:function(B,F,D,C){var _=this,E=this.options;C=$.extend({showLoading:function(){_.loading.show()},hideLoading:function(){_.loading.hide()}},C||{});var A=E.ajaxType;D=D||[];$.ajax({type:A,url:F,data:D,dataType:"json",beforeSend:function(){C.showLoading()},success:function($){if(!$)return;C.hideLoading();_.append(B,$);_.trigger("success",[$])},error:function(C,$,B){try{A.hideLoading();_.trigger("error",[C,$,B])}catch(A){}}})},clear:function(){var $=this,_=this.options;$.toggleNodeCallbacks=[];$.data=null;$.data=[];$.nodes=null;$.tree.html("")},getNodeDom:function(B){var _=this,A=this.options;if(B==null)return B;if(typeof(B)=="string"||typeof(B)=="number")return $("li[treedataindex="+B+"]",_.tree).get(0);else if(typeof(B)=="object"&&"treedataindex"in B)return _.getNodeDom(B["treedataindex"]);return B},hide:function(A){var _=this,B=this.options;A=_.getNodeDom(A);if(A)$(A).hide()},show:function(A){var _=this,B=this.options;A=_.getNodeDom(A);if(A)$(A).show()},remove:function(C){var _=this,D=this.options;C=_.getNodeDom(C);var A=parseInt($(C).attr("treedataindex")),E=_._getDataNodeByTreeDataIndex(_.data,A);if(E)_._setTreeDataStatus([E],"delete");var B=_.getParentTreeItem(C);if(D.checkbox)_._setParentCheckboxStatus($(C));$(C).remove();_._updateStyle(B?$("ul:first",B):_.tree)},_updateStyle:function(A){var _=this,B=this.options,D=$(" > li",A),C=D.length;if(!C)return;D.each(function(B,A){if(B==0&&!$(this).hasClass("l-first"))$(this).addClass("l-first");if(B==C-1&&!$(this).hasClass("l-last"))$(this).addClass("l-last");if(B==0&&B==C-1)$(this).addClass("l-onlychild");$("> div .l-note,> div .l-note-last",this).removeClass("l-note l-note-last").addClass(B==C-1?"l-note-last":"l-note");_._setTreeItem(this,{isLast:B==C-1})})},update:function(E,C){var _=this,B=this.options;E=_.getNodeDom(E);var A=parseInt($(E).attr("treedataindex"));nodedata=_._getDataNodeByTreeDataIndex(_.data,A);for(var D in C){nodedata[D]=C[D];if(D==B.textFieldName)$("> .l-body > span",E).text(C[D])}},append:function(J,B,F,H){var C=this,K=this.options;J=C.getNodeDom(J);if(C.trigger("beforeAppend",[J,B])==false)return false;if(!B||!B.length)return false;if(K.idFieldName&&K.parentIDFieldName)B=C.arrayToTree(B,K.idFieldName,K.parentIDFieldName);C._addTreeDataIndexToData(B);C._setTreeDataStatus(B,"add");if(F!=null)F=C.getNodeDom(F);C.trigger("append",[J,B]);C._appendData(J,B);if(J==null){var L=C._getTreeHTMLByData(B,1,[],true);L[L.length-1]=L[0]="";if(F!=null){$(F)[H?"after":"before"](L.join(""));C._updateStyle(J?$("ul:first",J):C.tree)}else{if($("> li:last",C.tree).length>0)C._setTreeItem($("> li:last",C.tree)[0],{isLast:false});C.tree.append(L.join(""))}$(".l-body",C.tree).hover(function(){$(this).addClass("l-over")},function(){$(this).removeClass("l-over")});C._upadteTreeWidth();C.trigger("afterAppend",[J,B]);return}var I=$(J),E=parseInt(I.attr("outlinelevel")),D=$("> ul",I).length>0;if(!D){I.append("<ul class='l-children'></ul>");C.upgrade(J)}var _=[];for(var G=1;G<=E-1;G++){var A=$(C.getParentTreeItem(J,G));_.push(A.hasClass("l-last"))}_.push(I.hasClass("l-last"));L=C._getTreeHTMLByData(B,E+1,_,true);L[L.length-1]=L[0]="";if(F!=null){$(F)[H?"after":"before"](L.join(""));C._updateStyle(J?$("ul:first",J):C.tree)}else{if($("> .l-children > li:last",I).length>0)C._setTreeItem($("> .l-children > li:last",I)[0],{isLast:false});$(">.l-children",J).append(L.join(""))}C._upadteTreeWidth();$(">.l-children .l-body",J).hover(function(){$(this).addClass("l-over")},function(){$(this).removeClass("l-over")});C.trigger("afterAppend",[J,B])},cancelSelect:function(E){var _=this,D=this.options,F=_.getNodeDom(E),C=$(F),B=parseInt(C.attr("treedataindex")),G=_._getDataNodeByTreeDataIndex(_.data,B),A=$(">div:first",C);if(D.checkbox)$(".l-checkbox",A).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked");else A.removeClass("l-selected");_.trigger("cancelSelect",[{data:G,target:C[0]}])},selectNode:function(F){var _=this,D=this.options,G=null;if(typeof(F)=="function")G=F;else if(typeof(F)=="object"){var C=$(F),B=parseInt(C.attr("treedataindex")),E=_._getDataNodeByTreeDataIndex(_.data,B),A=$(">div:first",C);if(D.checkbox)$(".l-checkbox",A).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked");else A.addClass("l-selected");_.trigger("select",[{data:E,target:C[0]}]);return}else G=function($){if(!$[D.idFieldName])return false;return $[D.idFieldName].toString()==F.toString()};$("li",_.tree).each(function(){var B=$(this),A=parseInt(B.attr("treedataindex")),C=_._getDataNodeByTreeDataIndex(_.data,A);if(G(C,A))_.selectNode(this);else _.cancelSelect(this)})},getTextByID:function($){var _=this,A=this.options,B=_.getDataByID($);if(!B)return null;return B[A.textFieldName]},getDataByID:function(_){var A=this,B=this.options,C=null;$("li",A.tree).each(function(){if(C)return;var E=$(this),D=parseInt(E.attr("treedataindex")),F=A._getDataNodeByTreeDataIndex(A.data,D);if(F[B.idFieldName].toString()==_.toString())C=F});return C},arrayToTree:function(B,$,D){if(!B||!B.length)return[];var A=[],G={},F=B.length;for(var H=0;H<F;H++){var C=B[H];G[C[$]]=C}for(H=0;H<F;H++){var _=B[H],E=G[_[D]];if(!E){A.push(_);continue}E.children=E.children||[];E.children.push(_)}return A},_getDataNodeByTreeDataIndex:function(C,_){var $=this,B=this.options;for(var D=0;D<C.length;D++){if(C[D].treedataindex==_)return C[D];if(C[D].children){var A=$._getDataNodeByTreeDataIndex(C[D].children,_);if(A)return A}}return null},_setTreeDataStatus:function(C,A){var _=this,B=this.options;$(C).each(function(){this[B.statusName]=A;if(this.children)_._setTreeDataStatus(this.children,A)})},_addTreeDataIndexToData:function(B){var _=this,A=this.options;$(B).each(function(){if(this.treedataindex!=undefined)return;this.treedataindex=_.treedataindex++;if(this.children)_._addTreeDataIndexToData(this.children)})},_addToNodes:function(B){var _=this,A=this.options;_.nodes=_.nodes||[];_.nodes.push(B);if(!B.children)return;$(B.children).each(function(A,$){_._addToNodes($)})},_appendData:function(B,D){var _=this,C=this.options,A=parseInt($(B).attr("treedataindex")),E=_._getDataNodeByTreeDataIndex(_.data,A);if(_.treedataindex==undefined)_.treedataindex=0;if(E&&E.children==undefined)E.children=[];$(D).each(function(A,$){if(E)E.children[E.children.length]=$;else _.data[_.data.length]=$;_._addToNodes($)})},_setTreeItem:function(C,E){var _=this,D=this.options;if(!E)return;C=_.getNodeDom(C);var A=$(C),B=parseInt(A.attr("outlinelevel"));if(E.isLast!=undefined)if(E.isLast==true){A.removeClass("l-last").addClass("l-last");$("> div .l-note",A).removeClass("l-note").addClass("l-note-last");$(".l-children li",A).find(".l-box:eq("+(B-1)+")").removeClass("l-line")}else if(E.isLast==false){A.removeClass("l-last");$("> div .l-note-last",A).removeClass("l-note-last").addClass("l-note");$(".l-children li",A).find(".l-box:eq("+(B-1)+")").removeClass("l-line").addClass("l-line")}},_upadteTreeWidth:function(){var $=this,A=this.options,_=$.maxOutlineLevel*22;if(A.checkbox)_+=22;if(A.parentIcon||A.childIcon)_+=22;_+=A.nodeWidth;$.tree.width(_)},_getChildNodeClassName:function(){var $=this,_=this.options;return"l-tree-icon-"+_.childIcon},_getParentNodeClassName:function(B){var $=this,_=this.options,A="l-tree-icon-"+_.parentIcon;if(B)A+="-open";return A},_isExpand:function(C,_){var $=this,B=this.options,A=C.isExpand!=null?C.isExpand:(C.isexpand!=null?C.isexpand:B.isExpand);if(A==null)return true;if(typeof(A)=="function")A=B.isExpand({data:C,level:_});if(typeof(A)=="boolean")return A;if(typeof(A)=="string")return A=="true";if(typeof(A)=="number")return A>_;return true},_getDelay:function(C,A){var _=this,B=this.options,D=C.delay!=null?C.delay:B.delay;if(D==null)return false;if(typeof(D)=="function")D=D({data:C,level:A});if(typeof(D)=="boolean")return D;if(typeof(D)=="string")return{url:D};if(typeof(D)=="number")D=[D];if($.isArray(D))return $.inArray(A,D)!=-1;if(typeof(D)=="object"&&D.url)return D;return false},_getTreeHTMLByData:function(C,B,_,K){var A=this,N=this.options;if(A.maxOutlineLevel<B)A.maxOutlineLevel=B;_=_||[];B=B||1;var L=[];if(!K)L.push("<ul class=\"l-children\" style=\"display:none\">");else L.push("<ul class='l-children'>");for(var I=0;I<C.length;I++){var D=C[I],E=I==0,H=I==C.length-1,O=A._getDelay(D,B),J=O?false:A._isExpand(D,B);L.push("<li ");if(D.treedataindex!=undefined)L.push("treedataindex=\""+D.treedataindex+"\" ");if(J)L.push("isexpand="+D.isexpand+" ");L.push("outlinelevel="+B+" ");for(var F=0;F<A.sysAttribute.length;F++)if($(this).attr(A.sysAttribute[F]))C[dataindex][A.sysAttribute[F]]=$(this).attr(A.sysAttribute[F]);for(F=0;F<N.attribute.length;F++)if(D[N.attribute[F]])L.push(N.attribute[F]+"=\""+D[N.attribute[F]]+"\" ");L.push("class=\"");E&&L.push("l-first ");H&&L.push("l-last ");E&&H&&L.push("l-onlychild ");L.push("\"");L.push(">");L.push("<div class=\"l-body");if(N.selectable&&N.selectable(D)==false)L.push(" l-unselectable");L.push("\">");for(var G=0;G<=B-2;G++)if(_[G])L.push("<div class=\"l-box\"></div>");else L.push("<div class=\"l-box l-line\"></div>");if(A.hasChildren(D)){if(J)L.push("<div class=\"l-box l-expandable-open\"></div>");else L.push("<div class=\"l-box l-expandable-close\"></div>");if(N.checkbox)if(D.ischecked)L.push("<div class=\"l-box l-checkbox l-checkbox-checked\"></div>");else L.push("<div class=\"l-box l-checkbox l-checkbox-unchecked\"></div>");if(N.parentIcon){L.push("<div class=\"l-box l-tree-icon ");L.push(A._getParentNodeClassName(J?true:false)+" ");if(N.iconFieldName&&D[N.iconFieldName])L.push("l-tree-icon-none");L.push("\">");if(N.iconFieldName&&D[N.iconFieldName])L.push("<img src=\""+D[N.iconFieldName]+"\" />");L.push("</div>")}}else{if(H)L.push("<div class=\"l-box l-note-last\"></div>");else L.push("<div class=\"l-box l-note\"></div>");if(N.checkbox)if(D.ischecked)L.push("<div class=\"l-box l-checkbox l-checkbox-checked\"></div>");else L.push("<div class=\"l-box l-checkbox l-checkbox-unchecked\"></div>");if(N.childIcon){L.push("<div class=\"l-box l-tree-icon ");L.push(A._getChildNodeClassName()+" ");if(N.iconFieldName&&D[N.iconFieldName])L.push("l-tree-icon-none");L.push("\">");if(N.iconFieldName&&D[N.iconFieldName])L.push("<img src=\""+D[N.iconFieldName]+"\" />");L.push("</div>")}}if(N.render)L.push("<span>"+N.render(D,D[N.textFieldName])+"</span>");else L.push("<span>"+D[N.textFieldName]+"</span>");L.push("</div>");if(A.hasChildren(D)){var M=[];for(G=0;G<_.length;G++)M.push(_[G]);M.push(H);if(O){if(O==true)A.toggleNodeCallbacks.push({data:D,callback:function(C,D){var _=A._getTreeHTMLByData(D.children,B+1,M,J).join("");$(C).append(_);$(">.l-children .l-body",C).hover(function(){$(this).addClass("l-over")},function(){$(this).removeClass("l-over")});A._removeToggleNodeCallback(D)}});else if(O.url)(function(B,C,_){A.toggleNodeCallbacks.push({data:B,callback:function(B,D){A.loadData(B,C,_,{showLoading:function(){$("div.l-expandable-close:first",B).addClass("l-box-loading")},hideLoading:function(){$("div.l-box-loading:first",B).removeClass("l-box-loading")}});A._removeToggleNodeCallback(D)}})})(D,O.url,O.parms)}else L.push(A._getTreeHTMLByData(D.children,B+1,M,J).join(""))}L.push("</li>")}L.push("</ul>");return L},_removeToggleNodeCallback:function(_){var $=this,A=this.options;for(var B=0;B<=$.toggleNodeCallbacks.length;B++)if($.toggleNodeCallbacks[B]&&$.toggleNodeCallbacks[B].data==_){$.toggleNodeCallbacks.splice(B,1);break}},_getDataByTreeHTML:function(A){var _=this,B=this.options,C=[];$("> li",A).each(function(F,A){var D=C.length;C[D]={treedataindex:_.treedataindex++};C[D][B.textFieldName]=$("> span,> a",this).html();for(var E=0;E<_.sysAttribute.length;E++)if($(this).attr(_.sysAttribute[E]))C[D][_.sysAttribute[E]]=$(this).attr(_.sysAttribute[E]);for(E=0;E<B.attribute.length;E++)if($(this).attr(B.attribute[E]))C[D][B.attribute[E]]=$(this).attr(B.attribute[E]);if($("> ul",this).length>0)C[D].children=_._getDataByTreeHTML($("> ul",this))});return C},_applyTree:function(){var _=this,A=this.options;_.data=_._getDataByTreeHTML(_.tree);var B=_._getTreeHTMLByData(_.data,1,[],true);B[B.length-1]=B[0]="";_.tree.html(B.join(""));_._upadteTreeWidth();$(".l-body",_.tree).hover(function(){$(this).addClass("l-over")},function(){$(this).removeClass("l-over")})},_getSrcElementByEvent:function(B){var _=this,F=(B.target||B.srcElement),E=F.tagName.toLowerCase(),D=$(F).parents().add(F),G=function(_){for(var A=D.length-1;A>=0;A--)if($(D[A]).hasClass(_))return D[A];return null};if(D.index(this.element)==-1)return{out:true};var C={tree:G("l-tree"),node:G("l-body"),checkbox:G("l-checkbox"),icon:G("l-tree-icon"),text:E=="span"};if(C.node){var A=parseInt($(C.node).parent().attr("treedataindex"));C.data=_._getDataNodeByTreeDataIndex(_.data,A)}return C},_setTreeEven:function(){var _=this,A=this.options;if(_.hasBind("contextmenu"))_.tree.bind("contextmenu",function(B){var D=(B.target||B.srcElement),C=null;if(D.tagName.toLowerCase()=="a"||D.tagName.toLowerCase()=="span"||$(D).hasClass("l-box"))C=$(D).parent().parent();else if($(D).hasClass("l-body"))C=$(D).parent();else if(D.tagName.toLowerCase()=="li")C=$(D);if(!C)return;var A=parseInt(C.attr("treedataindex")),E=_._getDataNodeByTreeDataIndex(_.data,A);return _.trigger("contextmenu",[{data:E,target:C[0]},B])});_.tree.click(function(C){var H=(C.target||C.srcElement),D=null;if(H.tagName.toLowerCase()=="a"||H.tagName.toLowerCase()=="span"||$(H).hasClass("l-box"))D=$(H).parent().parent();else if($(H).hasClass("l-body"))D=$(H).parent();else D=$(H);if(!D)return;var B=parseInt(D.attr("treedataindex")),I=_._getDataNodeByTreeDataIndex(_.data,B),F=$("div.l-body:first",D).find("div.l-expandable-open:first,div.l-expandable-close:first"),E=$(H).hasClass("l-expandable-open")||$(H).hasClass("l-expandable-close");if(!$(H).hasClass("l-checkbox")&&!E)if(!D.hasClass("l-unselectable"))if($(">div:first",D).hasClass("l-selected")&&A.needCancel){if(_.trigger("beforeCancelSelect",[{data:I,target:D[0]}])==false)return false;$(">div:first",D).removeClass("l-selected");_.trigger("cancelSelect",[{data:I,target:D[0]}])}else{if(_.trigger("beforeSelect",[{data:I,target:D[0]}])==false)return false;$(".l-body",_.tree).removeClass("l-selected");$(">div:first",D).addClass("l-selected");_.trigger("select",[{data:I,target:D[0]}])}if($(H).hasClass("l-checkbox")){if(A.autoCheckboxEven){if($(H).hasClass("l-checkbox-unchecked")){$(H).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked");$(".l-children .l-checkbox",D).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked");_.trigger("check",[{data:I,target:D[0]},true])}else if($(H).hasClass("l-checkbox-checked")){$(H).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked");$(".l-children .l-checkbox",D).removeClass("l-checkbox-incomplete l-checkbox-checked").addClass("l-checkbox-unchecked");_.trigger("check",[{data:I,target:D[0]},false])}else if($(H).hasClass("l-checkbox-incomplete")){$(H).removeClass("l-checkbox-incomplete").addClass("l-checkbox-checked");$(".l-children .l-checkbox",D).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked");_.trigger("check",[{data:I,target:D[0]},true])}_._setParentCheckboxStatus(D)}else if($(H).hasClass("l-checkbox-unchecked")){$(H).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked");if(A.single)$(".l-checkbox",_.tree).not(H).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked");_.trigger("check",[{data:I,target:D[0]},true])}else if($(H).hasClass("l-checkbox-checked")){$(H).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked");_.trigger("check",[{data:I,target:D[0]},false])}}else if(F.hasClass("l-expandable-open")&&(!A.btnClickToToggleOnly||E)){if(_.trigger("beforeCollapse",[{data:I,target:D[0]}])==false)return false;F.removeClass("l-expandable-open").addClass("l-expandable-close");if(A.slide)$("> .l-children",D).slideToggle("fast");else $("> .l-children",D).hide();$("> div ."+_._getParentNodeClassName(true),D).removeClass(_._getParentNodeClassName(true)).addClass(_._getParentNodeClassName());_.trigger("collapse",[{data:I,target:D[0]}])}else if(F.hasClass("l-expandable-close")&&(!A.btnClickToToggleOnly||E)){if(_.trigger("beforeExpand",[{data:I,target:D[0]}])==false)return false;$(_.toggleNodeCallbacks).each(function(){if(this.data==I)this.callback(D[0],I)});F.removeClass("l-expandable-close").addClass("l-expandable-open");var G=function(){_.trigger("expand",[{data:I,target:D[0]}])};if(A.slide)$("> .l-children",D).slideToggle("fast",G);else{$("> .l-children",D).show();G()}$("> div ."+_._getParentNodeClassName(),D).removeClass(_._getParentNodeClassName()).addClass(_._getParentNodeClassName(true))}_.trigger("click",[{data:I,target:D[0]}])});if($.fn.ligerDrag&&A.nodeDraggable){_.nodeDroptip=$("<div class='l-drag-nodedroptip' style='display:none'></div>").appendTo("body");_.tree.ligerDrag({revert:true,animate:false,proxyX:20,proxyY:20,proxy:function(H,D){var G=_._getSrcElementByEvent(D);if(G.node){var B="dragging";if(A.nodeDraggingRender)B=A.nodeDraggingRender(H.draggingNodes,H,_);else{B="";var E=false;for(var I in H.draggingNodes){var C=H.draggingNodes[I];if(E)B+=",";B+=C.text;E=true}}var F=$("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div>"+B+"</div>").appendTo("body");return F}},onRevert:function(){return false},onRendered:function(){this.set("cursor","default");_.children[this.id]=this},onStartDrag:function(B,$){if($.button==2)return false;this.set("cursor","default");var C=_._getSrcElementByEvent($);if(C.checkbox)return false;if(A.checkbox){var D=_.getChecked();this.draggingNodes=[];for(var E in D)this.draggingNodes.push(D[E].data);if(!this.draggingNodes||!this.draggingNodes.length)return false}else this.draggingNodes=[C.data];this.draggingNode=C.data;this.set("cursor","move");_.nodedragging=true;this.validRange={top:_.tree.offset().top,bottom:_.tree.offset().top+_.tree.height(),left:_.tree.offset().left,right:_.tree.offset().left+_.tree.width()}},onDrag:function(P,C){var I=this.draggingNode;if(!I)return false;var N=this.draggingNodes?this.draggingNodes:[I];if(_.nodeDropIn==null)_.nodeDropIn=-1;var G=C.pageX,J=C.pageY,E=false,A=this.validRange;if(G<A.left||G>A.right||J>A.bottom||J<A.top){_.nodeDropIn=-1;_.nodeDroptip.hide();this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no");return}for(var K=0,F=_.nodes.length;K<F;K++){var O=_.nodes[K],B=O["treedataindex"];if(I["treedataindex"]==B)E=true;if($.inArray(O,N)!=-1)continue;var M=E?true:false;if(_.nodeDropIn!=-1&&_.nodeDropIn!=B)continue;var L=$("li[treedataindex="+B+"] div:first",_.tree),Q=L.offset(),D={top:Q.top,bottom:Q.top+L.height(),left:_.tree.offset().left,right:_.tree.offset().left+_.tree.width()};if(G>D.left&&G<D.right&&J>D.top&&J<D.bottom){var H=Q.top;if(M)H+=L.height();_.nodeDroptip.css({left:D.left,top:H,width:D.right-D.left}).show();_.nodeDropIn=B;_.nodeDropDir=M?"bottom":"top";if(J>D.top+7&&J<D.bottom-7){this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add");_.nodeDroptip.hide();_.nodeDropInParent=true}else{this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes");_.nodeDroptip.show();_.nodeDropInParent=false}break}else if(_.nodeDropIn!=-1){_.nodeDropIn=-1;_.nodeDropInParent=false;_.nodeDroptip.hide();this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no")}}},onStopDrag:function(D,B){var C=this.draggingNodes;_.nodedragging=false;if(_.nodeDropIn!=-1){for(var F=0;F<C.length;F++){var E=C[F].children;if(E)C=$.grep(C,function(_,B){var A=$.inArray(_,E)==-1;return A})}for(F in C){var A=C[F];if(_.nodeDropInParent){_.remove(A);_.append(_.nodeDropIn,[A])}else{_.remove(A);_.append(_.getParent(_.nodeDropIn),[A],_.nodeDropIn,_.nodeDropDir=="bottom")}}_.nodeDropIn=-1}_.nodeDroptip.hide();this.set("cursor","default")}})}},_setParentCheckboxStatus:function(B){var _=this,C=this.options,A=$(".l-checkbox-unchecked",B.parent()).length==0,D=$(".l-checkbox-checked",B.parent()).length==0;if(A)B.parent().prev().find(".l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-incomplete").addClass("l-checkbox-checked");else if(D)B.parent().prev().find("> .l-checkbox").removeClass("l-checkbox-checked l-checkbox-incomplete").addClass("l-checkbox-unchecked");else B.parent().prev().find("> .l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-checked").addClass("l-checkbox-incomplete");if(B.parent().parent("li").length>0)_._setParentCheckboxStatus(B.parent().parent("li"))}})})(jQuery);(function($){var _=$.ligerui;_.windowCount=0;$.ligerWindow=function($){return _.run.call(null,"ligerWindow",arguments,{isStatic:true})};$.ligerWindow.show=function(_){return $.ligerWindow(_)};$.ligerDefaults.Window={showClose:true,showMax:true,showToggle:true,showMin:true,title:"window",load:false,onLoaded:null,onClose:null,onRegain:null,onMax:null,modal:false};$.ligerMethos.Window={};_.controls.Window=function($){_.controls.Window.base.constructor.call(this,null,$)};_.controls.Window.ligerExtend(_.core.Win,{__getType:function(){return"Window"},__idPrev:function(){return"Window"},_extendMethods:function(){return $.ligerMethos.Window},_render:function(){var B=this,D=this.options;B.window=$("<div class=\"l-window\"><div class=\"l-window-header\"><div class=\"l-window-header-buttons\"><div class=\"l-window-toggle\"></div><div class=\"l-window-max\"></div><div class=\"l-window-close\"></div><div class=\"l-clear\"></div></div><div class=\"l-window-header-inner\"></div></div><div class=\"l-window-content\"></div></div>");B.element=B.window[0];B.window.content=$(".l-window-content",B.window);B.window.header=$(".l-window-header",B.window);B.window.buttons=$(".l-window-header-buttons:first",B.window);if(D.url){if(D.load){B.window.content.load(D.url,function(){B.trigger("loaded")});B.window.content.addClass("l-window-content-scroll")}else{var C=$("<iframe frameborder='0' src='"+D.url+"'></iframe>"),F="ligeruiwindow"+_.windowCount++;if(D.name)F=D.name;C.attr("name",F).attr("id",F);D.framename=F;C.appendTo(B.window.content);B.iframe=C}}else if(D.content){var A=$("<div>"+D.content+"</div>");A.appendTo(B.window.content)}else if(D.target){B.window.content.append(D.target);D.target.show()}this.mask();B.active();$("body").append(B.window);B.set({width:D.width,height:D.height});var E=0,G=0;if(D.left!=null)E=D.left;else D.left=E=0.5*($(window).width()-B.window.width());if(D.top!=null)G=D.top;else D.top=G=0.5*($(window).height()-B.window.height())+$(window).scrollTop()-10;if(E<0)D.left=E=0;if(G<0)D.top=G=0;B.set(D);D.framename&&$(">iframe",B.window.content).attr("name",D.framename);if(!D.showToggle)$(".l-window-toggle",B.window).remove();if(!D.showMax)$(".l-window-max",B.window).remove();if(!D.showClose)$(".l-window-close",B.window).remove();B._saveStatus();if($.fn.ligerDrag)B.draggable=B.window.drag=B.window.ligerDrag({handler:".l-window-header-inner",onStartDrag:function(){B.active()},onStopDrag:function(){B._saveStatus()},animate:false});if($.fn.ligerResizable){B.resizeable=B.window.resizable=B.window.ligerResizable({onStartResize:function(){B.active();$(".l-window-max",B.window).removeClass("l-window-regain")},onStopResize:function(_,$){var C=0,A=0;if(!isNaN(parseInt(B.window.css("top"))))C=parseInt(B.window.css("top"));if(!isNaN(parseInt(B.window.css("left"))))A=parseInt(B.window.css("left"));if(_.diffTop)B.window.css({top:C+_.diffTop});if(_.diffLeft)B.window.css({left:A+_.diffLeft});if(_.newWidth)B.window.width(_.newWidth);if(_.newHeight)B.window.content.height(_.newHeight-28);B._saveStatus();return false}});B.window.append("<div class='l-btn-nw-drop'></div>")}$(".l-window-toggle",B.window).click(function(){if($(this).hasClass("l-window-toggle-close")){B.collapsed=false;$(this).removeClass("l-window-toggle-close")}else{B.collapsed=true;$(this).addClass("l-window-toggle-close")}B.window.content.slideToggle()}).hover(function(){if(B.window.drag)B.window.drag.set("disabled",true)},function(){if(B.window.drag)B.window.drag.set("disabled",false)});$(".l-window-close",B.window).click(function(){if(B.trigger("close")==false)return false;B.window.hide();_.win.removeTask(B)}).hover(function(){if(B.window.drag)B.window.drag.set("disabled",true)},function(){if(B.window.drag)B.window.drag.set("disabled",false)});$(".l-window-max",B.window).click(function(){if($(this).hasClass("l-window-regain")){if(B.trigger("regain")==false)return false;B.window.width(B._width).css({left:B._left,top:B._top});B.window.content.height(B._height-28);$(this).removeClass("l-window-regain")}else{if(B.trigger("max")==false)return false;B.window.width($(window).width()-2).css({left:0,top:0});B.window.content.height($(window).height()-28).show();$(this).addClass("l-window-regain")}})},_saveStatus:function(){var $=this;$._width=$.window.width();$._height=$.window.height();var A=0,_=0;if(!isNaN(parseInt($.window.css("top"))))A=parseInt($.window.css("top"));if(!isNaN(parseInt($.window.css("left"))))_=parseInt($.window.css("left"));$._top=A;$._left=_},min:function(){this.window.hide();this.minimize=true;this.actived=false},_setShowMin:function(C){var A=this,B=this.options;if(C){if(!A.winmin){A.winmin=$("<div class=\"l-window-min\"></div>").prependTo(A.window.buttons).click(function(){A.min()});_.win.addTask(A)}}else if(A.winmin){A.winmin.remove();A.winmin=null}},_setLeft:function($){if($!=null)this.window.css({left:$})},_setTop:function($){if($!=null)this.window.css({top:$})},_setWidth:function($){if($>0)this.window.width($)},_setHeight:function($){if($>28)this.window.content.height($-28)},_setTitle:function(_){if(_)$(".l-window-header-inner",this.window.header).html(_)},_setUrl:function(A){var $=this,_=this.options;_.url=A;if(_.load)$.window.content.html("").load(_.url,function(){if($.trigger("loaded")==false)return false});else if($.jiframe)$.jiframe.attr("src",_.url)},hide:function(){var $=this,_=this.options;this.unmask();this.window.hide()},show:function(){var $=this,_=this.options;this.mask();this.window.show()},remove:function(){var $=this,_=this.options;this.unmask();this.window.remove()},active:function(){var A=this,D=this.options;if(A.minimize){var C=A._width,B=A._height,E=A._left,F=A._top;if(A.maximum){C=$(window).width();B=$(window).height();E=F=0;if(_.win.taskbar){B-=_.win.taskbar.outerHeight();if(_.win.top)F+=_.win.taskbar.outerHeight()}}A.set({width:C,height:B,left:E,top:F})}A.actived=true;A.minimize=false;_.win.setFront(A);A.show();_.win.setFront(this)},setUrl:function($){return _setUrl($)}})})(jQuery)